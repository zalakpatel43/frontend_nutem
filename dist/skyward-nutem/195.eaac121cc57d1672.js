"use strict";(self.webpackChunkskyward_nutem=self.webpackChunkskyward_nutem||[]).push([[195],{6441:(A,D,r)=>{r.d(D,{L:()=>W});var p=r(4438),f=r(4532),e=r(8498);let W=(()=>{class u{constructor(k,C){this.permissionService=k,this.router=C}canActivate(k,C){return!!this.permissionService.hasPermission(k.data.permission)||(this.router.navigate(["/unauthorized"]),!1)}static#e=this.\u0275fac=function(C){return new(C||u)(p.KVO(f.n),p.KVO(e.Ix))};static#t=this.\u0275prov=p.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},7195:(A,D,r)=>{r.r(D),r.d(D,{WeightCheckModule:()=>fe});var p=r(177),f=r(8498),e=r(4438);let W=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-weight-check"]],decls:1,vars:0,template:function(o,i){1&o&&e.nrm(0,"router-outlet")},dependencies:[f.n3]})}return a})();var u=r(4434),F=r(1528),k=r(5794),C=r(4532),v=r(8834),j=r(9213),E=r(3380),G=r(6081);const M=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),z=()=>["../","add"],$=a=>["..","edit",a];function L(a,s){1&a&&(e.j41(0,"a",16)(1,"span"),e.EFF(2,"Add New"),e.k0s(),e.nrm(3,"i",17),e.k0s()),2&a&&e.Y8G("routerLink",e.lJ4(1,z))}function B(a,s){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=s.value;e.R7$(),e.JRh(e.i5U(2,1,t,"dd/MM/yyyy hh:mm a"))}}function O(a,s){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=s.value;e.R7$(),e.JRh(e.i5U(2,1,t,"dd/MM/yyyy hh:mm a"))}}function Y(a,s){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&a){const t=s.value;e.R7$(),e.JRh(t)}}function x(a,s){if(1&a&&(e.j41(0,"a",21)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()),2&a){const t=e.XpG().row;e.Y8G("routerLink",e.eq3(1,$,t.id))}}function V(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG().row,n=e.XpG(2);return e.Njj(n.removeWeightCheck(i.id))}),e.j41(1,"mat-icon"),e.EFF(2,"close"),e.k0s()()}}function U(a,s){if(1&a&&e.DNE(0,x,3,3,"a",19)(1,V,3,0,"button",20),2&a){const t=e.XpG(2);e.Y8G("ngIf",t.IsEditPermission),e.R7$(),e.Y8G("ngIf",t.IsDeletePermission)}}function H(a,s){1&a&&(e.j41(0,"ngx-datatable-column",18),e.DNE(1,U,2,2,"ng-template",12),e.k0s()),2&a&&e.Y8G("sortable",!1)}let P=(()=>{class a{constructor(t,o,i){this.weightCheckService=t,this.notificationService=o,this.permissionService=i,this.weightCheckData=[],this.page=u.Wt.weightCheck,this.permissions=u.eZ,this.IsAddPemission=!1,this.IsEditPermission=!1,this.IsDeletePermission=!1,this.searchData={},this.showDeleteModal=!1}ngOnInit(){this.IsAddPemission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - Add"),this.IsEditPermission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - Edit"),this.IsDeletePermission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - Delete"),this.getWeightCheckData()}getWeightCheckData(){this.loading=!0,this.weightCheckService.getWeightCheckList().subscribe(t=>{this.weightCheckData=t,this.loading=!1},t=>{this.error=t,this.loading=!1})}removeWeightCheck(t){confirm("Are you sure, you want to delete this Weight Check?")&&this.weightCheckService.DeleteWeightCheck(t).subscribe(()=>{this.getWeightCheckData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(t){this.searchData=Object.assign({},t)}isActiveRow(t){return{"text-danger":!t.isActive}}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(F.Q),e.rXU(k.tw),e.rXU(C.n))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-list"]],decls:20,vars:15,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","class","app-button btn",3,"routerLink",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","messages"],["name","Start Date","prop","startDateTime"],["ngx-datatable-cell-template",""],["name","End Date","prop","endDateTime"],["name","Shift","prop","shiftName"],["name","Actions",3,"sortable",4,"ngIf"],["mat-flat-button","",1,"app-button","btn",3,"routerLink"],[1,"icon-plus"],["name","Actions",3,"sortable"],["class","button-padding icon-green",3,"routerLink",4,"ngIf"],["type","button","style","border: none; background-color: white; color: red;",3,"click",4,"ngIf"],[1,"button-padding","icon-green",3,"routerLink"],["type","button",2,"border","none","background-color","white","color","red",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e.EFF(6,"Weight Check List"),e.k0s()(),e.j41(7,"div",6),e.DNE(8,L,4,2,"a",7),e.k0s()(),e.j41(9,"div",8)(10,"div",9)(11,"ngx-datatable",10),e.nI1(12,"searchtable"),e.j41(13,"ngx-datatable-column",11),e.DNE(14,B,3,4,"ng-template",12),e.k0s(),e.j41(15,"ngx-datatable-column",13),e.DNE(16,O,3,4,"ng-template",12),e.k0s(),e.j41(17,"ngx-datatable-column",14),e.DNE(18,Y,2,1,"ng-template",12),e.k0s(),e.DNE(19,H,2,1,"ngx-datatable-column",15),e.k0s()()()()()()),2&o&&(e.R7$(8),e.Y8G("ngIf",i.IsAddPemission),e.R7$(3),e.Y8G("rows",e.i5U(12,11,i.weightCheckData,i.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",i.loading)("scrollbarH",!0)("messages",e.lJ4(14,M)),e.R7$(8),e.Y8G("ngIf",i.IsEditPermission||i.IsDeletePermission))},dependencies:[p.bT,f.Wk,v.It,j.An,E.ge,E.ed,E.QI,p.vh,G.j],styles:[".button-padding[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .button-padding[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;vertical-align:middle}.button-padding[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:8px;text-decoration:none;color:inherit}  .ngx-datatable .datatable-header-cell{background-color:#17bb58!important;color:#fff!important}.icon-green[_ngcontent-%COMP%]{color:green}.btn[_ngcontent-%COMP%]{background-color:#17bb58!important;color:#fff!important}  .ngx-datatable.material .datatable-body .progress-linear .container{background-color:#90ee90}  .ngx-datatable.material .datatable-body .progress-linear .container .bar{background-color:green}"]})}return a})();var h=r(9417),_=r(2102),X=r(9631),Q=r(2798),K=r(6600),I=r(5084),J=r(8777),Z=r(7133),y=r(2356);function q(a,s){if(1&a){const t=e.RV6();e.j41(0,"a",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(1," View List "),e.k0s()}}function ee(a,s){if(1&a&&(e.j41(0,"mat-option",53),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.shiftName," ")}}function te(a,s){if(1&a&&(e.j41(0,"mat-option",53),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.poNumber," ")}}function ie(a,s){if(1&a&&(e.j41(0,"mat-option",53),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.productName," ")}}function ae(a,s){if(1&a&&(e.j41(0,"mat-option",53),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function oe(a,s){if(1&a&&(e.j41(0,"div",63)(1,"mat-form-field",56)(2,"mat-label"),e.EFF(3),e.k0s(),e.nrm(4,"input",64),e.k0s()()),2&a){const t=s.$implicit;e.R7$(3),e.JRh(t.nozzelName),e.R7$(),e.Y8G("formControlName",t.nozzelName)}}function ne(a,s){if(1&a&&(e.j41(0,"mat-option",53),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function re(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",54)(1,"div",17)(2,"div",55)(3,"mat-form-field",56)(4,"mat-label"),e.EFF(5,"Time"),e.k0s(),e.nrm(6,"input",57)(7,"ngx-material-timepicker",null,3),e.k0s()(),e.DNE(9,oe,5,2,"div",58),e.j41(10,"div",59)(11,"mat-form-field",56)(12,"mat-label"),e.EFF(13,"Done By"),e.k0s(),e.j41(14,"mat-select",60),e.DNE(15,ne,2,2,"mat-option",25),e.k0s()()(),e.j41(16,"div",61)(17,"button",62),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addFinalWeightDetail())}),e.j41(18,"mat-icon"),e.EFF(19,"add"),e.k0s()()()()()}if(2&a){const t=s.index,o=e.sdS(8),i=e.XpG();e.Y8G("formGroupName",t),e.R7$(6),e.Y8G("ngxTimepicker",o),e.R7$(3),e.Y8G("ngForOf",i.NozzleList),e.R7$(6),e.Y8G("ngForOf",i.usersList)}}function se(a,s){if(1&a&&(e.j41(0,"th",65),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI("",t.nozzelName," ")}}function ce(a,s){if(1&a&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&a){const t=s.$implicit,o=e.XpG().$implicit;e.R7$(),e.SpI(" ",o[t.nozzelName]||""," ")}}function he(a,s){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.DNE(5,ce,2,1,"td",49),e.j41(6,"td"),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"td")(10,"button",66),e.bIt("click",function(){const i=e.eBV(t),n=i.$implicit,l=i.index,g=e.XpG();return e.Njj(g.onEditDetail(n,l))}),e.nrm(11,"i",67),e.k0s()()()}if(2&a){const t=s.$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",t.Time," "),e.R7$(2),e.SpI(" ",t.DoneByNames," "),e.R7$(),e.Y8G("ngForOf",o.NozzleList),e.R7$(2),e.SpI(" ",e.i5U(8,4,t.Average,"1.2-2")," ")}}let T=(()=>{class a{constructor(t,o,i,n,l,g){this.activatedRoute=t,this.router=o,this.formBuilder=i,this.weightCheckService=n,this.notificationService=l,this.permissionService=g,this.page=u.Wt.weightCheck,this.permissions=u.eZ,this.shiftList=[],this.productionOrderList=[],this.productList=[],this.NozzleList=[],this.usersList=[],this.AddedWeightCheckDetailsList=[],this.EditNozzleDetailsId=-1,this.minEndDate=null,this.IsViewPermission=!1,this.weightRangeValidator=c=>{const d=c.get("MinWeightRange")?.value,m=c.get("MaxWeightRange")?.value;return null!=d&&null!=m&&""!==d&&""!==m&&d>m?{rangeError:!0}:null},this.endDateValidator=c=>{const d=c.get("StartDateTime")?.value,m=c.get("EndDateTime")?.value;return m&&d&&m<d?{endDateBeforeStartDate:!0}:null},this.createForm()}ngOnInit(){this.router.events.subscribe(t=>{t instanceof f.wF&&window.scrollTo({top:0,behavior:"smooth"})}),this.getRoute(),this.loadDropdowns(),this.IsViewPermission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - View")}getRoute(){this.routerSub=this.activatedRoute.params.subscribe(t=>{this.isEditMode=!u.ov.isEmpty(t.id),this.createForm(),this.isEditMode&&(this.weightCheckId=t.id,this.getWeightCheckById())})}getWeightCheckById(){this.weightCheckService.getByIdWeightCheck(this.weightCheckId).subscribe(t=>{this.weightCheckData=t,this.setWeightCheckData()},t=>{console.log(t)})}setWeightCheckData(){this.WeightCheckForm.patchValue({Code:this.weightCheckData.code,StartDateTime:this.weightCheckData.startDateTime,EndDateTime:this.weightCheckData.endDateTime,ShiftId:this.weightCheckData.shiftId,SAPProductionOrderId:this.weightCheckData.sapProductionOrderId,ProductId:this.weightCheckData.productId,BottleDateCode:this.weightCheckData.bottleDateCode,PackSize:this.weightCheckData.packSize,StandardWeight:this.weightCheckData.targetWeight,MinWeightRange:this.weightCheckData.minWeightRange,MaxWeightRange:this.weightCheckData.maxWeightRange,QAUserId:this.weightCheckData.qaUserId,Note:this.weightCheckData.note}),this.WeightCheckForm.get("SAPProductionOrderId").disable(),this.WeightCheckForm.get("ProductId").disable(),this.WeightCheckForm.get("MinWeightRange")?.valueChanges.subscribe(()=>this.onWeightRangeChange()),this.WeightCheckForm.get("MaxWeightRange")?.valueChanges.subscribe(()=>this.onWeightRangeChange());const t=o=>new Date(o).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});setTimeout(()=>{this.weightCheckData.weightCheckDetails?.forEach(o=>{const i={};this.NozzleList.forEach(c=>{const d=o.weightCheckSubDetails.find(m=>m.nozzleId===c.id);i[c.id]=d?d.weight??"":""});const n=o.doneByUserIds.split(",").map(c=>Number(c.trim())).filter(c=>!isNaN(c));let l=this.usersList.filter(c=>o.doneByUserIds?.includes(c.id)).map(c=>c.name).join(", "),g={Time:t(o.tDateTime),DoneBy:n,Average:o.avgWeight,Id:o.id,HeaderId:o.headerId,DoneByNames:l};Object.entries(i).forEach(([c,d])=>{g[c]=d}),this.AddedWeightCheckDetailsList.push(g)})},500)}loadDropdowns(){this.weightCheckService.getNozzleList().subscribe(t=>{this.NozzleList=t.items,this.addWeightDetail()}),this.weightCheckService.getShiftList().subscribe(t=>{this.shiftList=t}),this.weightCheckService.getProductionOrderList().subscribe(t=>{this.productionOrderList=t}),this.weightCheckService.getProductList().subscribe(t=>{this.productList=t}),this.weightCheckService.getUserList().subscribe(t=>{this.usersList=t})}createForm(){this.WeightCheckForm=this.formBuilder.group({Code:[{value:"",disabled:!0},[h.k0.required]],StartDateTime:["",[h.k0.required]],EndDateTime:["",[h.k0.required,this.endDateValidator]],ShiftId:["",[h.k0.required]],SAPProductionOrderId:["",[h.k0.required]],ProductId:["",[h.k0.required]],BottleDateCode:["",[h.k0.required]],PackSize:["",[h.k0.required]],StandardWeight:["",[h.k0.required]],MinWeightRange:["",[h.k0.required,h.k0.min(0)]],MaxWeightRange:["",[h.k0.required,h.k0.min(0)]],QAUserId:["",[h.k0.required]],Note:["",""],WeightCheckDetails:this.formBuilder.array([])},{validators:this.weightRangeValidator}),this.WeightCheckForm.controls.StartDateTime.setValue((new Date).toISOString().split("T")[0])}onWeightRangeChange(){const t=this.WeightCheckForm.get("MinWeightRange")?.value,o=this.WeightCheckForm.get("MaxWeightRange")?.value;null!=t&&null!=o&&(Number(t)>Number(o)?this.notificationService.error("Max Weight Range should be greater than Min Weight Range"):this.notificationService.clear())}onStartDateChange(){const t=this.WeightCheckForm.get("StartDateTime")?.value;this.minEndDate=t?new Date(t):null}onEndDateChange(){const t=this.WeightCheckForm.get("EndDateTime")?.value,o=this.WeightCheckForm.get("StartDateTime")?.value;o||this.notificationService.error("please select Start date"),o&&t&&new Date(t)<=new Date(o)?this.notificationService.error("End date should be greated than Start date"):this.WeightCheckForm.get("EndDateTime")?.updateValueAndValidity()}getToday(){return(new Date).toISOString().split("T")[0]}addWeightDetail(){this.WeightCheckDetails?.clear(),this.EditNozzleDetailsId=-1;const t=this.formBuilder.group({});this.NozzleList.forEach((o,i)=>{t.addControl(o.nozzelName,this.formBuilder.control(""))}),t.addControl("Time",this.formBuilder.control("")),t.addControl("DoneBy",this.formBuilder.control("")),this.WeightCheckDetails=this.WeightCheckForm?.get("WeightCheckDetails"),this.WeightCheckDetails.push(t)}addFinalWeightDetail(){const t=this.WeightCheckDetails.at(0).value;if(console.log("details",this.WeightCheckDetails.at(0)),t.Time)if(t.DoneBy)if("INVALID"===this.WeightCheckDetails.at(0).status)this.notificationService.error("weight should be greater than zero");else if(this.EditNozzleDetailsId>=0){const o=this.calculateAverageForEntry(t);t.Average=o;let i=this.usersList.filter(n=>t.DoneBy.includes(n.id)).map(n=>n.name).join(", ");t.DoneByNames=i,this.AddedWeightCheckDetailsList[this.EditNozzleDetailsId]=t,this.addWeightDetail()}else{const o=this.calculateAverageForEntry(t);t.Average=o;let i=this.usersList.filter(n=>t.DoneBy.includes(n.id)).map(n=>n.name).join(", ");t.DoneByNames=i,this.AddedWeightCheckDetailsList.push(t),this.addWeightDetail()}else this.notificationService.error("please select Done by");else this.notificationService.error("please select time")}calculateAverageForEntry(t){const o=Object.keys(t).filter(n=>"Time"!==n&&"DoneBy"!==n&&"Average"!==n).map(n=>parseFloat(t[n])).filter(n=>!isNaN(n)),i=o.reduce((n,l)=>n+l,0);return o.length?i/o.length:0}onEditDetail(t,o){this.populateFormWithValues(this.AddedWeightCheckDetailsList[o]),this.EditNozzleDetailsId=o}populateFormWithValues(t){const o=Array.isArray(t)?t:[t];this.WeightCheckDetails=this.WeightCheckForm.get("WeightCheckDetails"),this.WeightCheckDetails.clear(),o.forEach(i=>{const n=this.formBuilder.group({});this.NozzleList.forEach(l=>{n.addControl(l.nozzelName,this.formBuilder.control(i[l.nozzelName]||""))}),n.addControl("Time",this.formBuilder.control(i.Time||"")),n.addControl("DoneBy",this.formBuilder.control(i.DoneBy||"")),this.WeightCheckDetails.push(n)})}removeWeightDetail(t){this.AddedWeightCheckDetailsList.splice(t,1)}createWeightCheck(t){this.weightCheckService.addWeightCheck(t).subscribe(()=>{this.cancel(),this.notificationService.success("Weight Check created successfully.")},o=>{this.error=o})}updateWeightCheck(t){this.weightCheckService.updateWeightCheck(t).subscribe(()=>{this.cancel(),this.notificationService.success("Weight Check updated successfully.")},o=>{this.error=o})}save(){this.isFormSubmitted=!0;const t=this.WeightCheckForm.get("EndDateTime")?.value,o=this.WeightCheckForm.get("StartDateTime")?.value;if(!this.WeightCheckForm.invalid){if(new Date(t)<=new Date(o))return void this.notificationService.error("End date should be greated than Start date");if(this.AddedWeightCheckDetailsList.length<1)return void this.notificationService.error("at lease one Nozzlewise deatils required");{let i=this.WeightCheckForm.value;i.WeightCheckDetails=this.AddedWeightCheckDetailsList;let n=this.transformData(i);this.isEditMode?this.updateWeightCheck(n):this.createWeightCheck(n)}}}transformData(t){function o(g){const c=new Date(g);if(isNaN(c.getTime()))throw new Error("Invalid date string provided");return`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}T${String(c.getHours()).padStart(2,"0")}:${String(c.getMinutes()).padStart(2,"0")}`}function i(g){const d=g.match(/(\d{1,2}):(\d{2}) (AM|PM)/i);if(!d)throw new Error("Invalid time format");let[,m,N,S]=d,b=parseInt(m,10);const ke=parseInt(N,10);"AM"===S.toUpperCase()?12===b&&(b=0):"PM"===S.toUpperCase()&&12!==b&&(b+=12);const Ce=b.toString().padStart(2,"0"),be=ke.toString().padStart(2,"0"),w=new Date;return`${w.getFullYear()}-${(w.getMonth()+1).toString().padStart(2,"0")}-${w.getDate().toString().padStart(2,"0")}T${Ce}:${be}`}const n=Array.isArray(t.WeightCheckDetails)?t.WeightCheckDetails:Object.values(t.WeightCheckDetails||{});return{Id:this.isEditMode?this.weightCheckData.id:0,Code:this.isEditMode?this.weightCheckData.code:"",StartDateTime:o(t.StartDateTime),EndDateTime:o(t.EndDateTime),SAPProductionOrderId:this.isEditMode?this.weightCheckData.sapProductionOrderId:t.SAPProductionOrderId,ProductId:this.isEditMode?this.weightCheckData.productId:t.ProductId,ShiftId:t.ShiftId,BottleDateCode:t.BottleDateCode.toString(),PackSize:t.PackSize.toString(),TargetWeight:t.StandardWeight.toString(),MinWeightRange:t.MinWeightRange,MaxWeightRange:t.MaxWeightRange,QAUserId:t.QAUserId,Note:t.Note,WeightCheckDetails:Array.isArray(n)?n.map((g,c)=>({Id:0,HeaderId:0,TDateTime:i(g.Time),AvgWeight:g.Average,DoneByUserIdList:g.DoneBy,WeightCheckSubDetails:Object.entries(g).filter(([d,m])=>"Average"!==d&&"Time"!==d&&"DoneBy"!==d&&"DoneByNames"!==d).map(([d,m])=>({Id:0,DetailId:0,NozzleId:Number(d),Weight:""!==m?m:null}))})):[]}}cancel(){this.router.navigate(["/secure/masters","production-order"])}ngOnDestroy(){this.routerSub.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(f.nX),e.rXU(f.Ix),e.rXU(h.ze),e.rXU(F.Q),e.rXU(k.tw),e.rXU(C.n))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-add-edit"]],decls:135,vars:54,consts:[["form","ngForm"],["pickerStart",""],["pickerEnd",""],["timepicker",""],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button back-Green",3,"click",4,"ngIf"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","mb-3"],["appearance","fill",1,"full-width"],["matInput","","formControlName","StartDateTime",3,"dateChange","matDatepicker","max"],["matSuffix","",3,"for"],[3,"control","message","formSubmitted"],["matInput","","formControlName","EndDateTime",3,"dateChange","matDatepicker","min"],["formControlName","ShiftId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","SAPProductionOrderId",3,"disabled"],["formControlName","ProductId",3,"disabled"],["matInput","","formControlName","BottleDateCode"],["matInput","","formControlName","PackSize","type","number"],["matInput","","formControlName","StandardWeight","type","number","min","0"],["matInput","","formControlName","MinWeightRange","type","number","min","0",3,"change"],["matInput","","formControlName","MaxWeightRange","type","number","min","0",3,"change"],["formControlName","QAUserId"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","mb-3"],["matInput","","formControlName","Note"],[1,"card-header","d-flex","align-items-center","justify-content-between"],["formArrayName","WeightCheckDetails"],["class","row mt-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"table-responsive"],["id","gridNozzlewiseWeight",1,"table","table-hover","table-bordered","display","mb-30","fixed-table-scroll-inner"],[1,"bg-primary","text-primary","text-center"],[1,"back-Green",2,"width","8%"],[1,"back-Green",2,"width","12%"],[1,"back-Green",2,"text-align","center"],[1,"back-Green",2,"width","5%"],[1,"back-Green"],["class","back-Green","data-nozzleid","1",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","",1,"app-button","mr-1","back-Green"],["mat-flat-button","","color","primary",1,"app-button","back-Green",3,"click"],[3,"value"],[1,"row","mt-3",3,"formGroupName"],[1,"col-12","col-sm-12","col-md-2","col-lg-2","mb-3"],[1,"full-width"],["matInput","","placeholder","Select time","formControlName","Time",3,"ngxTimepicker"],["class","col-12 col-sm-12 col-md-1 col-lg-1 mb-3 ",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-3","p-1"],["formControlName","DoneBy","multiple",""],[1,"col-12","col-sm-12","col-md-2","col-lg-2","mb-3","p-1","d-flex","align-items-center"],["type","button","mat-icon-button","",1,"icon-green",3,"click"],[1,"col-12","col-sm-12","col-md-1","col-lg-1","mb-3"],["type","number","matInput","","min","0",3,"formControlName"],["data-nozzleid","1",1,"back-Green"],["type","button",1,"btn","btn-success","btn-sm","btnModifyRow","back-Green",3,"click"],[1,"fa","fa-pencil"]],template:function(o,i){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h4",9),e.nrm(6,"i",10),e.EFF(7," Add/Edit Weight Check"),e.k0s()(),e.j41(8,"div",11),e.DNE(9,q,2,0,"a",12),e.k0s()(),e.j41(10,"form",13,0),e.bIt("submit",function(){return e.eBV(n),e.Njj(i.save())}),e.j41(12,"div",14)(13,"div",15)(14,"h5",9),e.EFF(15,"Basic Details"),e.k0s()(),e.j41(16,"div",16)(17,"div",17)(18,"div",18)(19,"mat-form-field",19)(20,"mat-label"),e.EFF(21,"Start Date"),e.k0s(),e.j41(22,"input",20),e.bIt("dateChange",function(){return e.eBV(n),e.Njj(i.onStartDateChange())}),e.k0s(),e.nrm(23,"mat-datepicker-toggle",21)(24,"mat-datepicker",null,1)(26,"mat-validation-message",22),e.k0s()(),e.j41(27,"div",18)(28,"mat-form-field",19)(29,"mat-label"),e.EFF(30,"End Date"),e.k0s(),e.j41(31,"input",23),e.bIt("dateChange",function(){return e.eBV(n),e.Njj(i.onEndDateChange())}),e.k0s(),e.nrm(32,"mat-datepicker-toggle",21)(33,"mat-datepicker",null,2)(35,"mat-validation-message",22),e.k0s()(),e.j41(36,"div",18)(37,"mat-form-field",19)(38,"mat-label"),e.EFF(39,"Shift"),e.k0s(),e.j41(40,"mat-select",24),e.DNE(41,ee,2,2,"mat-option",25),e.k0s(),e.nrm(42,"mat-validation-message",22),e.k0s()(),e.j41(43,"div",18)(44,"mat-form-field",19)(45,"mat-label"),e.EFF(46,"SAP Production Order"),e.k0s(),e.j41(47,"mat-select",26),e.DNE(48,te,2,2,"mat-option",25),e.k0s(),e.nrm(49,"mat-validation-message",22),e.k0s()(),e.j41(50,"div",18)(51,"mat-form-field",19)(52,"mat-label"),e.EFF(53,"Product"),e.k0s(),e.j41(54,"mat-select",27),e.DNE(55,ie,2,2,"mat-option",25),e.k0s(),e.nrm(56,"mat-validation-message",22),e.k0s()(),e.j41(57,"div",18)(58,"mat-form-field",19)(59,"mat-label"),e.EFF(60,"Bottle Date Code"),e.k0s(),e.nrm(61,"input",28)(62,"mat-validation-message",22),e.k0s()(),e.j41(63,"div",18)(64,"mat-form-field",19)(65,"mat-label"),e.EFF(66,"Pack Size"),e.k0s(),e.nrm(67,"input",29)(68,"mat-validation-message",22),e.k0s()(),e.j41(69,"div",18)(70,"mat-form-field",19)(71,"mat-label"),e.EFF(72,"Standard Weight"),e.k0s(),e.nrm(73,"input",30)(74,"mat-validation-message",22),e.k0s()(),e.j41(75,"div",18)(76,"mat-form-field",19)(77,"mat-label"),e.EFF(78,"Min Weight Range"),e.k0s(),e.j41(79,"input",31),e.bIt("change",function(){return e.eBV(n),e.Njj(i.onWeightRangeChange())}),e.k0s(),e.nrm(80,"mat-validation-message",22),e.k0s()(),e.j41(81,"div",18)(82,"mat-form-field",19)(83,"mat-label"),e.EFF(84,"Max Weight Range"),e.k0s(),e.j41(85,"input",32),e.bIt("change",function(){return e.eBV(n),e.Njj(i.onWeightRangeChange())}),e.k0s(),e.nrm(86,"mat-validation-message",22),e.k0s()(),e.j41(87,"div",18)(88,"mat-form-field",19)(89,"mat-label"),e.EFF(90,"QA Checked by"),e.k0s(),e.j41(91,"mat-select",33),e.DNE(92,ae,2,2,"mat-option",25),e.k0s(),e.nrm(93,"mat-validation-message",22),e.k0s()(),e.j41(94,"div",34)(95,"mat-form-field",19)(96,"mat-label"),e.EFF(97,"Note"),e.k0s(),e.nrm(98,"textarea",35)(99,"mat-validation-message",22),e.k0s()()()()(),e.j41(100,"div",14)(101,"div",36)(102,"h5",9),e.EFF(103,"Nozzlewise Weight Details"),e.k0s()(),e.j41(104,"div",16)(105,"div",37),e.DNE(106,re,20,4,"div",38),e.k0s()()(),e.j41(107,"div",17)(108,"div",39)(109,"div",40)(110,"table",41)(111,"thead",42)(112,"tr"),e.nrm(113,"th",43)(114,"th",44),e.j41(115,"th",45),e.EFF(116,"Nozzle(s)"),e.k0s(),e.nrm(117,"th",43)(118,"th",46),e.k0s(),e.j41(119,"tr")(120,"th",47),e.EFF(121,"Time"),e.k0s(),e.j41(122,"th",47),e.EFF(123,"Done By"),e.k0s(),e.DNE(124,se,2,1,"th",48),e.j41(125,"th",47),e.EFF(126,"Avg Weight"),e.k0s(),e.j41(127,"th",47),e.EFF(128,"Action"),e.k0s()()(),e.j41(129,"tbody"),e.DNE(130,he,12,7,"tr",49),e.k0s()()()()(),e.j41(131,"div",17)(132,"div",50)(133,"button",51),e.EFF(134,"Save"),e.k0s()()()()()()()}if(2&o){const n=e.sdS(25),l=e.sdS(34);e.R7$(9),e.Y8G("ngIf",i.IsViewPermission),e.R7$(),e.Y8G("formGroup",i.WeightCheckForm),e.R7$(12),e.Y8G("matDatepicker",n)("max",i.getToday()),e.R7$(),e.Y8G("for",n),e.R7$(3),e.Y8G("control",i.WeightCheckForm.controls.StartDateTime)("message","Start Date Time")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("matDatepicker",l)("min",i.WeightCheckForm.controls.StartDateTime),e.R7$(),e.Y8G("for",l),e.R7$(3),e.Y8G("control",i.WeightCheckForm.controls.EndDateTime)("message","End Date Time")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",i.shiftList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.ShiftId)("message","Shift")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("disabled",i.isEditMode),e.R7$(),e.Y8G("ngForOf",i.productionOrderList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.SAPProductionOrderId)("message","SAP Production Order")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("disabled",i.isEditMode),e.R7$(),e.Y8G("ngForOf",i.productList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.ProductId)("message","Product")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.BottleDateCode)("message","Bottle Date Code")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.PackSize)("message","Pack Size")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.StandardWeight)("message","Standard Weight")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.MinWeightRange)("message","Min Weight Range")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.MaxWeightRange)("message","Max Weight Range")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",i.usersList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.QAUserId)("message","QA User")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.Note)("message","Note")("formSubmitted",i.isFormSubmitted),e.R7$(7),e.Y8G("ngForOf",null==i.WeightCheckDetails?null:i.WeightCheckDetails.controls),e.R7$(9),e.BMQ("colspan",i.NozzleList.length),e.R7$(9),e.Y8G("ngForOf",i.NozzleList),e.R7$(6),e.Y8G("ngForOf",i.AddedWeightCheckDetailsList)}},dependencies:[p.Sq,p.bT,h.qT,h.me,h.Q0,h.BC,h.cb,h.VZ,h.j4,h.JD,h.$R,h.v8,v.It,v.$z,v.iY,_.rl,_.nJ,_.yw,X.fg,j.An,Q.VO,K.wT,I.Vh,I.bZ,I.bU,J.T,Z.r,y.zk,y.v2,p.QX],styles:[".card[_ngcontent-%COMP%]{margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.full-width[_ngcontent-%COMP%]{width:100%}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}.card-header[_ngcontent-%COMP%]{background-color:#17bb58!important;border-bottom:1px solid rgb(23,187,88)!important;padding:.75rem 1.25rem;color:#fff}.back-Green[_ngcontent-%COMP%]{background-color:#17bb58!important;color:#fff!important}.icon-green[_ngcontent-%COMP%]{color:green}  .ngx-datatable.material .datatable-body .progress-linear .container{background-color:#90ee90}  .ngx-datatable.material .datatable-body .progress-linear .container .bar{background-color:green}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return a})();r(9239);var R=r(6441);const me=[{path:"",component:W,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:P,canActivate:[R.L],data:{permission:"Weight Check (PER_WEIGHTCHECK) - View"}},{path:"add",canActivate:[R.L],data:{permission:"Weight Check (PER_WEIGHTCHECK) - Add"},component:T},{path:"edit/:id",canActivate:[R.L],data:{permission:"Weight Check (PER_WEIGHTCHECK) - Edit"},component:T}]}];let ge=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({imports:[f.iI.forChild(me),f.iI]})}return a})();var ue=r(1774),pe=r(9830);let fe=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({providers:[F.Q,(0,pe._c)()],imports:[p.MD,ge,ue.Gg,y.c9]})}return a})()}}]);