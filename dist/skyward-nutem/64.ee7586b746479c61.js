"use strict";(self.webpackChunkskyward_nutem=self.webpackChunkskyward_nutem||[]).push([[64],{2064:(Ie,k,n)=>{n.r(k),n.d(k,{UserModule:()=>Pe});var p=n(1774),T=n(9830),g=n(8498),r=n(4434),c=n(9417),E=n(775),e=n(4438);let _=(()=>{class a extends r.QP{constructor(t){super(t,"user"),this._baseService=t}getReportsToUsers(t,s){return this._baseService.get(`${r.T6.account}/gettownusers/${t}/${s}`)}getUsers(t,s){return this._baseService.get(`${r.T6.user}/paged?pageIndex=${t}&pageSize=${s}`)}assignRole(t,s){return this._baseService.post(`${r.T6.user}/${t}/assign-role?role=${s}`,{})}removeRole(t,s){return this._baseService.post(`${r.T6.user}/${t}/remove-role?role=${s}`,{})}getRoles(t){return this._baseService.get(`${r.T6.user}/${t}/roles`)}static#e=this.\u0275fac=function(s){return new(s||a)(e.KVO(r.dD))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})();var y=n(2558),U=n(5794),u=n(177),h=n(8834),f=n(2102),M=n(9631),D=n(9213),S=n(2798),C=n(6600),R=n(220),L=n(8777),A=n(7371),N=n(1331),$=n(7133);function G(a,d){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"a",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(2," View List "),e.k0s()()}}function B(a,d){1&a&&(e.j41(0,"div"),e.EFF(1," Minimum 10 Characters Required "),e.k0s())}function O(a,d){if(1&a&&(e.j41(0,"div",27),e.DNE(1,B,2,0,"div",28),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.frmUser.controls.phoneNumber.errors.minlength)}}function V(a,d){if(1&a&&(e.j41(0,"mat-option",29),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}let P=(()=>{class a{constructor(t,s,i,o,l,m,b){this.activatedRoute=t,this.router=s,this.formBuilder=i,this.userService=o,this.roleService=l,this.notificationService=m,this.listService=b,this.reportsToData=[],this.roleData=[],this.hidePassword=!0,this.hideConfirmPassword=!0,this.page=r.Wt.user,this.permissions=r.eZ,this.createForm()}ngOnInit(){this.getUserRoute(),this.getRoleData()}getUserRoute(){this.routerSub=this.activatedRoute.params.subscribe(t=>{console.log("Edit params ",t),this.isEditMode=!r.ov.isEmpty(t.id),this.createForm(),this.isEditMode?(this.userId=t.id,this.getUserDetails()):(this.userData=new E.KJ,this.getRoleData())})}getUserDetails(){console.log("user id ",this.userId),this.userService.getById(this.userId).subscribe(t=>{this.userData=t,this.setUserData(),this.getRoleData(),this.getUserRoles()},t=>{console.log(t)})}getUserRoles(){this.userService.getRoles(this.userId).subscribe(t=>{this.frmUser.controls.role.setValue(t[0]||"")},t=>{console.log(t)})}getRoleData(){this.roleService.getRole().subscribe(t=>{this.roleData=t,console.log("ROLE:",this.roleData),this.createRolesControl()},t=>{console.log(t)})}getReportsToData(){r.ov.isNotNull(this.userId),this.userService.get().subscribe(s=>{this.reportsToData=s,this.createReportsToControl()})}setUserData(){this.frmUser.patchValue(this.userData),this.frmUser.controls.password.setValue("********"),this.frmUser.controls.confirmPassword.setValue("********")}createForm(){this.frmUser=this.formBuilder.group({userName:[{value:"",disabled:this.isEditMode},[c.k0.required,c.k0.maxLength(50)]],password:[{value:"",disabled:this.isEditMode},[c.k0.required,c.k0.min(6),c.k0.maxLength(20),p.Bm.passwordValidator]],confirmPassword:[{value:"",disabled:this.isEditMode},[c.k0.required,p.Bm.comparePassword]],email:["",[c.k0.required,p.Bm.emailValidator,p.Bm.multipleemailrestrictValidator,c.k0.maxLength(50)]],phoneNumber:["",[c.k0.maxLength(15)]],role:["",[c.k0.required]]})}createReportsToControl(){const t=this.frmUser.controls.reportsTo;t.controls=[],this.reportsToData.forEach(s=>{t.push(new c.hs((this.userData.reportsTo||[]).some(i=>i.reportToId===s.id)))})}createRolesControl(){}createUser(){let t=Object.assign({},this.frmUser.value);this.userService.add(t).subscribe(s=>{if(s){this.userId=s.id;const i=this.frmUser.get("role").value;i&&this.assignRoleToUser(this.userId,i),this.notificationService.success("User saved successfully."),this.cancel()}else this.notificationService.warning(s.message)},s=>{this.error=400===s.status&&s.error.modelState?s.error.modelState[""][0]:"Something went wrong"})}updateUser(){this.userData=Object.assign(this.userData,this.frmUser.value),this.userService.update(this.userData.id,this.userData).subscribe(s=>{s.isSuccess?(this.cancel(),this.notificationService.success("User updated successfully."),this.router.navigate(["../..","list"],{relativeTo:this.activatedRoute})):this.notificationService.warning(s.message)},s=>{this.error=400===s.status&&s.error.modelState?s.error.modelState[""][0]:"Something went wrong"})}save(){if(this.isFormSubmitted=!0,this.frmUser.invalid)return;this.isEditMode?this.updateUser():this.createUser();const t=this.frmUser.get("role").value;t&&this.handleRoleAssignment(t)}handleRoleAssignment(t){this.isEditMode?this.userService.getRoles(this.userId).subscribe(s=>{const i=s[0];i&&i!==t?this.userService.removeRole(this.userId,i).subscribe(()=>{this.assignRoleToUser(this.userId,t)},o=>{this.notificationService.error(`Failed to remove old role: ${o.message}`)}):this.assignRoleToUser(this.userId,t)},s=>{this.notificationService.error(`Failed to get current roles: ${s.message}`)}):this.assignRoleToUser(this.userId,t)}assignRoleToUser(t,s){this.userService.assignRole(t,s).subscribe(i=>{this.notificationService.success(`Role '${s}' assigned successfully to user.`)},i=>{this.notificationService.error(`Failed to assign role: ${i.message}`)})}setValidators(){r.ov.getSelectedCheckboxList(this.frmUser.value.roles,this.roleData).some(s=>"Super Admin"===s.name)?this.frmUser.controls.parkingAuthorityId.setValidators([]):this.frmUser.controls.parkingAuthorityId.setValidators([c.k0.required]),this.frmUser.controls.parkingAuthorityId.updateValueAndValidity()}keyDownHandler(t){"Space"===t.code&&t.preventDefault()}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||a)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(c.ze),e.rXU(_),e.rXU(y.W),e.rXU(U.tw),e.rXU(r.aG))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],decls:69,vars:28,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-2","d-flex","justify-content-end","rightSideHeader","mb10"],[4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-md-6"],["type","text","matInput","","formControlName","userName","space-restrict","",3,"keydown"],[3,"control","message","formSubmitted"],["matInput","","formControlName","password","autocomplete","off",3,"keydown","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["type","text","matInput","","formControlName","email","textlower","",3,"keydown"],["matInput","","formControlName","confirmPassword","autocomplete","off",3,"keydown","type"],["type","text","mask","(000) 000-0000","matInput","","formControlName","phoneNumber","autocomplete","nope",3,"dropSpecialCharacters"],["class","custom-validation",4,"ngIf"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"col-md-8","text-right"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["type","button","mat-flat-button","","color","primary",1,"app-button",3,"click"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[1,"custom-validation"],[4,"ngIf"],[3,"value"]],template:function(s,i){if(1&s){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),e.EFF(6,"User Details"),e.k0s()(),e.j41(7,"div",7),e.DNE(8,G,3,0,"div",8),e.k0s()(),e.j41(9,"div")(10,"form",9,0),e.bIt("submit",function(){return e.eBV(o),e.Njj(i.save())}),e.j41(12,"div",10)(13,"div",11)(14,"mat-form-field")(15,"mat-label"),e.EFF(16,"Username"),e.k0s(),e.j41(17,"input",12),e.bIt("keydown",function(m){return e.eBV(o),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.nrm(18,"mat-validation-message",13),e.k0s()(),e.j41(19,"div",11)(20,"mat-form-field")(21,"mat-label"),e.EFF(22,"Password"),e.k0s(),e.j41(23,"input",14),e.bIt("keydown",function(m){return e.eBV(o),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.j41(24,"button",15),e.bIt("click",function(){return e.eBV(o),e.Njj(i.hidePassword=!i.hidePassword)}),e.j41(25,"mat-icon"),e.EFF(26),e.k0s()(),e.nrm(27,"mat-validation-message",13),e.k0s()()(),e.j41(28,"div",10)(29,"div",11)(30,"mat-form-field")(31,"mat-label"),e.EFF(32,"Email"),e.k0s(),e.j41(33,"input",16),e.bIt("keydown",function(m){return e.eBV(o),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.nrm(34,"mat-validation-message",13),e.k0s()(),e.j41(35,"div",11)(36,"mat-form-field")(37,"mat-label"),e.EFF(38,"Confirm Password"),e.k0s(),e.j41(39,"input",17),e.bIt("keydown",function(m){return e.eBV(o),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.j41(40,"button",15),e.bIt("click",function(){return e.eBV(o),e.Njj(i.hideConfirmPassword=!i.hideConfirmPassword)}),e.j41(41,"mat-icon"),e.EFF(42),e.k0s()(),e.nrm(43,"mat-validation-message",13),e.k0s()()(),e.j41(44,"div",10)(45,"div",11)(46,"mat-form-field")(47,"mat-label"),e.EFF(48,"Phone Number"),e.k0s(),e.nrm(49,"input",18),e.DNE(50,O,2,1,"div",19),e.k0s()()(),e.j41(51,"div",10)(52,"div",11)(53,"mat-form-field")(54,"mat-label"),e.EFF(55,"Role"),e.k0s(),e.j41(56,"mat-select",20),e.DNE(57,V,2,2,"mat-option",21),e.k0s(),e.nrm(58,"mat-validation-message",13),e.k0s()()(),e.j41(59,"div",10)(60,"div",22),e.EFF(61," \xa0 "),e.k0s()(),e.j41(62,"div",10)(63,"div",23)(64,"button",24),e.EFF(65,"Save "),e.k0s(),e.EFF(66,"\xa0\xa0 "),e.j41(67,"button",25),e.bIt("click",function(){return e.eBV(o),e.Njj(i.cancel())}),e.EFF(68,"Cancel "),e.k0s()()()()()()()()}2&s&&(e.R7$(8),e.Y8G("authPermission",i.page+"_"+i.permissions.list),e.R7$(2),e.Y8G("formGroup",i.frmUser),e.R7$(8),e.Y8G("control",i.frmUser.controls.userName)("message","Username")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("type",i.hidePassword||i.isEditMode?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password")("aria-pressed",i.hidePassword),e.R7$(2),e.JRh(i.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("control",i.frmUser.controls.password)("message","Password")("formSubmitted",i.isFormSubmitted),e.R7$(7),e.Y8G("control",i.frmUser.controls.email)("message","Email")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("type",i.hideConfirmPassword||i.isEditMode?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide confirm password")("aria-pressed",i.hideConfirmPassword),e.R7$(2),e.JRh(i.hideConfirmPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("control",i.frmUser.controls.confirmPassword)("message","Confirm Password")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("dropSpecialCharacters",!1),e.R7$(),e.Y8G("ngIf",i.frmUser.controls.phoneNumber.errors),e.R7$(7),e.Y8G("ngForOf",i.roleData),e.R7$(),e.Y8G("control",i.frmUser.controls.role)("message","Role")("formSubmitted",i.isFormSubmitted))},dependencies:[u.Sq,u.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,h.It,h.$z,h.iY,f.rl,f.nJ,f.yw,M.fg,D.An,S.VO,C.wT,T.Zr,R.B,L.T,A.X,N.U,$.r],encapsulation:2})}return a})();var I=n(3380),Y=n(932),X=n(1413),H=n(2771),x=n(4823);function Q(a,d){if(1&a&&(e.j41(0,"mat-option",16),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function J(a,d){if(1&a){const t=e.RV6();e.j41(0,"mat-form-field",13)(1,"mat-select",15),e.bIt("selectionChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o._changePageSize(i.value))}),e.Z7z(2,Q,2,2,"mat-option",16,e.fX1),e.k0s()()}if(2&a){const t=e.XpG(2);e.Y8G("appearance",t._formFieldAppearance)("color",t.color),e.R7$(),e.Y8G("value",t.pageSize)("disabled",t.disabled)("aria-labelledby",t._pageSizeLabelId)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),e.R7$(),e.Dyx(t._displayedPageSizeOptions)}}function W(a,d){if(1&a&&(e.j41(0,"div",14),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.JRh(t.pageSize)}}function Z(a,d){if(1&a&&(e.j41(0,"div",2)(1,"div",12),e.EFF(2),e.k0s(),e.DNE(3,J,4,7,"mat-form-field",13)(4,W,2,1,"div",14),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.BMQ("id",t._pageSizeLabelId),e.R7$(),e.SpI(" ",t._intl.itemsPerPageLabel," "),e.R7$(),e.vxM(3,t._displayedPageSizeOptions.length>1?3:-1),e.R7$(),e.vxM(4,t._displayedPageSizeOptions.length<=1?4:-1)}}function K(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.firstPage())}),e.qSk(),e.j41(1,"svg",7),e.nrm(2,"path",18),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),e.BMQ("aria-label",t._intl.firstPageLabel)}}function q(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.lastPage())}),e.qSk(),e.j41(1,"svg",7),e.nrm(2,"path",20),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),e.BMQ("aria-label",t._intl.lastPageLabel)}}let v=(()=>{class a{constructor(){this.changes=new X.B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,s,i)=>{if(0==i||0==s)return`0 of ${i}`;const o=t*s;return`${o+1} \u2013 ${o<(i=Math.max(i,0))?Math.min(o+s,i):o+s} of ${i}`}}static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const te={provide:v,deps:[[new e.Xx1,new e.kdw,v]],useFactory:function ee(a){return a||new v}},ae=new e.nKC("MAT_PAGINATOR_DEFAULT_OPTIONS");let se=0,j=(()=>{class a{get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(t||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=t||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(t||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(s=>(0,e.Udg)(s,0)),this._updateDisplayedPageSizeOptions()}constructor(t,s,i){if(this._intl=t,this._changeDetectorRef=s,this._pageSizeLabelId="mat-paginator-page-size-label-"+se++,this._isInitialized=!1,this._initializedStream=new H.m(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new e.bkB,this.initialized=this._initializedStream,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){const{pageSize:o,pageSizeOptions:l,hidePageSize:m,showFirstLastButtons:b}=i;null!=o&&(this._pageSize=o),null!=l&&(this._pageSizeOptions=l),null!=m&&(this.hidePageSize=m),null!=b&&(this.showFirstLastButtons=b)}this._formFieldAppearance=i?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const i=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,s)=>t-s),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static#e=this.\u0275fac=function(s){return new(s||a)(e.rXU(v),e.rXU(e.gRc),e.rXU(ae,8))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[e.Mj6.HasDecoratorInputTransform,"pageIndex","pageIndex",e.Udg],length:[e.Mj6.HasDecoratorInputTransform,"length","length",e.Udg],pageSize:[e.Mj6.HasDecoratorInputTransform,"pageSize","pageSize",e.Udg],pageSizeOptions:"pageSizeOptions",hidePageSize:[e.Mj6.HasDecoratorInputTransform,"hidePageSize","hidePageSize",e.L39],showFirstLastButtons:[e.Mj6.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",e.L39],selectConfig:"selectConfig",disabled:[e.Mj6.HasDecoratorInputTransform,"disabled","disabled",e.L39]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[e.GFd,e.aNF],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Z,5,4,"div",2),e.j41(3,"div",3)(4,"div",4),e.EFF(5),e.k0s(),e.DNE(6,K,3,5,"button",5),e.j41(7,"button",6),e.bIt("click",function(){return i.previousPage()}),e.qSk(),e.j41(8,"svg",7),e.nrm(9,"path",8),e.k0s()(),e.joV(),e.j41(10,"button",9),e.bIt("click",function(){return i.nextPage()}),e.qSk(),e.j41(11,"svg",7),e.nrm(12,"path",10),e.k0s()(),e.DNE(13,q,3,5,"button",11),e.k0s()()()),2&s&&(e.R7$(2),e.vxM(2,i.hidePageSize?-1:2),e.R7$(3),e.SpI(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),e.R7$(),e.vxM(6,i.showFirstLastButtons?6:-1),e.R7$(),e.Y8G("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),e.BMQ("aria-label",i._intl.previousPageLabel),e.R7$(3),e.Y8G("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),e.BMQ("aria-label",i._intl.nextPageLabel),e.R7$(3),e.vxM(13,i.showFirstLastButtons?13:-1))},dependencies:[f.rl,S.VO,C.wT,h.iY,x.oV],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return a})(),oe=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({providers:[te],imports:[h.Hl,S.Ve,x.uc,j]})}return a})();var ne=n(9239);let w=(()=>{class a{constructor(){this.searchChanged=new e.bkB,this.searchData=[],this.searchKey="userName,firstName,lastNumber,email,phoneNumber,parkingAuthorityName"}updateSearchTerms(t,s){this.searchData.isActive=this.searchInactive.searchBox.value,this.searchData[t]=s,console.log("search data for inactive",this.searchData),this.searchChanged.emit(this.searchData)}static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["user-search-panel"]],viewQuery:function(s,i){if(1&s&&e.GBs(p.$A,5),2&s){let o;e.mGM(o=e.lsd())&&(i.searchInactive=o.first)}},outputs:{searchChanged:"searchChanged"},decls:3,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"search-text",2),e.bIt("textSearchEntered",function(l){return i.updateSearchTerms(i.searchKey,l)}),e.k0s()()()),2&s&&(e.R7$(2),e.Y8G("placeHolder","Search User"))},dependencies:[ne.D],encapsulation:2})}return a})();var re=n(6081);const le=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),ce=()=>["../","add"],de=a=>["../","edit",a];function me(a,d){1&a&&(e.j41(0,"a",19)(1,"span"),e.EFF(2,"Add New"),e.k0s(),e.nrm(3,"i",20),e.k0s()),2&a&&e.Y8G("routerLink",e.lJ4(1,ce))}function pe(a,d){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=d.value;e.R7$(),e.JRh(e.i5U(2,1,t,"MM/dd/yyyy hh:mm a"))}}function ge(a,d){if(1&a&&(e.j41(0,"a",23)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()),2&a){const t=e.XpG().row;e.Y8G("routerLink",e.eq3(1,de,t.id))}}function he(a,d){if(1&a){const t=e.RV6();e.j41(0,"a",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).row,o=e.XpG();return e.Njj(o.toggleActivate(i.id,!1))}),e.j41(1,"mat-icon"),e.EFF(2,"lock"),e.k0s()()}}function ue(a,d){if(1&a){const t=e.RV6();e.j41(0,"a",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).row,o=e.XpG();return e.Njj(o.toggleActivate(i.id,!0))}),e.j41(1,"mat-icon"),e.EFF(2,"lock_open"),e.k0s()()}}function fe(a,d){if(1&a&&(e.qex(0,24),e.DNE(1,he,3,0,"a",25)(2,ue,3,0,"a",26),e.bVm()),2&a){const t=e.XpG().row;e.R7$(),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive)}}function ve(a,d){if(1&a&&e.DNE(0,ge,3,3,"a",21)(1,fe,3,2,"ng-container",22),2&a){const t=e.XpG();e.Y8G("authPermission",t.page+"_"+t.permissions.edit),e.R7$(),e.Y8G("authPermission",t.page+"_"+t.permissions.active)}}let F=(()=>{class a{constructor(t,s){this.userService=t,this.notificationService=s,this.userData=[],this.page=r.Wt.user,this.permissions=r.eZ,this.searchData={isActive:!1},this.pageIndex=1,this.pageSize=10,this.totalItems=0}ngOnInit(){this.getUserData()}getUserData(){this.loading=!0,this.userService.getUsers(this.pageIndex,this.pageSize).subscribe(t=>{this.loading=!1,this.userData=t.items,this.totalItems=t.totalCount},t=>{this.loading=!1,console.log(t)})}onPageChange(t){this.pageIndex=t.pageIndex+1,this.getUserData()}getRoles(t){return t.map(s=>s.roleName).join(", ")}updateSearch(t){this.searchData={...t},console.log("search",t)}isActiveRow(t){return{"text-danger":!t.isActive}}toggleActivate(t,s){confirm(`Are you sure you want to ${s?"Activate":"Deactivate"} ?`)&&this.userService.toggleActivate(t,s).subscribe(o=>{o.isSuccess?this.getUserData():this.notificationService.warning(o.message)},o=>{this.notificationService.error("Something went wrong.")})}static#e=this.\u0275fac=function(s){return new(s||a)(e.rXU(_),e.rXU(U.tw))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],decls:23,vars:18,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","User Name","prop","userName"],["name","Email","prop","email"],["name","Phone Number","prop","phoneNumber"],["name","Registered On","prop","createdDate"],["ngx-datatable-cell-template",""],["name","Actions"],[3,"page","pageSize","pageIndex","length"],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["title","Edit","class","button-padding",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["title","Edit",1,"button-padding",3,"routerLink"],[1,"ml-10"],["href","#","title","Make Inactive","class","button-padding",3,"click",4,"ngIf"],["href","#","title","Make Active","class","button-padding",3,"click",4,"ngIf"],["href","#","title","Make Inactive",1,"button-padding",3,"click"],["href","#","title","Make Active",1,"button-padding",3,"click"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e.EFF(6,"User List"),e.k0s()(),e.j41(7,"div",6)(8,"div"),e.DNE(9,me,4,2,"a",7),e.k0s()()(),e.j41(10,"div",8)(11,"div",9)(12,"user-search-panel",10),e.bIt("searchChanged",function(l){return i.updateSearch(l)}),e.k0s(),e.j41(13,"ngx-datatable",11),e.nI1(14,"searchtable"),e.nrm(15,"ngx-datatable-column",12)(16,"ngx-datatable-column",13)(17,"ngx-datatable-column",14),e.j41(18,"ngx-datatable-column",15),e.DNE(19,pe,3,4,"ng-template",16),e.k0s(),e.j41(20,"ngx-datatable-column",17),e.DNE(21,ve,2,2,"ng-template",16),e.k0s()(),e.j41(22,"mat-paginator",18),e.bIt("page",function(l){return i.onPageChange(l)}),e.k0s()()()()()()),2&s&&(e.R7$(9),e.Y8G("authPermission",i.page+"_"+i.permissions.create),e.R7$(4),e.Y8G("rows",e.i5U(14,14,i.userData,i.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",i.pageSize)("loadingIndicator",i.loading)("scrollbarH",!0)("rowClass",i.isActiveRow)("messages",e.lJ4(17,le)),e.R7$(9),e.Y8G("pageSize",i.pageSize)("pageIndex",i.pageIndex-1)("length",i.totalItems))},dependencies:[u.bT,h.It,D.An,g.Wk,I.ge,I.ed,I.QI,Y.a,R.B,j,w,u.vh,re.j],encapsulation:2})}return a})();const be=[{path:"",component:(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],decls:1,vars:0,template:function(s,i){1&s&&e.nrm(0,"router-outlet")},dependencies:[g.n3],encapsulation:2})}return a})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[r.LL],component:F,data:{page:r.Wt.user,action:r.eZ.list,title:"User"}},{path:"add",canActivate:[r.LL],data:{page:r.Wt.user,action:r.eZ.create,title:"User"},component:P},{path:"edit/:id",canActivate:[r.LL],data:{page:r.Wt.user,action:r.eZ.edit,title:"User"},component:P}]}];let _e=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({imports:[g.iI.forChild(be),g.iI]})}return a})();var Se=n(9159);let Pe=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({providers:[_,y.W,(0,T._c)()],imports:[p.Gg,_e,Se.tP,oe]})}return a})()}}]);