"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[234],{92234:(Q,u,i)=>{i.r(u),i.d(u,{InventoryTypeModule:()=>z});var S=i(71774),m=i(18498),e=i(54438);let T=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,a){1&o&&e.nrm(0,"router-outlet")},dependencies:[m.n3],encapsulation:2})}return n})();var c=i(89417),s=i(4434),y=i(77048),g=i(45794),f=i(60177),d=i(88834),_=i(82765),I=i(32102),E=i(99631),A=i(82798),x=i(86600),b=i(5951),C=i(30220),R=i(58777),w=i(67133);function N(n,l){if(1&n){const t=e.RV6();e.j41(0,"a",30),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.cancel())}),e.EFF(1," View List "),e.k0s()}}function D(n,l){if(1&n&&(e.j41(0,"mat-option",22),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}let v=(()=>{class n{constructor(t,o,a,r,p,K){this.activatedRoute=t,this.router=o,this.formBuilder=a,this.inventoryTypeService=r,this.notificationService=p,this.listService=K,this.page=s.Wt.inventoryType,this.permissions=s.eZ,this.applicableToOptions=[{id:1,name:"Customer"},{id:2,name:"Vendor"},{id:3,name:"Warehouse"}],this.createForm()}ngOnInit(){this.getInventoryTypeRoute()}getInventoryTypeRoute(){this.routerSub=this.activatedRoute.params.subscribe(t=>{this.isEditMode=!s.ov.isEmpty(t.id),this.createForm(),this.isEditMode?(this.inventoryTypeId=+t.id,this.getInventoryTypeDetails()):this.generateInventoryTypeCode()})}generateInventoryTypeCode(){this.inventoryTypeService.generateInventoryTypeCode().subscribe(t=>{this.frmInventoryType.patchValue({inventoryTypeCode:t})},t=>{console.log(t)})}getInventoryTypeDetails(){this.inventoryTypeService.getById(this.inventoryTypeId).subscribe(t=>{this.inventoryTypeData=t,this.setInventoryTypeData()},t=>{console.log(t)})}setInventoryTypeData(){this.frmInventoryType.patchValue(this.inventoryTypeData)}createForm(){this.frmInventoryType=this.formBuilder.group({inventoryTypeCode:[{value:"",disabled:!0},[c.k0.required,c.k0.maxLength(32)]],inventoryTypeName:["",[c.k0.required,c.k0.maxLength(255)]],isInward:[!0,c.k0.required],applicableToId:[null,c.k0.required],isSales:[!1],isPurchase:[!1],isReserve:[!1],isAdmin:[!1]})}createInventoryType(){let t=this.frmInventoryType.getRawValue();this.inventoryTypeService.add(t).subscribe(o=>{this.cancel(),this.notificationService.success("Inventory Type saved successfully.")},o=>{this.error=o})}updateInventoryType(){let t=this.frmInventoryType.getRawValue();this.inventoryTypeData=Object.assign(this.inventoryTypeData,this.inventoryTypeData,t),this.inventoryTypeService.update(this.inventoryTypeData.id,this.inventoryTypeData).subscribe(o=>{this.cancel(),this.notificationService.success("Inventory Type updated successfully.")},o=>{this.error=o})}save(){if(this.isFormSubmitted=!0,this.frmInventoryType.invalid)return;let t=this.frmInventoryType.getRawValue();!t||t.isPurchase||t.isSales||t.isReserve||t.isAdmin?this.isEditMode?this.updateInventoryType():this.createInventoryType():this.notificationService.warning("Please select at least one transaction to be considered as checkbox.")}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(m.nX),e.rXU(m.Ix),e.rXU(c.ze),e.rXU(y.C),e.rXU(g.tw),e.rXU(s.aG))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],decls:71,vars:17,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-6"],["type","text","matInput","","formControlName","inventoryTypeCode"],[3,"control","message","formSubmitted"],["type","text","matInput","","formControlName","inventoryTypeName"],["formControlName","applicableToId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","isInward"],[3,"value"],[1,"col-md-3"],["formControlName","isSales"],["formControlName","isPurchase"],["formControlName","isReserve"],["formControlName","isAdmin"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"]],template:function(o,a){if(1&o){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),e.nrm(6,"i",7),e.EFF(7," Add/Edit Inventory Type"),e.k0s()(),e.j41(8,"div",8),e.DNE(9,N,2,0,"a",9),e.k0s()(),e.j41(10,"div")(11,"form",10,0),e.bIt("submit",function(){return e.eBV(r),e.Njj(a.save())}),e.j41(13,"div",11)(14,"div",12)(15,"h5",6),e.EFF(16,"Basic Details"),e.k0s()(),e.j41(17,"div",13)(18,"div",14)(19,"div",15)(20,"mat-form-field")(21,"mat-label"),e.EFF(22,"Inventory Type Code"),e.k0s(),e.nrm(23,"input",16)(24,"mat-validation-message",17),e.k0s()(),e.j41(25,"div",15)(26,"mat-form-field")(27,"mat-label"),e.EFF(28,"Inventory Type Name"),e.k0s(),e.nrm(29,"input",18)(30,"mat-validation-message",17),e.k0s()()(),e.j41(31,"div",14)(32,"div",15)(33,"mat-form-field")(34,"mat-label"),e.EFF(35,"Applicable To"),e.k0s(),e.j41(36,"mat-select",19),e.DNE(37,D,2,2,"mat-option",20),e.k0s(),e.nrm(38,"mat-validation-message",17),e.k0s()(),e.j41(39,"div",15)(40,"mat-label"),e.EFF(41,"Type\xa0"),e.k0s(),e.j41(42,"mat-radio-group",21)(43,"mat-radio-button",22),e.EFF(44,"Inward"),e.k0s(),e.EFF(45,"\xa0 "),e.j41(46,"mat-radio-button",22),e.EFF(47,"Outward"),e.k0s()(),e.nrm(48,"mat-validation-message",17),e.k0s()()()(),e.j41(49,"div",11)(50,"div",12)(51,"h5",6),e.EFF(52,"Transaction To Be Considered As:"),e.k0s()(),e.j41(53,"div",13)(54,"div",14)(55,"div",23)(56,"mat-checkbox",24),e.EFF(57,"Sales"),e.k0s()(),e.j41(58,"div",23)(59,"mat-checkbox",25),e.EFF(60,"Purchase"),e.k0s()(),e.j41(61,"div",23)(62,"mat-checkbox",26),e.EFF(63,"Reserve"),e.k0s()(),e.j41(64,"div",23)(65,"mat-checkbox",27),e.EFF(66,"Admin"),e.k0s()()()()(),e.j41(67,"div",14)(68,"div",28)(69,"button",29),e.EFF(70," Save "),e.k0s()()()()()()()()}2&o&&(e.R7$(9),e.Y8G("authPermission",a.page+"_"+a.permissions.list),e.R7$(2),e.Y8G("formGroup",a.frmInventoryType),e.R7$(13),e.Y8G("control",a.frmInventoryType.controls.inventoryTypeCode)("message","Inventory Type Code")("formSubmitted",a.isFormSubmitted),e.R7$(6),e.Y8G("control",a.frmInventoryType.controls.inventoryTypeName)("message","Inventory Type Name")("formSubmitted",a.isFormSubmitted),e.R7$(7),e.Y8G("ngForOf",a.applicableToOptions),e.R7$(),e.Y8G("control",a.frmInventoryType.controls.applicableToId)("message","Applicable To")("formSubmitted",a.isFormSubmitted),e.R7$(5),e.Y8G("value",!0),e.R7$(3),e.Y8G("value",!1),e.R7$(2),e.Y8G("control",a.frmInventoryType.controls.isInward)("message","Is Inward")("formSubmitted",a.isFormSubmitted))},dependencies:[f.Sq,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,d.It,d.$z,_.So,I.rl,I.nJ,E.fg,A.VO,x.wT,b.VT,b._g,C.B,R.T,w.r],styles:[".card[_ngcontent-%COMP%]{margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:.75rem 1.25rem}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.mat-icon[_ngcontent-%COMP%]{vertical-align:middle}"]})}return n})();var F=i(62288),G=i(99213),h=i(33380),L=i(49239),P=i(74193);let k=(()=>{class n{constructor(){this.searchChanged=new e.bkB,this.searchData={},this.searchKey="inventoryTypeCode,inventoryTypeName,applicableToName,inwardType,sales,purchase,reserve,admin"}updateSearchTerms(t,o){this.searchData[t]=o,this.searchChanged.emit(this.searchData)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["inventory-type-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"search-text",2),e.bIt("textSearchEntered",function(p){return a.updateSearchTerms(a.searchKey,p)}),e.k0s()(),e.j41(3,"div",3)(4,"search-inactive",4),e.bIt("chkChanged",function(p){return a.updateSearchTerms("isActive",p)}),e.k0s()()()),2&o&&(e.R7$(2),e.Y8G("placeHolder","Search Inventory Type Code, Inventory Type Name, Applicable To, Inward Type, Sales, Purchase, Reserve and Admin"))},dependencies:[L.D,P.$],encapsulation:2})}return n})();var $=i(96081);const V=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),Y=()=>["../","add"],B=n=>["..","edit",n];function X(n,l){1&n&&(e.j41(0,"a",27)(1,"span"),e.EFF(2,"Add New"),e.k0s(),e.nrm(3,"i",28),e.k0s()),2&n&&e.Y8G("routerLink",e.lJ4(1,Y))}function M(n,l){if(1&n&&(e.j41(0,"a",31)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()),2&n){const t=e.XpG().row;e.Y8G("routerLink",e.eq3(1,B,t.id))}}function O(n,l){if(1&n){const t=e.RV6();e.j41(0,"a",34),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2).row,r=e.XpG();return e.Njj(r.toggleActivateInventoryType(a,!1))}),e.j41(1,"mat-icon"),e.EFF(2,"lock"),e.k0s()()}}function U(n,l){if(1&n){const t=e.RV6();e.j41(0,"a",34),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2).row,r=e.XpG();return e.Njj(r.toggleActivateInventoryType(a,!0))}),e.j41(1,"mat-icon"),e.EFF(2,"lock_open"),e.k0s()()}}function H(n,l){if(1&n&&(e.qex(0,32),e.DNE(1,O,3,0,"a",33)(2,U,3,0,"a",33),e.bVm()),2&n){const t=e.XpG().row;e.R7$(),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive)}}function W(n,l){if(1&n&&e.DNE(0,M,3,3,"a",29)(1,H,3,2,"ng-container",30),2&n){const t=e.XpG();e.Y8G("authPermission",t.page+"_"+t.permissions.edit),e.R7$(),e.Y8G("authPermission",t.page+"_"+t.permissions.active)}}const Z=[{path:"",component:T,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(t,o){this.inventoryTypeService=t,this.toastr=o,this.inventoryTypeData=[],this.page=s.Wt.inventoryType,this.permissions=s.eZ,this.searchData={isActive:!1},this.loading=!1,this.totalCount=0,this.currentPage=1}ngOnInit(){this.loadInventoryTypes()}loadInventoryTypes(t=1){this.loading=!0,this.inventoryTypeService.get().subscribe(o=>{this.inventoryTypeData=o,this.totalCount=o.length,this.loading=!1},o=>{this.toastr.error(o.message,"Error"),this.loading=!1})}updateSearch(t){this.searchData=Object.assign({},t)}isActiveRow(t){return{"text-danger":!t.isActive}}paginate(t){this.currentPage=t.pageIndex+1,this.loadInventoryTypes(this.currentPage)}exportToExcel(){let t=this.inventoryTypeData.map(r=>({Id:r.id,"Inventory Type Code":r.inventoryTypeCode,"Inventory Type Name":r.inventoryTypeName,"Inward Type":r.inwardType,"Applicable To":r.applicableToName,Sales:r.sales,Purchase:r.purchase,Reserve:r.reserve,Admin:r.admin,Active:r.isActive?"Yes":"No"}));const a={Sheets:{data:F.Wp.json_to_sheet(t)},SheetNames:["data"]};F._h(a,"Inventory_Types.xlsx")}toggleActivateInventoryType(t,o){confirm(`Are you sure you want to ${o?"Activate":"Deactivate"} this inventory type?`)&&this.inventoryTypeService.toggleActivate(t.id,o).subscribe(()=>{this.loadInventoryTypes()},r=>{this.toastr.error("Something went wrong.")})}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(y.C),e.rXU(g.tw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],decls:30,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p-3","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row","mb-3"],[1,"col-lg-9"],[3,"searchChanged"],[1,"col-lg-3"],["mat-flat-button","","color","primary",1,"app-button",2,"float","right",3,"click"],[1,"row"],[1,"col-12"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Inventory Type Code","prop","inventoryTypeCode"],["name","Inventory Type Name","prop","inventoryTypeName"],["name","Applicable To","prop","applicableToName"],["name","Inward Type","prop","inwardType"],["name","Sales","prop","sales"],["name","Purchase","prop","purchase"],["name","Reserve","prop","reserve"],["name","Admin","prop","admin"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e.nrm(6,"i",6),e.EFF(7," Inventory Type List"),e.k0s()(),e.j41(8,"div",7),e.DNE(9,X,4,2,"a",8),e.k0s()(),e.j41(10,"div",9)(11,"div",10)(12,"inventory-type-search-panel",11),e.bIt("searchChanged",function(p){return a.updateSearch(p)}),e.k0s()(),e.j41(13,"div",12)(14,"button",13),e.bIt("click",function(){return a.exportToExcel()}),e.EFF(15," Export to Excel "),e.k0s()()(),e.j41(16,"div",14)(17,"div",15)(18,"ngx-datatable",16),e.nI1(19,"searchtable"),e.nrm(20,"ngx-datatable-column",17)(21,"ngx-datatable-column",18)(22,"ngx-datatable-column",19)(23,"ngx-datatable-column",20)(24,"ngx-datatable-column",21)(25,"ngx-datatable-column",22)(26,"ngx-datatable-column",23)(27,"ngx-datatable-column",24),e.j41(28,"ngx-datatable-column",25),e.DNE(29,W,2,2,"ng-template",26),e.k0s()()()()()()()),2&o&&(e.R7$(9),e.Y8G("authPermission",a.page+"_"+a.permissions.create),e.R7$(9),e.Y8G("rows",e.i5U(19,12,a.inventoryTypeData,a.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",a.loading)("scrollbarH",!0)("rowClass",a.isActiveRow)("messages",e.lJ4(15,V)),e.R7$(10),e.Y8G("sortable",!1))},dependencies:[f.bT,d.It,d.$z,G.An,m.Wk,h.ge,h.ed,h.QI,C.B,k,$.j],encapsulation:2})}return n})(),canActivate:[s.LL],data:{page:s.Wt.inventoryType,action:s.eZ.list,title:"Inventory Type"}},{path:"add",canActivate:[s.LL],data:{page:s.Wt.inventoryType,action:s.eZ.create,title:"Inventory Type"},component:v},{path:"edit/:id",canActivate:[s.LL],data:{page:s.Wt.inventoryType,action:s.eZ.edit,title:"Inventory Type"},component:v}]}];let J=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[m.iI.forChild(Z),m.iI]})}return n})(),z=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[y.C],imports:[S.Gg,J]})}return n})()}}]);