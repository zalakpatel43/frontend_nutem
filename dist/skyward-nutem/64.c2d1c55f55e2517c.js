"use strict";(self.webpackChunkskyward_nutem=self.webpackChunkskyward_nutem||[]).push([[64],{2064:(Ie,U,o)=>{o.r(U),o.d(U,{UserModule:()=>Se});var p=o(1774),y=o(9830),g=o(8498),r=o(9417),z=o(775),c=o(4434),e=o(4438);let _=(()=>{class a extends c.QP{constructor(t){super(t,"user"),this._baseService=t}getReportsToUsers(t,s){return this._baseService.get(`${c.T6.account}/gettownusers/${t}/${s}`)}getUsers(t,s){return this._baseService.get(`${c.T6.user}/paged?pageIndex=${t}&pageSize=${s}`)}assignRole(t,s){return this._baseService.post(`${c.T6.user}/${t}/assign-role?role=${s}`,{})}removeRole(t,s){return this._baseService.post(`${c.T6.user}/${t}/remove-role?role=${s}`,{})}getRoles(t){return this._baseService.get(`${c.T6.user}/${t}/roles`)}deleteUser(t){return this._baseService.delete(`${c.T6.UserList}/${t}`)}static#e=this.\u0275fac=function(s){return new(s||a)(e.KVO(c.dD))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})();var R=o(2558),T=o(5794),D=o(4532),u=o(177),h=o(8834),f=o(2102),M=o(9631),x=o(9213),S=o(2798),w=o(6600),L=o(8777),N=o(7371),A=o(1331),$=o(7133);function G(a,l){if(1&a){const t=e.RV6();e.j41(0,"a",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(1," View List "),e.k0s()}}function O(a,l){1&a&&(e.j41(0,"div"),e.EFF(1," Minimum 10 Characters Required "),e.k0s())}function B(a,l){if(1&a&&(e.j41(0,"div",29),e.DNE(1,O,2,0,"div",30),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.frmUser.controls.phoneNumber.errors.minlength)}}function V(a,l){if(1&a&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&a){const t=l.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}let P=(()=>{class a{constructor(t,s,i,n,d,m,v,Pe){this.activatedRoute=t,this.router=s,this.formBuilder=i,this.userService=n,this.roleService=d,this.notificationService=m,this.listService=v,this.permissionService=Pe,this.reportsToData=[],this.roleData=[],this.hidePassword=!0,this.hideConfirmPassword=!0,this.page=c.Wt.user,this.permissions=c.eZ,this.IsViewPermission=!1,this.createForm()}ngOnInit(){this.getUserRoute(),this.getRoleData(),this.IsViewPermission=this.permissionService.hasPermission("User (PER_USER) - View")}getUserRoute(){this.routerSub=this.activatedRoute.params.subscribe(t=>{console.log("Edit params ",t),this.isEditMode=!c.ov.isEmpty(t.id),this.createForm(),this.isEditMode?(this.userId=t.id,this.getUserDetails()):(this.userData=new z.KJ,this.getRoleData())})}getUserDetails(){console.log("user id ",this.userId),this.userService.getById(this.userId).subscribe(t=>{this.userData=t,this.setUserData(),this.getRoleData(),this.getUserRoles()},t=>{console.log(t)})}getUserRoles(){this.userService.getRoles(this.userId).subscribe(t=>{this.frmUser.controls.role.setValue(t[0]||"")},t=>{console.log(t)})}getRoleData(){this.roleService.getRole().subscribe(t=>{this.roleData=t,console.log("ROLE:",this.roleData),this.createRolesControl()},t=>{console.log(t)})}getReportsToData(){c.ov.isNotNull(this.userId),this.userService.get().subscribe(s=>{this.reportsToData=s,this.createReportsToControl()})}setUserData(){this.frmUser.patchValue(this.userData),this.frmUser.controls.password.setValue("********"),this.frmUser.controls.confirmPassword.setValue("********")}createForm(){this.frmUser=this.formBuilder.group({userName:[{value:"",disabled:this.isEditMode},[r.k0.required,r.k0.maxLength(50)]],password:[{value:"",disabled:this.isEditMode},[r.k0.required,r.k0.min(6),r.k0.maxLength(20),p.Bm.passwordValidator]],confirmPassword:[{value:"",disabled:this.isEditMode},[r.k0.required,p.Bm.comparePassword]],email:["",[r.k0.required,p.Bm.emailValidator,p.Bm.multipleemailrestrictValidator,r.k0.maxLength(50)]],phoneNumber:["",[r.k0.maxLength(15)]],role:["",[r.k0.required]],name:["",[r.k0.required]]})}createReportsToControl(){const t=this.frmUser.controls.reportsTo;t.controls=[],this.reportsToData.forEach(s=>{t.push(new r.hs((this.userData.reportsTo||[]).some(i=>i.reportToId===s.id)))})}createRolesControl(){}createUser(){let t=Object.assign({},this.frmUser.value);this.userService.add(t).subscribe(s=>{if(s){this.userId=s.id;const i=this.frmUser.get("role").value;i&&this.assignRoleToUser(this.userId,i),this.notificationService.success("User saved successfully."),this.cancel()}else this.notificationService.warning(s.message)},s=>{400===s.status?Array.isArray(s.error)&&s.error.length>0&&this.notificationService.error(s.error[0].description):this.error="Something went wrong"})}updateUser(){this.userData=Object.assign(this.userData,this.frmUser.value),this.userService.update(this.userData.id,this.userData).subscribe(s=>{this.cancel(),s?this.notificationService.warning(s?.message||"An unexpected error occurred."):(this.notificationService.success("User updated successfully."),this.router.navigate(["../..","list"],{relativeTo:this.activatedRoute}),this.cancel())},s=>{console.error("Update Error:",s);const i=s?.error?.modelState?.[""]?.[0]||"Something went wrong";this.error=i,this.notificationService.error(i)})}save(){if(this.isFormSubmitted=!0,this.frmUser.invalid)return;this.isEditMode?this.updateUser():this.createUser();const t=this.frmUser.get("role").value;t&&this.handleRoleAssignment(t)}handleRoleAssignment(t){this.isEditMode?this.userService.getRoles(this.userId).subscribe(s=>{const i=s[0];i&&i!==t?this.userService.removeRole(this.userId,i).subscribe(()=>{this.assignRoleToUser(this.userId,t)},n=>{this.notificationService.error(`Failed to remove old role: ${n.message}`)}):this.assignRoleToUser(this.userId,t)},s=>{this.notificationService.error(`Failed to get current roles: ${s.message}`)}):this.assignRoleToUser(this.userId,t)}assignRoleToUser(t,s){this.userService.assignRole(t,s).subscribe(i=>{this.notificationService.success(`Role '${s}' assigned successfully to user.`)})}setValidators(){c.ov.getSelectedCheckboxList(this.frmUser.value.roles,this.roleData).some(s=>"Super Admin"===s.name)?this.frmUser.controls.parkingAuthorityId.setValidators([]):this.frmUser.controls.parkingAuthorityId.setValidators([r.k0.required]),this.frmUser.controls.parkingAuthorityId.updateValueAndValidity()}keyDownHandler(t){"Space"===t.code&&t.preventDefault()}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||a)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(r.ze),e.rXU(_),e.rXU(R.W),e.rXU(T.tw),e.rXU(c.aG),e.rXU(D.n))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],decls:69,vars:31,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","class","app-button back-Green",3,"click",4,"ngIf"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"full-width"],["type","text","matInput","","formControlName","name","textlower","",3,"keydown"],[3,"control","message","formSubmitted"],[1,"w-100"],["type","text","matInput","","formControlName","userName","space-restrict","",3,"keydown"],["type","text","matInput","","formControlName","email","textlower","",3,"keydown"],["type","text","mask","(000) 000-0000","matInput","","formControlName","phoneNumber","autocomplete","nope",3,"dropSpecialCharacters"],["class","custom-validation",4,"ngIf"],["matInput","","formControlName","password","autocomplete","off",3,"keydown","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword","autocomplete","off",3,"keydown","type"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","",1,"app-button","mr-1","back-Green"],["mat-flat-button","",1,"app-button","back-Green",3,"click"],[1,"custom-validation"],[4,"ngIf"],[3,"value"]],template:function(s,i){if(1&s){const n=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),e.EFF(6,"User Details"),e.k0s()(),e.j41(7,"div",7)(8,"div"),e.DNE(9,G,2,0,"a",8),e.k0s()()(),e.j41(10,"div")(11,"form",9,0),e.bIt("submit",function(){return e.eBV(n),e.Njj(i.save())}),e.j41(13,"div",10)(14,"div",11)(15,"mat-form-field",12)(16,"mat-label"),e.EFF(17,"Name"),e.k0s(),e.j41(18,"input",13),e.bIt("keydown",function(m){return e.eBV(n),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.nrm(19,"mat-validation-message",14),e.k0s()(),e.j41(20,"div",11)(21,"mat-form-field",15)(22,"mat-label"),e.EFF(23,"Username"),e.k0s(),e.j41(24,"input",16),e.bIt("keydown",function(m){return e.eBV(n),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.nrm(25,"mat-validation-message",14),e.k0s()(),e.j41(26,"div",11)(27,"mat-form-field",12)(28,"mat-label"),e.EFF(29,"Email"),e.k0s(),e.j41(30,"input",17),e.bIt("keydown",function(m){return e.eBV(n),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.nrm(31,"mat-validation-message",14),e.k0s()(),e.j41(32,"div",11)(33,"mat-form-field",12)(34,"mat-label"),e.EFF(35,"Phone Number"),e.k0s(),e.nrm(36,"input",18),e.DNE(37,B,2,1,"div",19),e.k0s()(),e.j41(38,"div",11)(39,"mat-form-field",12)(40,"mat-label"),e.EFF(41,"Password"),e.k0s(),e.j41(42,"input",20),e.bIt("keydown",function(m){return e.eBV(n),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.j41(43,"button",21),e.bIt("click",function(){return e.eBV(n),e.Njj(i.hidePassword=!i.hidePassword)}),e.j41(44,"mat-icon"),e.EFF(45),e.k0s()(),e.nrm(46,"mat-validation-message",14),e.k0s()(),e.j41(47,"div",11)(48,"mat-form-field",12)(49,"mat-label"),e.EFF(50,"Confirm Password"),e.k0s(),e.j41(51,"input",22),e.bIt("keydown",function(m){return e.eBV(n),e.Njj(i.keyDownHandler(m))}),e.k0s(),e.j41(52,"button",21),e.bIt("click",function(){return e.eBV(n),e.Njj(i.hideConfirmPassword=!i.hideConfirmPassword)}),e.j41(53,"mat-icon"),e.EFF(54),e.k0s()(),e.nrm(55,"mat-validation-message",14),e.k0s()(),e.j41(56,"div",11)(57,"mat-form-field",12)(58,"mat-label"),e.EFF(59,"Role"),e.k0s(),e.j41(60,"mat-select",23),e.DNE(61,V,2,2,"mat-option",24),e.k0s(),e.nrm(62,"mat-validation-message",14),e.k0s()(),e.j41(63,"div",25),e.EFF(64," \xa0 "),e.k0s()(),e.j41(65,"div",10)(66,"div",26)(67,"button",27),e.EFF(68,"Save"),e.k0s()()()()()()()()}2&s&&(e.R7$(9),e.Y8G("ngIf",i.IsViewPermission),e.R7$(2),e.Y8G("formGroup",i.frmUser),e.R7$(8),e.Y8G("control",i.frmUser.controls.name)("message","Name")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.frmUser.controls.userName)("message","Username")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.frmUser.controls.email)("message","Email")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("dropSpecialCharacters",!1),e.R7$(),e.Y8G("ngIf",i.frmUser.controls.phoneNumber.errors),e.R7$(5),e.Y8G("type",i.hidePassword||i.isEditMode?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password")("aria-pressed",i.hidePassword),e.R7$(2),e.JRh(i.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("control",i.frmUser.controls.password)("message","Password")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("type",i.hideConfirmPassword||i.isEditMode?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide confirm password")("aria-pressed",i.hideConfirmPassword),e.R7$(2),e.JRh(i.hideConfirmPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("control",i.frmUser.controls.confirmPassword)("message","Confirm Password")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",i.roleData),e.R7$(),e.Y8G("control",i.frmUser.controls.role)("message","Role")("formSubmitted",i.isFormSubmitted))},dependencies:[u.Sq,u.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,h.It,h.$z,h.iY,f.rl,f.nJ,f.yw,M.fg,x.An,S.VO,w.wT,y.Zr,L.T,N.X,A.U,$.r],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.card-header[_ngcontent-%COMP%]{background-color:#17bb58!important;border-bottom:1px solid rgb(23,187,88)!important;padding:.75rem 1.25rem;color:#fff}.back-Green[_ngcontent-%COMP%]{background-color:#17bb58!important;color:#fff!important}.icon-green[_ngcontent-%COMP%]{color:green}"]})}return a})();var I=o(3380),Y=o(1413),H=o(2771),C=o(4823);function X(a,l){if(1&a&&(e.j41(0,"mat-option",16),e.EFF(1),e.k0s()),2&a){const t=l.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Q(a,l){if(1&a){const t=e.RV6();e.j41(0,"mat-form-field",13)(1,"mat-select",15),e.bIt("selectionChange",function(i){e.eBV(t);const n=e.XpG(2);return e.Njj(n._changePageSize(i.value))}),e.Z7z(2,X,2,2,"mat-option",16,e.fX1),e.k0s()()}if(2&a){const t=e.XpG(2);e.Y8G("appearance",t._formFieldAppearance)("color",t.color),e.R7$(),e.Y8G("value",t.pageSize)("disabled",t.disabled)("aria-labelledby",t._pageSizeLabelId)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),e.R7$(),e.Dyx(t._displayedPageSizeOptions)}}function J(a,l){if(1&a&&(e.j41(0,"div",14),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.JRh(t.pageSize)}}function K(a,l){if(1&a&&(e.j41(0,"div",2)(1,"div",12),e.EFF(2),e.k0s(),e.DNE(3,Q,4,7,"mat-form-field",13)(4,J,2,1,"div",14),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.BMQ("id",t._pageSizeLabelId),e.R7$(),e.SpI(" ",t._intl.itemsPerPageLabel," "),e.R7$(),e.vxM(3,t._displayedPageSizeOptions.length>1?3:-1),e.R7$(),e.vxM(4,t._displayedPageSizeOptions.length<=1?4:-1)}}function W(a,l){if(1&a){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.firstPage())}),e.qSk(),e.j41(1,"svg",7),e.nrm(2,"path",18),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),e.BMQ("aria-label",t._intl.firstPageLabel)}}function Z(a,l){if(1&a){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.lastPage())}),e.qSk(),e.j41(1,"svg",7),e.nrm(2,"path",20),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),e.BMQ("aria-label",t._intl.lastPageLabel)}}let b=(()=>{class a{constructor(){this.changes=new Y.B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,s,i)=>{if(0==i||0==s)return`0 of ${i}`;const n=t*s;return`${n+1} \u2013 ${n<(i=Math.max(i,0))?Math.min(n+s,i):n+s} of ${i}`}}static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const ee={provide:b,deps:[[new e.Xx1,new e.kdw,b]],useFactory:function q(a){return a||new b}},ie=new e.nKC("MAT_PAGINATOR_DEFAULT_OPTIONS");let ae=0,E=(()=>{class a{get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(t||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=t||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(t||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(s=>(0,e.Udg)(s,0)),this._updateDisplayedPageSizeOptions()}constructor(t,s,i){if(this._intl=t,this._changeDetectorRef=s,this._pageSizeLabelId="mat-paginator-page-size-label-"+ae++,this._isInitialized=!1,this._initializedStream=new H.m(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new e.bkB,this.initialized=this._initializedStream,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){const{pageSize:n,pageSizeOptions:d,hidePageSize:m,showFirstLastButtons:v}=i;null!=n&&(this._pageSize=n),null!=d&&(this._pageSizeOptions=d),null!=m&&(this.hidePageSize=m),null!=v&&(this.showFirstLastButtons=v)}this._formFieldAppearance=i?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const i=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,s)=>t-s),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static#e=this.\u0275fac=function(s){return new(s||a)(e.rXU(b),e.rXU(e.gRc),e.rXU(ie,8))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[e.Mj6.HasDecoratorInputTransform,"pageIndex","pageIndex",e.Udg],length:[e.Mj6.HasDecoratorInputTransform,"length","length",e.Udg],pageSize:[e.Mj6.HasDecoratorInputTransform,"pageSize","pageSize",e.Udg],pageSizeOptions:"pageSizeOptions",hidePageSize:[e.Mj6.HasDecoratorInputTransform,"hidePageSize","hidePageSize",e.L39],showFirstLastButtons:[e.Mj6.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",e.L39],selectConfig:"selectConfig",disabled:[e.Mj6.HasDecoratorInputTransform,"disabled","disabled",e.L39]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[e.GFd,e.aNF],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,K,5,4,"div",2),e.j41(3,"div",3)(4,"div",4),e.EFF(5),e.k0s(),e.DNE(6,W,3,5,"button",5),e.j41(7,"button",6),e.bIt("click",function(){return i.previousPage()}),e.qSk(),e.j41(8,"svg",7),e.nrm(9,"path",8),e.k0s()(),e.joV(),e.j41(10,"button",9),e.bIt("click",function(){return i.nextPage()}),e.qSk(),e.j41(11,"svg",7),e.nrm(12,"path",10),e.k0s()(),e.DNE(13,Z,3,5,"button",11),e.k0s()()()),2&s&&(e.R7$(2),e.vxM(2,i.hidePageSize?-1:2),e.R7$(3),e.SpI(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),e.R7$(),e.vxM(6,i.showFirstLastButtons?6:-1),e.R7$(),e.Y8G("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),e.BMQ("aria-label",i._intl.previousPageLabel),e.R7$(3),e.Y8G("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),e.BMQ("aria-label",i._intl.nextPageLabel),e.R7$(3),e.vxM(13,i.showFirstLastButtons?13:-1))},dependencies:[f.rl,S.VO,w.wT,h.iY,C.oV],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return a})(),se=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({providers:[ee],imports:[h.Hl,S.Ve,C.uc,E]})}return a})();var oe=o(6081);const ne=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),re=()=>["../","add"],le=a=>["../","edit",a];function de(a,l){1&a&&(e.j41(0,"a",18)(1,"span"),e.EFF(2,"Add New"),e.k0s(),e.nrm(3,"i",19),e.k0s()),2&a&&e.Y8G("routerLink",e.lJ4(1,re))}function ce(a,l){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=l.value;e.R7$(),e.JRh(e.i5U(2,1,t,"MM/dd/yyyy hh:mm a"))}}function me(a,l){if(1&a&&(e.j41(0,"a",23)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()),2&a){const t=e.XpG().row;e.Y8G("routerLink",e.eq3(1,le,t.id))}}function pe(a,l){if(1&a){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG().row,n=e.XpG(2);return e.Njj(n.toggleActivate(i.id))}),e.j41(1,"mat-icon"),e.EFF(2,"close"),e.k0s()()}}function ge(a,l){if(1&a&&e.DNE(0,me,3,3,"a",21)(1,pe,3,0,"button",22),2&a){const t=e.XpG(2);e.Y8G("ngIf",t.IsEditPermission),e.R7$(),e.Y8G("ngIf",t.IsDeletePermission)}}function he(a,l){1&a&&(e.j41(0,"ngx-datatable-column",20),e.DNE(1,ge,2,2,"ng-template",15),e.k0s())}let j=(()=>{class a{constructor(t,s,i){this.userService=t,this.notificationService=s,this.permissionService=i,this.userData=[],this.page=c.Wt.user,this.permissions=c.eZ,this.searchData={isActive:!1},this.pageIndex=1,this.pageSize=10,this.totalItems=0,this.IsAddPemission=!1,this.IsEditPermission=!1,this.IsDeletePermission=!1}ngOnInit(){this.IsAddPemission=this.permissionService.hasPermission("User (PER_USER) - Add"),this.IsEditPermission=this.permissionService.hasPermission("User (PER_USER) - Edit"),this.IsDeletePermission=this.permissionService.hasPermission("User (PER_USER) - Delete"),this.getUserData()}getUserData(){this.loading=!0,this.userService.getUsers(this.pageIndex,this.pageSize).subscribe(t=>{this.loading=!1,this.userData=t.items,this.totalItems=t.totalCount},t=>{this.loading=!1,console.log(t)})}onPageChange(t){this.pageIndex=t.pageIndex+1,this.getUserData()}getRoles(t){return t.map(s=>s.roleName).join(", ")}updateSearch(t){this.searchData={...t},console.log("search",t)}isActiveRow(t){return{"text-danger":!t.isActive}}toggleActivate(t){confirm("Are you sure you want to delete User ?")&&this.userService.deleteUser(t).subscribe(i=>{i?this.getUserData():this.notificationService.warning(i.message)},i=>{this.notificationService.error("Something went wrong.")})}static#e=this.\u0275fac=function(s){return new(s||a)(e.rXU(_),e.rXU(T.tw),e.rXU(D.n))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],decls:21,vars:19,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","class","app-button btn",3,"routerLink",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","User Name","prop","userName"],["name","Email","prop","email"],["name","Phone Number","prop","phoneNumber"],["name","Registered On","prop","createdDate"],["ngx-datatable-cell-template",""],["name","Actions",4,"ngIf"],[3,"page","pageSize","pageIndex","length"],["mat-flat-button","",1,"app-button","btn",3,"routerLink"],[1,"icon-plus"],["name","Actions"],["title","Edit","class","button-padding icon-green",3,"routerLink",4,"ngIf"],["type","button","style","border: none; background-color: white; color: red;",3,"click",4,"ngIf"],["title","Edit",1,"button-padding","icon-green",3,"routerLink"],["type","button",2,"border","none","background-color","white","color","red",3,"click"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e.EFF(6,"User List"),e.k0s()(),e.j41(7,"div",6)(8,"div"),e.DNE(9,de,4,2,"a",7),e.k0s()()(),e.j41(10,"div",8)(11,"div",9)(12,"ngx-datatable",10),e.nI1(13,"searchtable"),e.nrm(14,"ngx-datatable-column",11)(15,"ngx-datatable-column",12)(16,"ngx-datatable-column",13),e.j41(17,"ngx-datatable-column",14),e.DNE(18,ce,3,4,"ng-template",15),e.k0s(),e.DNE(19,he,2,0,"ngx-datatable-column",16),e.k0s(),e.j41(20,"mat-paginator",17),e.bIt("page",function(d){return i.onPageChange(d)}),e.k0s()()()()()()),2&s&&(e.R7$(9),e.Y8G("ngIf",i.IsAddPemission),e.R7$(3),e.Y8G("rows",e.i5U(13,15,i.userData,i.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",i.pageSize)("loadingIndicator",i.loading)("scrollbarH",!0)("rowClass",i.isActiveRow)("messages",e.lJ4(18,ne)),e.R7$(7),e.Y8G("ngIf",i.IsEditPermission||i.IsDeletePermission),e.R7$(),e.Y8G("pageSize",i.pageSize)("pageIndex",i.pageIndex-1)("length",i.totalItems))},dependencies:[u.bT,h.It,x.An,g.Wk,I.ge,I.ed,I.QI,E,u.vh,oe.j],styles:[".ngx-datatable .datatable-header-cell{background-color:#17bb58!important;color:#fff!important}.icon-green[_ngcontent-%COMP%]{color:green}.btn[_ngcontent-%COMP%]{background-color:#17bb58!important;color:#fff!important}  .ngx-datatable.material .datatable-body .progress-linear .container{background-color:#90ee90}  .ngx-datatable.material .datatable-body .progress-linear .container .bar{background-color:green}"]})}return a})();o(9239);let F=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],decls:1,vars:0,template:function(s,i){1&s&&e.nrm(0,"router-outlet")},dependencies:[g.n3],encapsulation:2})}return a})();var k=o(6441);const be=[{path:"",component:F,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[k.L],data:{permission:"User (PER_USER) - View"},component:j},{path:"add",canActivate:[k.L],data:{permission:"User (PER_USER) - Add"},component:P},{path:"edit/:id",canActivate:[k.L],data:{permission:"User (PER_USER) - Edit"},component:P}]}];let ve=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({imports:[g.iI.forChild(be),g.iI]})}return a})();var _e=o(9159);let Se=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({providers:[_,R.W,(0,y._c)()],imports:[p.Gg,ve,_e.tP,se]})}return a})()}}]);