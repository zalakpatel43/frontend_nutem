"use strict";(self.webpackChunkskyward_nutem=self.webpackChunkskyward_nutem||[]).push([[195],{7195:(Ee,T,c)=>{c.r(T),c.d(T,{WeightCheckModule:()=>Ce});var p=c(177),f=c(8498),e=c(4438);let R=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-weight-check"]],decls:1,vars:0,template:function(a,i){1&a&&e.nrm(0,"router-outlet")},dependencies:[f.n3]})}return o})();var k=c(4434),W=c(1528),N=c(5794),w=c(4532),C=c(8834),j=c(9213),v=c(3380),P=c(6081);const z=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),G=()=>["../","add"],M=o=>["..","edit",o];function $(o,s){1&o&&(e.j41(0,"a",16)(1,"span"),e.EFF(2,"Add New"),e.k0s(),e.nrm(3,"i",17),e.k0s()),2&o&&e.Y8G("routerLink",e.lJ4(1,G))}function L(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&o){const t=s.value;e.R7$(),e.JRh(e.i5U(2,1,t,"dd/MM/yyyy hh:mm a"))}}function B(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&o){const t=s.value;e.R7$(),e.JRh(e.i5U(2,1,t,"dd/MM/yyyy hh:mm a"))}}function O(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=s.value;e.R7$(),e.JRh(t)}}function Y(o,s){if(1&o&&(e.j41(0,"a",21)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()),2&o){const t=e.XpG().row;e.Y8G("routerLink",e.eq3(1,M,t.id))}}function x(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG().row,n=e.XpG(2);return e.Njj(n.removeWeightCheck(i.id))}),e.j41(1,"mat-icon"),e.EFF(2,"close"),e.k0s()()}}function V(o,s){if(1&o&&e.DNE(0,Y,3,3,"a",19)(1,x,3,0,"button",20),2&o){const t=e.XpG(2);e.Y8G("ngIf",t.IsEditPermission),e.R7$(),e.Y8G("ngIf",t.IsDeletePermission)}}function U(o,s){1&o&&(e.j41(0,"ngx-datatable-column",18),e.DNE(1,V,2,2,"ng-template",12),e.k0s()),2&o&&e.Y8G("sortable",!1)}let A=(()=>{class o{constructor(t,a,i){this.weightCheckService=t,this.notificationService=a,this.permissionService=i,this.weightCheckData=[],this.page=k.Wt.weightCheck,this.permissions=k.eZ,this.IsAddPemission=!1,this.IsEditPermission=!1,this.IsDeletePermission=!1,this.searchData={},this.showDeleteModal=!1}ngOnInit(){this.IsAddPemission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - Add"),this.IsEditPermission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - Edit"),this.IsDeletePermission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - Delete"),this.getWeightCheckData()}getWeightCheckData(){this.loading=!0,this.weightCheckService.getWeightCheckList().subscribe(t=>{this.weightCheckData=t,console.log("Weight checl list",this.weightCheckData),this.loading=!1},t=>{this.error=t,this.loading=!1})}removeWeightCheck(t){confirm("Are you sure, you want to delete this Weight Check?")&&this.weightCheckService.DeleteWeightCheck(t).subscribe(()=>{this.getWeightCheckData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(t){this.searchData=Object.assign({},t),console.log("serach data",this.searchData)}isActiveRow(t){return{"text-danger":!t.isActive}}static#e=this.\u0275fac=function(a){return new(a||o)(e.rXU(W.Q),e.rXU(N.tw),e.rXU(w.n))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-list"]],decls:20,vars:15,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","class","app-button btn",3,"routerLink",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","messages"],["name","Start Date","prop","startDateTime"],["ngx-datatable-cell-template",""],["name","End Date","prop","endDateTime"],["name","Shift","prop","shiftName"],["name","Actions",3,"sortable",4,"ngIf"],["mat-flat-button","",1,"app-button","btn",3,"routerLink"],[1,"icon-plus"],["name","Actions",3,"sortable"],["class","button-padding icon-green",3,"routerLink",4,"ngIf"],["type","button","style","border: none; background-color: white; color: red;",3,"click",4,"ngIf"],[1,"button-padding","icon-green",3,"routerLink"],["type","button",2,"border","none","background-color","white","color","red",3,"click"]],template:function(a,i){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e.EFF(6,"Weight Check List"),e.k0s()(),e.j41(7,"div",6),e.DNE(8,$,4,2,"a",7),e.k0s()(),e.j41(9,"div",8)(10,"div",9)(11,"ngx-datatable",10),e.nI1(12,"searchtable"),e.j41(13,"ngx-datatable-column",11),e.DNE(14,L,3,4,"ng-template",12),e.k0s(),e.j41(15,"ngx-datatable-column",13),e.DNE(16,B,3,4,"ng-template",12),e.k0s(),e.j41(17,"ngx-datatable-column",14),e.DNE(18,O,2,1,"ng-template",12),e.k0s(),e.DNE(19,U,2,1,"ngx-datatable-column",15),e.k0s()()()()()()),2&a&&(e.R7$(8),e.Y8G("ngIf",i.IsAddPemission),e.R7$(3),e.Y8G("rows",e.i5U(12,11,i.weightCheckData,i.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",i.loading)("scrollbarH",!0)("messages",e.lJ4(14,z)),e.R7$(8),e.Y8G("ngIf",i.IsEditPermission||i.IsDeletePermission))},dependencies:[p.bT,f.Wk,C.It,j.An,v.ge,v.ed,v.QI,p.vh,P.j],styles:[".button-padding[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .button-padding[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;vertical-align:middle}.button-padding[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:8px;text-decoration:none;color:inherit}  .ngx-datatable .datatable-header-cell{background-color:#17bb58!important;color:#fff!important}.icon-green[_ngcontent-%COMP%]{color:green}.btn[_ngcontent-%COMP%]{background-color:#17bb58!important;color:#fff!important}  .ngx-datatable.material .datatable-body .progress-linear .container{background-color:#90ee90}  .ngx-datatable.material .datatable-body .progress-linear .container .bar{background-color:green}"]})}return o})();var h=c(9417),b=c(2102),H=c(9631),X=c(2798),Q=c(6600),F=c(5084),J=c(8777),K=c(7133),S=c(2356);function Z(o,s){if(1&o){const t=e.RV6();e.j41(0,"a",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(1," View List "),e.k0s()}}function q(o,s){if(1&o&&(e.j41(0,"mat-option",54),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.shiftName," ")}}function ee(o,s){if(1&o&&(e.j41(0,"mat-option",54),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.poNumber," ")}}function te(o,s){if(1&o&&(e.j41(0,"mat-option",54),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.productName," ")}}function ie(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Min Weight Range is required. "),e.k0s())}function oe(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Min Weight Range must be a non-negative number. "),e.k0s())}function ae(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Max Weight Range is required. "),e.k0s())}function ne(o,s){if(1&o&&(e.j41(0,"mat-option",54),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function se(o,s){if(1&o&&(e.j41(0,"div",64)(1,"mat-form-field",57)(2,"mat-label"),e.EFF(3),e.k0s(),e.nrm(4,"input",65),e.k0s()()),2&o){const t=s.$implicit;e.R7$(3),e.JRh(t.nozzelName),e.R7$(),e.Y8G("formControlName",t.nozzelName)}}function re(o,s){if(1&o&&(e.j41(0,"mat-option",54),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function ce(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",55)(1,"div",17)(2,"div",56)(3,"mat-form-field",57)(4,"mat-label"),e.EFF(5,"Time"),e.k0s(),e.nrm(6,"input",58)(7,"ngx-material-timepicker",null,3),e.k0s()(),e.DNE(9,se,5,2,"div",59),e.j41(10,"div",60)(11,"mat-form-field",57)(12,"mat-label"),e.EFF(13,"Done By"),e.k0s(),e.j41(14,"mat-select",61),e.DNE(15,re,2,2,"mat-option",25),e.k0s()()(),e.j41(16,"div",62)(17,"button",63),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addFinalWeightDetail())}),e.j41(18,"mat-icon"),e.EFF(19,"add"),e.k0s()()()()()}if(2&o){const t=s.index,a=e.sdS(8),i=e.XpG();e.Y8G("formGroupName",t),e.R7$(6),e.Y8G("ngxTimepicker",a),e.R7$(3),e.Y8G("ngForOf",i.NozzleList),e.R7$(6),e.Y8G("ngForOf",i.usersList)}}function he(o,s){if(1&o&&(e.j41(0,"th",66),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(),e.SpI("",t.nozzelName," ")}}function de(o,s){if(1&o&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit,a=e.XpG().$implicit;e.R7$(),e.SpI(" ",a[t.nozzelName]||""," ")}}function le(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.DNE(5,de,2,1,"td",50),e.j41(6,"td"),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"td")(10,"button",67),e.bIt("click",function(){const i=e.eBV(t),n=i.$implicit,l=i.index,g=e.XpG();return e.Njj(g.onEditDetail(n,l))}),e.nrm(11,"i",68),e.k0s()()()}if(2&o){const t=s.$implicit,a=e.XpG();e.R7$(2),e.SpI(" ",t.Time," "),e.R7$(2),e.SpI(" ",t.DoneByNames," "),e.R7$(),e.Y8G("ngForOf",a.NozzleList),e.R7$(2),e.SpI(" ",e.i5U(8,4,t.Average,"1.2-2")," ")}}let E=(()=>{class o{constructor(t,a,i,n,l,g){this.activatedRoute=t,this.router=a,this.formBuilder=i,this.weightCheckService=n,this.notificationService=l,this.permissionService=g,this.page=k.Wt.weightCheck,this.permissions=k.eZ,this.shiftList=[],this.productionOrderList=[],this.productList=[],this.NozzleList=[],this.usersList=[],this.AddedWeightCheckDetailsList=[],this.EditNozzleDetailsId=-1,this.minEndDate=null,this.IsViewPermission=!1,this.weightRangeValidator=r=>{const d=r.get("MinWeightRange")?.value,m=r.get("MaxWeightRange")?.value;return null!=d&&null!=m&&""!==d&&""!==m&&d>m?{rangeError:!0}:null},this.endDateValidator=r=>{const d=r.get("StartDateTime")?.value,m=r.get("EndDateTime")?.value;return m&&d&&m<d?{endDateBeforeStartDate:!0}:null},this.createForm()}ngOnInit(){this.getRoute(),this.loadDropdowns(),this.IsViewPermission=this.permissionService.hasPermission("Weight Check (PER_WEIGHTCHECK) - View")}getRoute(){this.routerSub=this.activatedRoute.params.subscribe(t=>{this.isEditMode=!k.ov.isEmpty(t.id),console.log("iseditmode",this.isEditMode),this.createForm(),this.isEditMode&&(this.weightCheckId=t.id,this.getWeightCheckById())})}getWeightCheckById(){this.weightCheckService.getByIdWeightCheck(this.weightCheckId).subscribe(t=>{this.weightCheckData=t,this.setWeightCheckData(),console.log("get by id data",t)},t=>{console.log(t)})}setWeightCheckData(){this.WeightCheckForm.patchValue({Code:this.weightCheckData.code,StartDateTime:this.weightCheckData.startDateTime,EndDateTime:this.weightCheckData.endDateTime,ShiftId:this.weightCheckData.shiftId,SAPProductionOrderId:this.weightCheckData.sapProductionOrderId,ProductId:this.weightCheckData.productId,BottleDateCode:this.weightCheckData.bottleDateCode,PackSize:this.weightCheckData.packSize,StandardWeight:this.weightCheckData.targetWeight,MinWeightRange:this.weightCheckData.minWeightRange,MaxWeightRange:this.weightCheckData.maxWeightRange,QAUserId:this.weightCheckData.qaUserId,Note:this.weightCheckData.note}),this.WeightCheckForm.get("SAPProductionOrderId").disable(),this.WeightCheckForm.get("ProductId").disable(),this.WeightCheckForm.get("MinWeightRange")?.valueChanges.subscribe(()=>this.onWeightRangeChange()),this.WeightCheckForm.get("MaxWeightRange")?.valueChanges.subscribe(()=>this.onWeightRangeChange());const t=a=>new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});setTimeout(()=>{this.weightCheckData.weightCheckDetails?.forEach(a=>{const i={};this.NozzleList.forEach(r=>{const d=a.weightCheckSubDetails.find(m=>m.nozzleId===r.id);i[r.id]=d?d.weight??"":""});const n=a.doneByUserIds.split(",").map(r=>Number(r.trim())).filter(r=>!isNaN(r));let l=this.usersList.filter(r=>a.doneByUserIds?.includes(r.id)).map(r=>r.name).join(", ");console.log("nozzle weight ",i);let g={Time:t(a.tDateTime),DoneBy:n,Average:a.avgWeight,Id:a.id,HeaderId:a.headerId,DoneByNames:l};Object.entries(i).forEach(([r,d])=>{g[r]=d}),this.AddedWeightCheckDetailsList.push(g)}),console.log("added nozzle data",this.AddedWeightCheckDetailsList)},500)}loadDropdowns(){this.weightCheckService.getNozzleList().subscribe(t=>{this.NozzleList=t.items,this.addWeightDetail()}),this.weightCheckService.getShiftList().subscribe(t=>{this.shiftList=t}),this.weightCheckService.getProductionOrderList().subscribe(t=>{this.productionOrderList=t}),this.weightCheckService.getProductList().subscribe(t=>{this.productList=t}),this.weightCheckService.getUserList().subscribe(t=>{this.usersList=t})}createForm(){this.WeightCheckForm=this.formBuilder.group({Code:[{value:"",disabled:!0},[h.k0.required]],StartDateTime:["",[h.k0.required]],EndDateTime:["",[h.k0.required,this.endDateValidator]],ShiftId:["",[h.k0.required]],SAPProductionOrderId:["",[h.k0.required]],ProductId:["",[h.k0.required]],BottleDateCode:["",[h.k0.required]],PackSize:["",[h.k0.required]],StandardWeight:["",[h.k0.required]],MinWeightRange:["",[h.k0.required,h.k0.min(0)]],MaxWeightRange:["",[h.k0.required,h.k0.min(0)]],QAUserId:["",[h.k0.required]],Note:["",""],WeightCheckDetails:this.formBuilder.array([])},{validators:this.weightRangeValidator}),this.WeightCheckForm.controls.StartDateTime.setValue((new Date).toISOString().split("T")[0])}onWeightRangeChange(){const t=this.WeightCheckForm.get("MinWeightRange")?.value,a=this.WeightCheckForm.get("MaxWeightRange")?.value;null!=t&&null!=a&&(Number(t)>Number(a)?this.notificationService.error("Max Weight Range should be greater than Min Weight Range"):this.notificationService.clear())}onStartDateChange(){const t=this.WeightCheckForm.get("StartDateTime")?.value;this.minEndDate=t?new Date(t):null}onEndDateChange(){const t=this.WeightCheckForm.get("EndDateTime")?.value,a=this.WeightCheckForm.get("StartDateTime")?.value;a||this.notificationService.error("please select Start date"),a&&t&&new Date(t)<=new Date(a)?this.notificationService.error("End date should be greated than Start date"):this.WeightCheckForm.get("EndDateTime")?.updateValueAndValidity()}getToday(){return(new Date).toISOString().split("T")[0]}addWeightDetail(){this.WeightCheckDetails?.clear(),this.EditNozzleDetailsId=-1;const t=this.formBuilder.group({});console.log("NozzleList",this.NozzleList),this.NozzleList.forEach((a,i)=>{t.addControl(a.nozzelName,this.formBuilder.control(""))}),t.addControl("Time",this.formBuilder.control("")),t.addControl("DoneBy",this.formBuilder.control("")),this.WeightCheckDetails=this.WeightCheckForm?.get("WeightCheckDetails"),this.WeightCheckDetails.push(t),console.log("weightDeatilsList",this.WeightCheckDetails)}addFinalWeightDetail(){const t=this.WeightCheckDetails.at(0).value;if(t.Time)if(t.DoneBy)if(this.EditNozzleDetailsId>=0){const a=this.calculateAverageForEntry(t);t.Average=a;let i=this.usersList.filter(n=>t.DoneBy.includes(n.id)).map(n=>n.name).join(", ");t.DoneByNames=i,this.AddedWeightCheckDetailsList[this.EditNozzleDetailsId]=t,this.addWeightDetail()}else{const a=this.calculateAverageForEntry(t);t.Average=a;let i=this.usersList.filter(n=>t.DoneBy.includes(n.id)).map(n=>n.name).join(", ");t.DoneByNames=i,this.AddedWeightCheckDetailsList.push(t),this.addWeightDetail(),console.log("Added nozzle with average:",this.AddedWeightCheckDetailsList)}else this.notificationService.error("please select Done by");else this.notificationService.error("please select time")}calculateAverageForEntry(t){const a=Object.keys(t).filter(n=>"Time"!==n&&"DoneBy"!==n&&"Average"!==n).map(n=>parseFloat(t[n])).filter(n=>!isNaN(n)),i=a.reduce((n,l)=>n+l,0);return a.length?i/a.length:0}onEditDetail(t,a){console.log("weight",t),console.log("i",a),console.log("details selected for edit",this.AddedWeightCheckDetailsList[a]),this.populateFormWithValues(this.AddedWeightCheckDetailsList[a]),this.EditNozzleDetailsId=a}populateFormWithValues(t){const a=Array.isArray(t)?t:[t];this.WeightCheckDetails=this.WeightCheckForm.get("WeightCheckDetails"),this.WeightCheckDetails.clear(),a.forEach(i=>{const n=this.formBuilder.group({});this.NozzleList.forEach(l=>{n.addControl(l.nozzelName,this.formBuilder.control(i[l.nozzelName]||""))}),n.addControl("Time",this.formBuilder.control(i.Time||"")),n.addControl("DoneBy",this.formBuilder.control(i.DoneBy||"")),this.WeightCheckDetails.push(n)}),console.log("Populated WeightCheckDetails:",this.WeightCheckDetails)}removeWeightDetail(t){this.AddedWeightCheckDetailsList.splice(t,1),console.log("control",this.AddedWeightCheckDetailsList),console.log("items",this.AddedWeightCheckDetailsList)}createWeightCheck(t){this.weightCheckService.addWeightCheck(t).subscribe(()=>{this.cancel(),this.notificationService.success("Weight Check created successfully.")},a=>{this.error=a})}updateWeightCheck(t){this.weightCheckService.updateWeightCheck(t).subscribe(()=>{this.cancel(),this.notificationService.success("Weight Check updated successfully.")},a=>{this.error=a})}save(){this.isFormSubmitted=!0;const t=this.WeightCheckForm.get("EndDateTime")?.value,a=this.WeightCheckForm.get("StartDateTime")?.value;if(!this.WeightCheckForm.invalid){if(new Date(t)<=new Date(a))return void this.notificationService.error("End date should be greated than Start date");if(this.AddedWeightCheckDetailsList.length<1)return void this.notificationService.error("at lease one Nozzlewise deatils required");{let i=this.WeightCheckForm.value;i.WeightCheckDetails=this.AddedWeightCheckDetailsList,console.log("formvalue",i);let n=this.transformData(i);console.log("Playload",n),console.log("json stringyfy",JSON.stringify(n,null,2)),this.isEditMode?this.updateWeightCheck(n):this.createWeightCheck(n)}}}transformData(t){function a(g){const r=new Date(g);if(isNaN(r.getTime()))throw new Error("Invalid date string provided");return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}T${String(r.getHours()).padStart(2,"0")}:${String(r.getMinutes()).padStart(2,"0")}`}function i(g){const d=g.match(/(\d{1,2}):(\d{2}) (AM|PM)/i);if(!d)throw new Error("Invalid time format");let[,m,I,D]=d,u=parseInt(m,10);const be=parseInt(I,10);"AM"===D.toUpperCase()?12===u&&(u=0):"PM"===D.toUpperCase()&&12!==u&&(u+=12);const De=u.toString().padStart(2,"0"),We=be.toString().padStart(2,"0"),y=new Date;return`${y.getFullYear()}-${(y.getMonth()+1).toString().padStart(2,"0")}-${y.getDate().toString().padStart(2,"0")}T${De}:${We}`}const n=Array.isArray(t.WeightCheckDetails)?t.WeightCheckDetails:Object.values(t.WeightCheckDetails||{});return{Id:this.isEditMode?this.weightCheckData.id:0,Code:this.isEditMode?this.weightCheckData.code:"",StartDateTime:a(t.StartDateTime),EndDateTime:a(t.EndDateTime),SAPProductionOrderId:this.isEditMode?this.weightCheckData.sapProductionOrderId:t.SAPProductionOrderId,ProductId:this.isEditMode?this.weightCheckData.productId:t.ProductId,ShiftId:t.ShiftId,BottleDateCode:t.BottleDateCode.toString(),PackSize:t.PackSize.toString(),TargetWeight:t.StandardWeight.toString(),MinWeightRange:t.MinWeightRange,MaxWeightRange:t.MaxWeightRange,QAUserId:t.QAUserId,Note:t.Note,WeightCheckDetails:Array.isArray(n)?n.map((g,r)=>({Id:0,HeaderId:0,TDateTime:i(g.Time),AvgWeight:g.Average,DoneByUserIdList:g.DoneBy,WeightCheckSubDetails:Object.entries(g).filter(([d,m])=>"Average"!==d&&"Time"!==d&&"DoneBy"!==d&&"DoneByNames"!==d).map(([d,m])=>({Id:0,DetailId:0,NozzleId:Number(d),Weight:""!==m?m:null}))})):[]}}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||o)(e.rXU(f.nX),e.rXU(f.Ix),e.rXU(h.ze),e.rXU(W.Q),e.rXU(N.tw),e.rXU(w.n))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-add-edit"]],decls:136,vars:51,consts:[["form","ngForm"],["pickerStart",""],["pickerEnd",""],["timepicker",""],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button back-Green",3,"click",4,"ngIf"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","mb-3"],["appearance","fill",1,"full-width"],["matInput","","formControlName","StartDateTime",3,"dateChange","matDatepicker","min"],["matSuffix","",3,"for"],[3,"control","message","formSubmitted"],["matInput","","formControlName","EndDateTime",3,"dateChange","matDatepicker","min"],["formControlName","ShiftId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","SAPProductionOrderId",3,"disabled"],["formControlName","ProductId",3,"disabled"],["matInput","","formControlName","BottleDateCode"],["matInput","","formControlName","PackSize","type","number"],["matInput","","formControlName","StandardWeight","type","number"],["matInput","","formControlName","MinWeightRange","type","number"],[4,"ngIf"],["matInput","","formControlName","MaxWeightRange","type","number"],["formControlName","QAUserId"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","mb-3"],["matInput","","formControlName","Note"],[1,"card-header","d-flex","align-items-center","justify-content-between"],["formArrayName","WeightCheckDetails"],["class","row mt-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"table-responsive"],["id","gridNozzlewiseWeight",1,"table","table-hover","table-bordered","display","mb-30","fixed-table-scroll-inner",2,"overflow","scroll","width","auto"],[1,"bg-primary","text-primary","text-center"],[1,"back-Green",2,"width","8%"],[1,"back-Green",2,"width","12%"],[1,"back-Green",2,"text-align","center"],[1,"back-Green",2,"width","5%"],[1,"back-Green"],["class","back-Green","data-nozzleid","1",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","",1,"app-button","mr-1","back-Green"],["mat-flat-button","","color","primary",1,"app-button","back-Green",3,"click"],[3,"value"],[1,"row","mt-3",3,"formGroupName"],[1,"col-12","col-sm-12","col-md-2","col-lg-2","mb-3"],[1,"full-width"],["matInput","","placeholder","Select time","formControlName","Time",3,"ngxTimepicker"],["class","col-12 col-sm-12 col-md-1 col-lg-1 mb-3 ",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-3","p-1"],["formControlName","DoneBy","multiple",""],[1,"col-12","col-sm-12","col-md-2","col-lg-2","mb-3","p-1","d-flex","align-items-center"],["type","button","mat-icon-button","",1,"icon-green",3,"click"],[1,"col-12","col-sm-12","col-md-1","col-lg-1","mb-3"],["type","number","matInput","",3,"formControlName"],["data-nozzleid","1",1,"back-Green"],["type","button",1,"btn","btn-success","btn-sm","btnModifyRow","back-Green",3,"click"],[1,"fa","fa-pencil"]],template:function(a,i){if(1&a){const n=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h4",9),e.nrm(6,"i",10),e.EFF(7," Add/Edit Weight Check"),e.k0s()(),e.j41(8,"div",11),e.DNE(9,Z,2,0,"a",12),e.k0s()(),e.j41(10,"form",13,0),e.bIt("submit",function(){return e.eBV(n),e.Njj(i.save())}),e.j41(12,"div",14)(13,"div",15)(14,"h5",9),e.EFF(15,"Basic Details"),e.k0s()(),e.j41(16,"div",16)(17,"div",17)(18,"div",18)(19,"mat-form-field",19)(20,"mat-label"),e.EFF(21,"Start Date"),e.k0s(),e.j41(22,"input",20),e.bIt("dateChange",function(){return e.eBV(n),e.Njj(i.onStartDateChange())}),e.k0s(),e.nrm(23,"mat-datepicker-toggle",21)(24,"mat-datepicker",null,1)(26,"mat-validation-message",22),e.k0s()(),e.j41(27,"div",18)(28,"mat-form-field",19)(29,"mat-label"),e.EFF(30,"End Date"),e.k0s(),e.j41(31,"input",23),e.bIt("dateChange",function(){return e.eBV(n),e.Njj(i.onEndDateChange())}),e.k0s(),e.nrm(32,"mat-datepicker-toggle",21)(33,"mat-datepicker",null,2)(35,"mat-validation-message",22),e.k0s()(),e.j41(36,"div",18)(37,"mat-form-field",19)(38,"mat-label"),e.EFF(39,"Shift"),e.k0s(),e.j41(40,"mat-select",24),e.DNE(41,q,2,2,"mat-option",25),e.k0s(),e.nrm(42,"mat-validation-message",22),e.k0s()(),e.j41(43,"div",18)(44,"mat-form-field",19)(45,"mat-label"),e.EFF(46,"SAP Production Order"),e.k0s(),e.j41(47,"mat-select",26),e.DNE(48,ee,2,2,"mat-option",25),e.k0s(),e.nrm(49,"mat-validation-message",22),e.k0s()(),e.j41(50,"div",18)(51,"mat-form-field",19)(52,"mat-label"),e.EFF(53,"Product"),e.k0s(),e.j41(54,"mat-select",27),e.DNE(55,te,2,2,"mat-option",25),e.k0s(),e.nrm(56,"mat-validation-message",22),e.k0s()(),e.j41(57,"div",18)(58,"mat-form-field",19)(59,"mat-label"),e.EFF(60,"Bottle Date Code"),e.k0s(),e.nrm(61,"input",28)(62,"mat-validation-message",22),e.k0s()(),e.j41(63,"div",18)(64,"mat-form-field",19)(65,"mat-label"),e.EFF(66,"Pack Size"),e.k0s(),e.nrm(67,"input",29)(68,"mat-validation-message",22),e.k0s()(),e.j41(69,"div",18)(70,"mat-form-field",19)(71,"mat-label"),e.EFF(72,"Standard Weight"),e.k0s(),e.nrm(73,"input",30)(74,"mat-validation-message",22),e.k0s()(),e.j41(75,"div",18)(76,"mat-form-field",19)(77,"mat-label"),e.EFF(78,"Min Weight Range"),e.k0s(),e.nrm(79,"input",31),e.DNE(80,ie,2,0,"mat-error",32)(81,oe,2,0,"mat-error",32),e.k0s()(),e.j41(82,"div",18)(83,"mat-form-field",19)(84,"mat-label"),e.EFF(85,"Max Weight Range"),e.k0s(),e.nrm(86,"input",33),e.DNE(87,ae,2,0,"mat-error",32),e.k0s()(),e.j41(88,"div",18)(89,"mat-form-field",19)(90,"mat-label"),e.EFF(91,"QA User"),e.k0s(),e.j41(92,"mat-select",34),e.DNE(93,ne,2,2,"mat-option",25),e.k0s(),e.nrm(94,"mat-validation-message",22),e.k0s()(),e.j41(95,"div",35)(96,"mat-form-field",19)(97,"mat-label"),e.EFF(98,"Note"),e.k0s(),e.nrm(99,"textarea",36)(100,"mat-validation-message",22),e.k0s()()()()(),e.j41(101,"div",14)(102,"div",37)(103,"h5",9),e.EFF(104,"Nozzlewise Weight Details"),e.k0s()(),e.j41(105,"div",16)(106,"div",38),e.DNE(107,ce,20,4,"div",39),e.k0s()()(),e.j41(108,"div",17)(109,"div",40)(110,"div",41)(111,"table",42)(112,"thead",43)(113,"tr"),e.nrm(114,"th",44)(115,"th",45),e.j41(116,"th",46),e.EFF(117,"Nozzle(s)"),e.k0s(),e.nrm(118,"th",44)(119,"th",47),e.k0s(),e.j41(120,"tr")(121,"th",48),e.EFF(122,"Time"),e.k0s(),e.j41(123,"th",48),e.EFF(124,"Done By"),e.k0s(),e.DNE(125,he,2,1,"th",49),e.j41(126,"th",48),e.EFF(127,"Avg Weight"),e.k0s(),e.j41(128,"th",48),e.EFF(129,"Action"),e.k0s()()(),e.j41(130,"tbody"),e.DNE(131,le,12,7,"tr",50),e.k0s()()()()(),e.j41(132,"div",17)(133,"div",51)(134,"button",52),e.EFF(135,"Save"),e.k0s()()()()()()()}if(2&a){const n=e.sdS(25),l=e.sdS(34);e.R7$(9),e.Y8G("ngIf",i.IsViewPermission),e.R7$(),e.Y8G("formGroup",i.WeightCheckForm),e.R7$(12),e.Y8G("matDatepicker",n)("min",i.getToday()),e.R7$(),e.Y8G("for",n),e.R7$(3),e.Y8G("control",i.WeightCheckForm.controls.StartDateTime)("message","Start Date Time")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("matDatepicker",l)("min",i.WeightCheckForm.controls.StartDateTime),e.R7$(),e.Y8G("for",l),e.R7$(3),e.Y8G("control",i.WeightCheckForm.controls.EndDateTime)("message","End Date Time")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",i.shiftList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.ShiftId)("message","Shift")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("disabled",i.isEditMode),e.R7$(),e.Y8G("ngForOf",i.productionOrderList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.SAPProductionOrderId)("message","SAP Production Order")("formSubmitted",i.isFormSubmitted),e.R7$(5),e.Y8G("disabled",i.isEditMode),e.R7$(),e.Y8G("ngForOf",i.productList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.ProductId)("message","Product")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.BottleDateCode)("message","Bottle Date Code")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.PackSize)("message","Pack Size")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.StandardWeight)("message","Standard Weight")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("ngIf",i.WeightCheckForm.get("MinWeightRange").hasError("required")&&i.isFormSubmitted),e.R7$(),e.Y8G("ngIf",i.WeightCheckForm.get("MinWeightRange").hasError("min")&&i.isFormSubmitted),e.R7$(6),e.Y8G("ngIf",i.WeightCheckForm.get("MaxWeightRange").hasError("required")&&i.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",i.usersList),e.R7$(),e.Y8G("control",i.WeightCheckForm.controls.QAUserId)("message","QA User")("formSubmitted",i.isFormSubmitted),e.R7$(6),e.Y8G("control",i.WeightCheckForm.controls.Note)("message","Note")("formSubmitted",i.isFormSubmitted),e.R7$(7),e.Y8G("ngForOf",null==i.WeightCheckDetails?null:i.WeightCheckDetails.controls),e.R7$(9),e.BMQ("colspan",i.NozzleList.length),e.R7$(9),e.Y8G("ngForOf",i.NozzleList),e.R7$(6),e.Y8G("ngForOf",i.AddedWeightCheckDetailsList)}},dependencies:[p.Sq,p.bT,h.qT,h.me,h.Q0,h.BC,h.cb,h.j4,h.JD,h.$R,h.v8,C.It,C.$z,C.iY,b.rl,b.nJ,b.TL,b.yw,H.fg,j.An,X.VO,Q.wT,F.Vh,F.bZ,F.bU,J.T,K.r,S.zk,S.v2,p.QX],styles:[".card[_ngcontent-%COMP%]{margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.full-width[_ngcontent-%COMP%]{width:100%}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}.card-header[_ngcontent-%COMP%]{background-color:#17bb58!important;border-bottom:1px solid rgb(23,187,88)!important;padding:.75rem 1.25rem;color:#fff}.back-Green[_ngcontent-%COMP%]{background-color:#17bb58!important;color:#fff!important}.icon-green[_ngcontent-%COMP%]{color:green}  .ngx-datatable.material .datatable-body .progress-linear .container{background-color:#90ee90}  .ngx-datatable.material .datatable-body .progress-linear .container .bar{background-color:green}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return o})();c(9239);var _=c(6441);const ue=[{path:"",component:R,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:A,canActivate:[_.L],data:{permission:"Weight Check (PER_WEIGHTCHECK) - View"}},{path:"add",canActivate:[_.L],data:{permission:"Weight Check (PER_WEIGHTCHECK) - Add"},component:E},{path:"edit/:id",canActivate:[_.L],data:{permission:"Weight Check (PER_WEIGHTCHECK) - Edit"},component:E}]}];let pe=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.$C({type:o});static#i=this.\u0275inj=e.G2t({imports:[f.iI.forChild(ue),f.iI]})}return o})();var fe=c(1774),ke=c(9830);let Ce=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.$C({type:o});static#i=this.\u0275inj=e.G2t({providers:[W.Q,(0,ke._c)()],imports:[p.MD,pe,fe.Gg,S.c9]})}return o})()}}]);