"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[183],{92183:(st,h,a)=>{a.r(h),a.d(h,{CustomerModule:()=>ot});var E=a(71774),l=a(18498),t=a(54438);let C=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(s,o){1&s&&t.nrm(0,"router-outlet")},dependencies:[l.n3],encapsulation:2})}return r})();var i=a(89417),c=a(4434),p=a(26494),v=a(45794),b=a(60177),d=a(88834),_=a(32102),N=a(99631),k=a(99213),S=a(82798),D=a(86600),F=a(30220),G=a(58777),T=a(67133);function I(r,m){if(1&r){const e=t.RV6();t.j41(0,"a",36),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancel())}),t.EFF(1," View List "),t.k0s()}}function R(r,m){if(1&r&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&r){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function $(r,m){if(1&r&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&r){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function A(r,m){if(1&r&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&r){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function Y(r,m){if(1&r&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&r){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function x(r,m){if(1&r){const e=t.RV6();t.j41(0,"div",38)(1,"div",15)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Location"),t.k0s(),t.nrm(5,"input",39)(6,"mat-validation-message",17),t.k0s()(),t.j41(7,"div",15)(8,"mat-form-field")(9,"mat-label"),t.EFF(10,"Street"),t.k0s(),t.nrm(11,"input",40)(12,"mat-validation-message",17),t.k0s()(),t.j41(13,"div",15)(14,"mat-form-field")(15,"mat-label"),t.EFF(16,"City"),t.k0s(),t.nrm(17,"input",41)(18,"mat-validation-message",17),t.k0s()(),t.j41(19,"div",15)(20,"mat-form-field")(21,"mat-label"),t.EFF(22,"Country"),t.k0s(),t.nrm(23,"input",42)(24,"mat-validation-message",17),t.k0s()(),t.j41(25,"div",15)(26,"mat-form-field")(27,"mat-label"),t.EFF(28,"State"),t.k0s(),t.nrm(29,"input",43)(30,"mat-validation-message",17),t.k0s()(),t.j41(31,"div",15)(32,"mat-form-field")(33,"mat-label"),t.EFF(34,"Zip Code"),t.k0s(),t.nrm(35,"input",44)(36,"mat-validation-message",17),t.k0s()(),t.j41(37,"div",15)(38,"mat-form-field")(39,"mat-label"),t.EFF(40,"GSTIN No"),t.k0s(),t.nrm(41,"input",26)(42,"mat-validation-message",17),t.k0s()(),t.j41(43,"div",45)(44,"button",46),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addCustomerDetail())}),t.j41(45,"mat-icon"),t.EFF(46,"add"),t.k0s()(),t.j41(47,"button",46),t.bIt("click",function(){const o=t.eBV(e).index,n=t.XpG();return t.Njj(n.removeCustomerDetail(o))}),t.j41(48,"mat-icon"),t.EFF(49,"delete"),t.k0s()()()()}if(2&r){const e=m.$implicit,s=m.index,o=t.XpG();t.Y8G("formGroupName",s),t.R7$(6),t.Y8G("control",e.get("location"))("message","Location")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("street"))("message","Street")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("city"))("message","City")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("country"))("message","Country")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("state"))("message","State")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("zipCode"))("message","Zip Code")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("gstinNo"))("message","GSTIN No")("formSubmitted",o.isFormSubmitted)}}function L(r,m){if(1&r){const e=t.RV6();t.j41(0,"div",38)(1,"div",15)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Contact Name"),t.k0s(),t.nrm(5,"input",47)(6,"mat-validation-message",17),t.k0s()(),t.j41(7,"div",15)(8,"mat-form-field")(9,"mat-label"),t.EFF(10,"Job Title"),t.k0s(),t.nrm(11,"input",48)(12,"mat-validation-message",17),t.k0s()(),t.j41(13,"div",15)(14,"mat-form-field")(15,"mat-label"),t.EFF(16,"Email"),t.k0s(),t.nrm(17,"input",49)(18,"mat-validation-message",17),t.k0s()(),t.j41(19,"div",15)(20,"mat-form-field")(21,"mat-label"),t.EFF(22,"Phone No"),t.k0s(),t.nrm(23,"input",24)(24,"mat-validation-message",17),t.k0s()(),t.j41(25,"div",15)(26,"mat-form-field")(27,"mat-label"),t.EFF(28,"Mobile 1"),t.k0s(),t.nrm(29,"input",50)(30,"mat-validation-message",17),t.k0s()(),t.j41(31,"div",15)(32,"mat-form-field")(33,"mat-label"),t.EFF(34,"Mobile 2"),t.k0s(),t.nrm(35,"input",51)(36,"mat-validation-message",17),t.k0s()(),t.j41(37,"div",15)(38,"mat-form-field")(39,"mat-label"),t.EFF(40,"Department"),t.k0s(),t.nrm(41,"input",52)(42,"mat-validation-message",17),t.k0s()(),t.j41(43,"div",15)(44,"mat-form-field")(45,"mat-label"),t.EFF(46,"Designation"),t.k0s(),t.nrm(47,"input",53)(48,"mat-validation-message",17),t.k0s()(),t.j41(49,"div",45)(50,"button",46),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addCustomerContactDetail())}),t.j41(51,"mat-icon"),t.EFF(52,"add"),t.k0s()(),t.j41(53,"button",46),t.bIt("click",function(){const o=t.eBV(e).index,n=t.XpG();return t.Njj(n.removeCustomerContactDetail(o))}),t.j41(54,"mat-icon"),t.EFF(55,"delete"),t.k0s()()()()}if(2&r){const e=m.$implicit,s=m.index,o=t.XpG();t.Y8G("formGroupName",s),t.R7$(6),t.Y8G("control",e.get("contactName"))("message","Contact Name")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("jobTitle"))("message","Job Title")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("email"))("message","Email")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("phoneNo"))("message","Phone No")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("mobile1"))("message","Mobile 1")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("mobile2"))("message","Mobile 2")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("department"))("message","Department")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("designation"))("message","Designation")("formSubmitted",o.isFormSubmitted)}}function B(r,m){if(1&r&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&r){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.E5c(" ",e.firstName," ",e.lastName," - ",e.email," ")}}function V(r,m){if(1&r){const e=t.RV6();t.j41(0,"div",38)(1,"div",54)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"User Name"),t.k0s(),t.j41(5,"mat-select",55),t.DNE(6,B,2,4,"mat-option",20),t.k0s(),t.nrm(7,"mat-validation-message",17),t.k0s()(),t.j41(8,"div",45)(9,"button",46),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addCustomerUserAssignment())}),t.j41(10,"mat-icon"),t.EFF(11,"add"),t.k0s()(),t.j41(12,"button",46),t.bIt("click",function(){const o=t.eBV(e).index,n=t.XpG();return t.Njj(n.removeCustomerUserAssignment(o))}),t.j41(13,"mat-icon"),t.EFF(14,"delete"),t.k0s()()()()}if(2&r){const e=m.$implicit,s=m.index,o=t.XpG();t.Y8G("formGroupName",s),t.R7$(6),t.Y8G("ngForOf",o.users),t.R7$(),t.Y8G("control",e.get("userId"))("message","User Name")("formSubmitted",o.isFormSubmitted)}}function w(r,m){if(1&r&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&r){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function U(r,m){if(1&r){const e=t.RV6();t.j41(0,"div",38)(1,"div",54)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Territory Name"),t.k0s(),t.j41(5,"mat-select",56),t.DNE(6,w,2,2,"mat-option",20),t.k0s(),t.nrm(7,"mat-validation-message",17),t.k0s()(),t.j41(8,"div",45)(9,"button",46),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addCustomerTerritory())}),t.j41(10,"mat-icon"),t.EFF(11,"add"),t.k0s()(),t.j41(12,"button",46),t.bIt("click",function(){const o=t.eBV(e).index,n=t.XpG();return t.Njj(n.removeCustomerTerritory(o))}),t.j41(13,"mat-icon"),t.EFF(14,"delete"),t.k0s()()()()}if(2&r){const e=m.$implicit,s=m.index,o=t.XpG();t.Y8G("formGroupName",s),t.R7$(6),t.Y8G("ngForOf",o.territories),t.R7$(),t.Y8G("control",e.get("territoryId"))("message","Territory Name")("formSubmitted",o.isFormSubmitted)}}let f=(()=>{class r{constructor(e,s,o,n,u,rt){this.activatedRoute=e,this.router=s,this.formBuilder=o,this.customerService=n,this.notificationService=u,this.listService=rt,this.page=c.Wt.customer,this.permissions=c.eZ,this.categories=[],this.industries=[],this.types=[],this.sources=[],this.users=[],this.territories=[],this.createForm()}ngOnInit(){this.getCustomerRoute(),this.isEditMode||this.generateCustomerCode(),this.loadDropdowns()}getCustomerRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{this.isEditMode=!c.ov.isEmpty(e.id),this.createForm(),this.isEditMode&&(this.customerId=+e.id,this.getCustomerDetails())})}getCustomerDetails(){this.customerService.getById(this.customerId).subscribe(e=>{this.customerData=e,this.setCustomerData()},e=>{console.log(e)})}setCustomerData(){this.frmCustomer.patchValue(this.customerData),this.customerData.customerDetails.forEach(e=>this.addCustomerDetail(e)),this.customerData.customerContactDetails.forEach(e=>this.addCustomerContactDetail(e)),this.customerData.customerUserDetails.forEach(e=>this.addCustomerUserAssignment(e)),this.customerData.customerTerritoryDetails.forEach(e=>this.addCustomerTerritory(e))}generateCustomerCode(){this.customerService.generateCustomerCode().subscribe(e=>{this.frmCustomer.patchValue({customerCode:e})},e=>{console.log(e)})}loadDropdowns(){this.customerService.getUsers().subscribe(e=>this.users=e),this.listService.getList("customercategory").subscribe(e=>{this.categories=e}),this.listService.getList("industries").subscribe(e=>{this.industries=e}),this.listService.getList("customertype").subscribe(e=>{this.types=e}),this.listService.getList("sources").subscribe(e=>{this.sources=e}),this.listService.getList("territories").subscribe(e=>{this.territories=e})}createForm(){this.frmCustomer=this.formBuilder.group({customerCode:[{value:"",disabled:!0},[i.k0.required]],customerName:["",[i.k0.required,i.k0.maxLength(256)]],customerCategoryId:["",[i.k0.required]],industryId:["",[i.k0.required]],customerTypeId:["",[i.k0.required]],sourceId:["",[i.k0.required]],phoneNo:["",[i.k0.required,i.k0.maxLength(128)]],website:["",[i.k0.maxLength(256)]],gstinNo:["",[i.k0.maxLength(256)]],customerDetails:this.formBuilder.array([]),customerContactDetails:this.formBuilder.array([]),customerUserDetails:this.formBuilder.array([]),customerTerritoryDetails:this.formBuilder.array([])})}get customerDetails(){return this.frmCustomer.get("customerDetails")}get customerContactDetails(){return this.frmCustomer.get("customerContactDetails")}get customerUserDetails(){return this.frmCustomer.get("customerUserDetails")}get customerTerritoryDetails(){return this.frmCustomer.get("customerTerritoryDetails")}addCustomerDetail(e){this.customerDetails.push(this.formBuilder.group({location:[e?e.location:"",[i.k0.required,i.k0.maxLength(256)]],street:[e?e.street:"",[i.k0.maxLength(1028)]],city:[e?e.city:"",[i.k0.required,i.k0.maxLength(256)]],state:[e?e.state:"",[i.k0.required,i.k0.maxLength(256)]],country:[e?e.country:"",[i.k0.maxLength(256)]],zipCode:[e?e.zipCode:"",[i.k0.required,i.k0.maxLength(56)]],gstinNo:[e?e.gstinNo:"",[i.k0.maxLength(256)]]}))}removeCustomerDetail(e){this.customerDetails.removeAt(e)}addCustomerContactDetail(e){this.customerContactDetails.push(this.formBuilder.group({contactName:[e?e.contactName:"",[i.k0.required,i.k0.maxLength(512)]],jobTitle:[e?e.jobTitle:"",[i.k0.maxLength(256)]],email:[e?e.email:"",[i.k0.required,i.k0.email]],phoneNo:[e?e.phoneNo:"",[i.k0.maxLength(256)]],mobile1:[e?e.mobile1:"",[i.k0.required,i.k0.maxLength(56)]],mobile2:[e?e.mobile2:"",[i.k0.maxLength(56)]],department:[e?e.department:"",[i.k0.maxLength(256)]],designation:[e?e.designation:"",[i.k0.maxLength(256)]]}))}removeCustomerContactDetail(e){this.customerContactDetails.removeAt(e)}addCustomerUserAssignment(e){this.customerUserDetails.push(this.formBuilder.group({userId:[e?e.userId:"",[i.k0.required]]}))}removeCustomerUserAssignment(e){this.customerUserDetails.removeAt(e)}addCustomerTerritory(e){this.customerTerritoryDetails.push(this.formBuilder.group({territoryId:[e?e.territoryId:"",[i.k0.required]]}))}removeCustomerTerritory(e){this.customerTerritoryDetails.removeAt(e)}createCustomer(){let e=this.frmCustomer.getRawValue();this.customerService.add(e).subscribe(()=>{this.cancel(),this.notificationService.success("Customer master created successfully.")},s=>{this.error=s})}updateCustomer(){let e=this.frmCustomer.getRawValue();this.customerData=Object.assign(this.customerData,this.customerData,e),this.customerService.update(this.customerData.id,this.customerData).subscribe(()=>{this.cancel(),this.notificationService.success("Customer master details updated successfully.")},s=>{this.error=s})}save(){this.isFormSubmitted=!0,!this.frmCustomer.invalid&&(this.isEditMode?this.updateCustomer():this.createCustomer())}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(l.nX),t.rXU(l.Ix),t.rXU(i.ze),t.rXU(p.m),t.rXU(v.tw),t.rXU(c.aG))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["ng-component"]],decls:116,vars:37,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","customerCode"],[3,"control","message","formSubmitted"],["type","text","matInput","","formControlName","customerName"],["formControlName","customerCategoryId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","industryId"],["formControlName","customerTypeId"],["formControlName","sourceId"],["type","text","matInput","","formControlName","phoneNo"],["type","text","matInput","","formControlName","website"],["type","text","matInput","","formControlName","gstinNo"],[1,"card-header","d-flex","align-items-center","justify-content-between"],["type","button","mat-flat-button","","color","primary",3,"click"],["formArrayName","customerDetails"],["class","row mt-3",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","customerContactDetails"],["formArrayName","customerUserDetails"],["formArrayName","customerTerritoryDetails"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[3,"value"],[1,"row","mt-3",3,"formGroupName"],["type","text","matInput","","formControlName","location"],["type","text","matInput","","formControlName","street"],["type","text","matInput","","formControlName","city"],["type","text","matInput","","formControlName","country"],["type","text","matInput","","formControlName","state"],["type","text","matInput","","formControlName","zipCode"],[1,"col-md-2","d-flex","align-items-center"],["type","button","mat-icon-button","","color","warn",3,"click"],["type","text","matInput","","formControlName","contactName"],["type","text","matInput","","formControlName","jobTitle"],["type","email","matInput","","formControlName","email"],["type","text","matInput","","formControlName","mobile1"],["type","text","matInput","","formControlName","mobile2"],["type","text","matInput","","formControlName","department"],["type","text","matInput","","formControlName","designation"],[1,"col-md-6"],["formControlName","userId"],["formControlName","territoryId"]],template:function(s,o){if(1&s){const n=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.nrm(6,"i",7),t.EFF(7," Add/Edit Customer"),t.k0s()(),t.j41(8,"div",8),t.DNE(9,I,2,0,"a",9),t.k0s()(),t.j41(10,"form",10,0),t.bIt("submit",function(){return t.eBV(n),t.Njj(o.save())}),t.j41(12,"div",11)(13,"div",12)(14,"h5",6),t.EFF(15,"Basic Details"),t.k0s()(),t.j41(16,"div",13)(17,"div",14)(18,"div",15)(19,"mat-form-field")(20,"mat-label"),t.EFF(21,"Customer Code"),t.k0s(),t.nrm(22,"input",16)(23,"mat-validation-message",17),t.k0s()(),t.j41(24,"div",15)(25,"mat-form-field")(26,"mat-label"),t.EFF(27,"Customer Name"),t.k0s(),t.nrm(28,"input",18)(29,"mat-validation-message",17),t.k0s()(),t.j41(30,"div",15)(31,"mat-form-field")(32,"mat-label"),t.EFF(33,"Customer Category"),t.k0s(),t.j41(34,"mat-select",19),t.DNE(35,R,2,2,"mat-option",20),t.k0s(),t.nrm(36,"mat-validation-message",17),t.k0s()(),t.j41(37,"div",15)(38,"mat-form-field")(39,"mat-label"),t.EFF(40,"Industry"),t.k0s(),t.j41(41,"mat-select",21),t.DNE(42,$,2,2,"mat-option",20),t.k0s(),t.nrm(43,"mat-validation-message",17),t.k0s()(),t.j41(44,"div",15)(45,"mat-form-field")(46,"mat-label"),t.EFF(47,"Customer Type"),t.k0s(),t.j41(48,"mat-select",22),t.DNE(49,A,2,2,"mat-option",20),t.k0s(),t.nrm(50,"mat-validation-message",17),t.k0s()(),t.j41(51,"div",15)(52,"mat-form-field")(53,"mat-label"),t.EFF(54,"Source/Referred By"),t.k0s(),t.j41(55,"mat-select",23),t.DNE(56,Y,2,2,"mat-option",20),t.k0s(),t.nrm(57,"mat-validation-message",17),t.k0s()(),t.j41(58,"div",15)(59,"mat-form-field")(60,"mat-label"),t.EFF(61,"Phone No"),t.k0s(),t.nrm(62,"input",24)(63,"mat-validation-message",17),t.k0s()(),t.j41(64,"div",15)(65,"mat-form-field")(66,"mat-label"),t.EFF(67,"Website"),t.k0s(),t.nrm(68,"input",25)(69,"mat-validation-message",17),t.k0s()(),t.j41(70,"div",15)(71,"mat-form-field")(72,"mat-label"),t.EFF(73,"GSTIN No"),t.k0s(),t.nrm(74,"input",26)(75,"mat-validation-message",17),t.k0s()()()()(),t.j41(76,"div",11)(77,"div",27)(78,"h5",6),t.EFF(79,"Address Information"),t.k0s(),t.j41(80,"button",28),t.bIt("click",function(){return t.eBV(n),t.Njj(o.addCustomerDetail())}),t.EFF(81,"Add Address"),t.k0s()(),t.j41(82,"div",13)(83,"div",29),t.DNE(84,x,50,22,"div",30),t.k0s()()(),t.j41(85,"div",11)(86,"div",27)(87,"h5",6),t.EFF(88,"Contact Details"),t.k0s(),t.j41(89,"button",28),t.bIt("click",function(){return t.eBV(n),t.Njj(o.addCustomerContactDetail())}),t.EFF(90,"Add Contact"),t.k0s()(),t.j41(91,"div",13)(92,"div",31),t.DNE(93,L,56,25,"div",30),t.k0s()()(),t.j41(94,"div",11)(95,"div",27)(96,"h5",6),t.EFF(97,"User Assignment Details"),t.k0s(),t.j41(98,"button",28),t.bIt("click",function(){return t.eBV(n),t.Njj(o.addCustomerUserAssignment())}),t.EFF(99,"Add User"),t.k0s()(),t.j41(100,"div",13)(101,"div",32),t.DNE(102,V,15,5,"div",30),t.k0s()()(),t.j41(103,"div",11)(104,"div",27)(105,"h5",6),t.EFF(106,"Territory Assignment"),t.k0s(),t.j41(107,"button",28),t.bIt("click",function(){return t.eBV(n),t.Njj(o.addCustomerTerritory())}),t.EFF(108,"Add Territory"),t.k0s()(),t.j41(109,"div",13)(110,"div",33),t.DNE(111,U,15,5,"div",30),t.k0s()()(),t.j41(112,"div",14)(113,"div",34)(114,"button",35),t.EFF(115,"Save"),t.k0s()()()()()()()}2&s&&(t.R7$(9),t.Y8G("authPermission",o.page+"_"+o.permissions.list),t.R7$(),t.Y8G("formGroup",o.frmCustomer),t.R7$(13),t.Y8G("control",o.frmCustomer.controls.customerCode)("message","Customer Code")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",o.frmCustomer.controls.customerName)("message","Customer Name")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("ngForOf",o.categories),t.R7$(),t.Y8G("control",o.frmCustomer.controls.customerCategoryId)("message","Customer Category")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("ngForOf",o.industries),t.R7$(),t.Y8G("control",o.frmCustomer.controls.industryId)("message","Industry")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("ngForOf",o.types),t.R7$(),t.Y8G("control",o.frmCustomer.controls.customerTypeId)("message","Customer Type")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("ngForOf",o.sources),t.R7$(),t.Y8G("control",o.frmCustomer.controls.sourceId)("message","Source/Referred By")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",o.frmCustomer.controls.phoneNo)("message","Phone No")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",o.frmCustomer.controls.website)("message","Website")("formSubmitted",o.isFormSubmitted),t.R7$(6),t.Y8G("control",o.frmCustomer.controls.gstinNo)("message","GSTIN No")("formSubmitted",o.isFormSubmitted),t.R7$(9),t.Y8G("ngForOf",o.customerDetails.controls),t.R7$(9),t.Y8G("ngForOf",o.customerContactDetails.controls),t.R7$(9),t.Y8G("ngForOf",o.customerUserDetails.controls),t.R7$(9),t.Y8G("ngForOf",o.customerTerritoryDetails.controls))},dependencies:[b.Sq,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,i.$R,i.v8,d.It,d.$z,d.iY,_.rl,_.nJ,N.fg,k.An,S.VO,D.wT,F.B,G.T,T.r],styles:[".card[_ngcontent-%COMP%]{margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:.75rem 1.25rem}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.mat-icon[_ngcontent-%COMP%]{vertical-align:middle}"]})}return r})();var g=a(33380),X=a(49239),O=a(74193);let y=(()=>{class r{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="customerCode,customerName,customerCategory,industry,customerType,phoneNo"}updateSearchTerms(e,s){this.searchData[e]=s,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["customer-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(u){return o.updateSearchTerms(o.searchKey,u)}),t.k0s()(),t.j41(3,"div",3)(4,"search-inactive",4),t.bIt("chkChanged",function(u){return o.updateSearchTerms("isActive",u)}),t.k0s()()()),2&s&&(t.R7$(2),t.Y8G("placeHolder","Search Customer Code, Name, Category, Industry, Type"))},dependencies:[X.D,O.$],encapsulation:2})}return r})();var M=a(96081);const P=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),H=()=>["../","add"],W=r=>["..","edit",r];function Z(r,m){1&r&&(t.j41(0,"a",20)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",21),t.k0s()),2&r&&t.Y8G("routerLink",t.lJ4(1,H))}function z(r,m){if(1&r&&(t.j41(0,"a",24)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&r){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,W,e.id))}}function J(r,m){if(1&r){const e=t.RV6();t.j41(0,"a",27),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2).row,n=t.XpG();return t.Njj(n.activateToggleCustomer(o,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function K(r,m){if(1&r){const e=t.RV6();t.j41(0,"a",27),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2).row,n=t.XpG();return t.Njj(n.activateToggleCustomer(o,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function Q(r,m){if(1&r&&(t.qex(0,25),t.DNE(1,J,3,0,"a",26)(2,K,3,0,"a",26),t.bVm()),2&r){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function q(r,m){if(1&r&&t.DNE(0,z,3,3,"a",22)(1,Q,3,2,"ng-container",23),2&r){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}const tt=[{path:"",component:C,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class r{constructor(e,s){this.customerService=e,this.notificationService=s,this.customerData=[],this.page=c.Wt.customer,this.permissions=c.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getCustomerData()}getCustomerData(){this.loading=!0,this.customerService.get().subscribe(e=>{this.customerData=e,this.loading=!1},e=>{console.log(e),this.loading=!1})}activateToggleCustomer(e,s){confirm(`Are you sure you want to ${s?"Activate":"Deactivate"} this customer?`)&&this.customerService.toggleActivate(e.id,s).subscribe(()=>{this.getCustomerData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(e){this.searchData=Object.assign({},e)}isActiveRow(e){return{"text-danger":!e.isActive}}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(p.m),t.rXU(v.tw))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["ng-component"]],decls:22,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Customer Code","prop","customerCode"],["name","Customer Name","prop","customerName"],["name","Category","prop","customerCategory"],["name","Industry","prop","industry"],["name","Type","prop","customerType"],["name","Phone No","prop","phoneNo"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Customer List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,Z,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"customer-search-panel",10),t.bIt("searchChanged",function(u){return o.updateSearch(u)}),t.k0s(),t.j41(12,"ngx-datatable",11),t.nI1(13,"searchtable"),t.nrm(14,"ngx-datatable-column",12)(15,"ngx-datatable-column",13)(16,"ngx-datatable-column",14)(17,"ngx-datatable-column",15)(18,"ngx-datatable-column",16)(19,"ngx-datatable-column",17),t.j41(20,"ngx-datatable-column",18),t.DNE(21,q,2,2,"ng-template",19),t.k0s()()()()()()()),2&s&&(t.R7$(8),t.Y8G("authPermission",o.page+"_"+o.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(13,12,o.customerData,o.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",o.loading)("scrollbarH",!0)("rowClass",o.isActiveRow)("messages",t.lJ4(15,P)),t.R7$(8),t.Y8G("sortable",!1))},dependencies:[b.bT,d.It,k.An,l.Wk,g.ge,g.ed,g.QI,F.B,y,M.j],encapsulation:2})}return r})(),canActivate:[c.LL],data:{page:c.Wt.customer,action:c.eZ.list,title:"Customer"}},{path:"add",canActivate:[c.LL],data:{page:c.Wt.customer,action:c.eZ.create,title:"Customer"},component:f},{path:"edit/:id",canActivate:[c.LL],data:{page:c.Wt.customer,action:c.eZ.edit,title:"Customer"},component:f}]}];let et=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.$C({type:r});static#o=this.\u0275inj=t.G2t({imports:[l.iI.forChild(tt),l.iI]})}return r})(),ot=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.$C({type:r});static#o=this.\u0275inj=t.G2t({providers:[p.m],imports:[E.Gg,et]})}return r})()}}]);