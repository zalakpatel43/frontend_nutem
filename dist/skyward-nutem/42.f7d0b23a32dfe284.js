"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[42],{16042:(U,f,i)=>{i.r(f),i.d(f,{GroupCodeModule:()=>M});var S=i(71774),l=i(18498),t=i(54438);let C=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(a,r){1&a&&t.nrm(0,"router-outlet")},dependencies:[l.n3],encapsulation:2})}return o})();var n=i(89417),s=i(4434);let m=(()=>{class o extends s.QP{constructor(e){super(e,"groupcode"),this._baseService=e}generateCode(){return this._baseService.get(`${s.T6.groupcode}/generateCode`)}static#t=this.\u0275fac=function(a){return new(a||o)(t.KVO(s.dD))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}return o})();var v=i(45794),p=i(88834),G=i(32102),k=i(99631),b=i(30220),F=i(58777),j=i(67133);function D(o,u){if(1&o){const e=t.RV6();t.j41(0,"a",21),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.cancel())}),t.EFF(1," View List "),t.k0s()}}let h=(()=>{class o{constructor(e,a,r,c,d){this.activatedRoute=e,this.router=a,this.formBuilder=r,this.groupCodeService=c,this.notificationService=d,this.page=s.Wt.group_code,this.permissions=s.eZ,this.createForm()}ngOnInit(){this.getGroupCodeRoute(),this.isEditMode||this.generateCode()}getGroupCodeRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{this.isEditMode=!s.ov.isEmpty(e.id),this.createForm(),this.isEditMode&&(this.groupCodeId=+e.id,this.getGroupCodeDetails())})}getGroupCodeDetails(){this.groupCodeService.getById(this.groupCodeId).subscribe(e=>{this.groupCodeData=e,this.setGroupCodeData()},e=>{console.log(e)})}setGroupCodeData(){this.frmGroupCode.patchValue(this.groupCodeData)}generateCode(){this.groupCodeService.generateCode().subscribe(e=>{this.frmGroupCode.patchValue({code:e})},e=>{console.log(e)})}createForm(){this.frmGroupCode=this.formBuilder.group({code:[{value:"",disabled:!0},[n.k0.required,n.k0.maxLength(50)]],name:["",[n.k0.required,n.k0.maxLength(100)]],groupName:["",[n.k0.required,n.k0.maxLength(100)]],priority:["",[n.k0.required,n.k0.min(1)]],value:["",[n.k0.maxLength(255)]]})}createGroupCode(){let e=this.frmGroupCode.getRawValue();this.groupCodeService.add(e).subscribe(()=>{this.cancel(),this.notificationService.success("Group Code saved successfully.")},a=>{this.error=a})}updateGroupCode(){let e=this.frmGroupCode.getRawValue();this.groupCodeData=Object.assign(this.groupCodeData,this.groupCodeData,e),this.groupCodeService.update(this.groupCodeData.id,this.groupCodeData).subscribe(()=>{this.cancel(),this.notificationService.success("Group Code updated successfully.")},a=>{this.error=a})}save(){this.isFormSubmitted=!0,!this.frmGroupCode.invalid&&(this.isEditMode?this.updateGroupCode():this.createGroupCode())}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#t=this.\u0275fac=function(a){return new(a||o)(t.rXU(l.nX),t.rXU(l.Ix),t.rXU(n.ze),t.rXU(m),t.rXU(v.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:48,vars:17,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","code"],[3,"control","message","formSubmitted"],["type","text","matInput","","formControlName","name"],["type","text","matInput","","formControlName","groupName"],["type","number","matInput","","formControlName","priority"],["type","text","matInput","","formControlName","value"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"]],template:function(a,r){if(1&a){const c=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.nrm(6,"i",7),t.EFF(7," Add/Edit Group Code"),t.k0s()(),t.j41(8,"div",8),t.DNE(9,D,2,0,"a",9),t.k0s()(),t.j41(10,"div")(11,"form",10,0),t.bIt("submit",function(){return t.eBV(c),t.Njj(r.save())}),t.j41(13,"div",11)(14,"div",12)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Code"),t.k0s(),t.nrm(18,"input",13)(19,"mat-validation-message",14),t.k0s()(),t.j41(20,"div",12)(21,"mat-form-field")(22,"mat-label"),t.EFF(23,"Name"),t.k0s(),t.nrm(24,"input",15)(25,"mat-validation-message",14),t.k0s()(),t.j41(26,"div",12)(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"Group Name"),t.k0s(),t.nrm(30,"input",16)(31,"mat-validation-message",14),t.k0s()(),t.j41(32,"div",12)(33,"mat-form-field")(34,"mat-label"),t.EFF(35,"Priority"),t.k0s(),t.nrm(36,"input",17)(37,"mat-validation-message",14),t.k0s()(),t.j41(38,"div",12)(39,"mat-form-field")(40,"mat-label"),t.EFF(41,"Value"),t.k0s(),t.nrm(42,"input",18)(43,"mat-validation-message",14),t.k0s()()(),t.j41(44,"div",11)(45,"div",19)(46,"button",20),t.EFF(47,"Save"),t.k0s()()()()()()()()}2&a&&(t.R7$(9),t.Y8G("authPermission",r.page+"_"+r.permissions.list),t.R7$(2),t.Y8G("formGroup",r.frmGroupCode),t.R7$(8),t.Y8G("control",r.frmGroupCode.controls.code)("message","Code")("formSubmitted",r.isFormSubmitted),t.R7$(6),t.Y8G("control",r.frmGroupCode.controls.name)("message","Name")("formSubmitted",r.isFormSubmitted),t.R7$(6),t.Y8G("control",r.frmGroupCode.controls.groupName)("message","Group Name")("formSubmitted",r.isFormSubmitted),t.R7$(6),t.Y8G("control",r.frmGroupCode.controls.priority)("message","Priority")("formSubmitted",r.isFormSubmitted),t.R7$(6),t.Y8G("control",r.frmGroupCode.controls.value)("message","Value")("formSubmitted",r.isFormSubmitted))},dependencies:[n.qT,n.me,n.Q0,n.BC,n.cb,n.j4,n.JD,p.It,p.$z,G.rl,G.nJ,k.fg,b.B,F.T,j.r],encapsulation:2})}return o})();var E=i(60177),T=i(99213),g=i(33380),x=i(49239),I=i(74193);let _=(()=>{class o{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="code,name,groupName,value"}updateSearchTerms(e,a){this.searchData[e]=a,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["group-code-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(a,r){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(d){return r.updateSearchTerms(r.searchKey,d)}),t.k0s()(),t.j41(3,"div",3)(4,"search-inactive",4),t.bIt("chkChanged",function(d){return r.updateSearchTerms("isActive",d)}),t.k0s()()()),2&a&&(t.R7$(2),t.Y8G("placeHolder","Search Code, Name, Group Name, Value"))},dependencies:[x.D,I.$],encapsulation:2})}return o})();var L=i(96081);const N=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),R=()=>["../","add"],w=o=>["..","edit",o];function V(o,u){1&o&&(t.j41(0,"a",19)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",20),t.k0s()),2&o&&t.Y8G("routerLink",t.lJ4(1,R))}function A(o,u){if(1&o&&(t.j41(0,"a",23)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&o){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,w,e.id))}}function $(o,u){if(1&o){const e=t.RV6();t.j41(0,"a",26),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).row,c=t.XpG();return t.Njj(c.activateToggleGroupCode(r,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function Y(o,u){if(1&o){const e=t.RV6();t.j41(0,"a",26),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).row,c=t.XpG();return t.Njj(c.activateToggleGroupCode(r,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function P(o,u){if(1&o&&(t.qex(0,24),t.DNE(1,$,3,0,"a",25)(2,Y,3,0,"a",25),t.bVm()),2&o){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function X(o,u){if(1&o&&t.DNE(0,A,3,3,"a",21)(1,P,3,2,"ng-container",22),2&o){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}const B=[{path:"",component:C,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,a){this.groupCodeService=e,this.notificationService=a,this.groupCodeData=[],this.page=s.Wt.group_code,this.permissions=s.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getGroupCodeData()}getGroupCodeData(){this.loading=!0,this.groupCodeService.get().subscribe(e=>{this.groupCodeData=e,this.loading=!1},e=>{console.log(e),this.loading=!1})}activateToggleGroupCode(e,a){confirm(`Are you sure you want to ${a?"Activate":"Deactivate"} this group code?`)&&this.groupCodeService.toggleActivate(e.id,a).subscribe(()=>{this.getGroupCodeData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(e){this.searchData=Object.assign({},e)}isActiveRow(e){return{"text-danger":!e.isActive}}static#t=this.\u0275fac=function(a){return new(a||o)(t.rXU(m),t.rXU(v.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:21,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Code","prop","code"],["name","Name","prop","name"],["name","Group Name","prop","groupName"],["name","Priority","prop","priority"],["name","Value","prop","value"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(a,r){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Group Code List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,V,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"group-code-search-panel",10),t.bIt("searchChanged",function(d){return r.updateSearch(d)}),t.k0s(),t.j41(12,"ngx-datatable",11),t.nI1(13,"searchtable"),t.nrm(14,"ngx-datatable-column",12)(15,"ngx-datatable-column",13)(16,"ngx-datatable-column",14)(17,"ngx-datatable-column",15)(18,"ngx-datatable-column",16),t.j41(19,"ngx-datatable-column",17),t.DNE(20,X,2,2,"ng-template",18),t.k0s()()()()()()()),2&a&&(t.R7$(8),t.Y8G("authPermission",r.page+"_"+r.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(13,12,r.groupCodeData,r.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",r.loading)("scrollbarH",!0)("rowClass",r.isActiveRow)("messages",t.lJ4(15,N)),t.R7$(7),t.Y8G("sortable",!1))},dependencies:[E.bT,p.It,T.An,l.Wk,g.ge,g.ed,g.QI,b.B,_,L.j],encapsulation:2})}return o})(),canActivate:[s.LL],data:{page:s.Wt.group_code,action:s.eZ.list,title:"Group Code"}},{path:"add",canActivate:[s.LL],data:{page:s.Wt.group_code,action:s.eZ.create,title:"Group Code"},component:h},{path:"edit/:id",canActivate:[s.LL],data:{page:s.Wt.group_code,action:s.eZ.edit,title:"Group Code"},component:h}]}];let H=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[l.iI.forChild(B),l.iI]})}return o})(),M=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({providers:[m],imports:[S.Gg,H]})}return o})()}}]);