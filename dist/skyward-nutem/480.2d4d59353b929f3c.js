"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[480],{26480:(we,_,s)=>{s.r(_),s.d(_,{InwardModule:()=>pe});var T=s(71774),p=s(18498),e=s(54438);let y=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,a){1&o&&e.nrm(0,"router-outlet")},dependencies:[p.n3],encapsulation:2})}return n})();var c=s(89417),d=s(4434),m=s(60177),S=s(52495);let f=(()=>{class n extends d.QP{constructor(t){super(t,"inward"),this._baseService=t}generateCode(){return this._baseService.get(`${d.T6.inward}/generateCode`)}getVendors(){return this._baseService.get(`${d.T6.vendormaster}`)}getProductUOMs(t){return this._baseService.get(`${d.T6.product}/productUOMs/${t}`)}static#e=this.\u0275fac=function(o){return new(o||n)(e.KVO(d.dD))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var b=s(45794),C=s(77048),D=s(50086),h=s(88834),g=s(32102),G=s(99631),F=s(99213),R=s(82798),A=s(86600),v=s(25084),k=s(30220),P=s(58777),V=s(67133),$=s(71893);function x(n,i){if(1&n){const t=e.RV6();e.j41(0,"a",36),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.cancel())}),e.EFF(1," View List "),e.k0s()}}function Y(n,i){if(1&n&&(e.j41(0,"mat-option",37),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function U(n,i){if(1&n&&(e.j41(0,"mat-option",37),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function O(n,i){if(1&n&&(e.j41(0,"mat-option",37),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function L(n,i){if(1&n&&(e.qex(0),e.j41(1,"mat-form-field")(2,"mat-label"),e.EFF(3,"Customer"),e.k0s(),e.j41(4,"mat-select",38),e.DNE(5,O,2,2,"mat-option",22),e.k0s()(),e.bVm()),2&n){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.customers)}}function X(n,i){if(1&n&&(e.j41(0,"mat-option",37),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function M(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"mat-form-field")(2,"mat-label"),e.EFF(3,"Vendor"),e.k0s(),e.j41(4,"mat-select",39),e.bIt("selectionChange",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.onVendorChange(a.value))}),e.DNE(5,X,2,2,"mat-option",22),e.k0s()(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.vendors)}}function B(n,i){if(1&n&&(e.j41(0,"mat-option",37),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function W(n,i){if(1&n&&(e.qex(0),e.j41(1,"mat-form-field")(2,"mat-label"),e.EFF(3,"Warehouse"),e.k0s(),e.j41(4,"mat-select",40),e.DNE(5,B,2,2,"mat-option",22),e.k0s()(),e.bVm()),2&n){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.warehouses)}}function Q(n,i){1&n&&(e.qex(0),e.EFF(1," // To be implemented "),e.bVm())}function H(n,i){if(1&n&&(e.j41(0,"mat-option",37),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function J(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"mat-form-field")(2,"mat-label"),e.EFF(3,"Purchase Order"),e.k0s(),e.j41(4,"mat-select",41),e.bIt("selectionChange",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.onPurchaseOrderChange(a.value))}),e.DNE(5,H,2,2,"mat-option",22),e.k0s()(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.purchaseOrders)}}function Z(n,i){1&n&&(e.qex(0),e.EFF(1," // To be implemented "),e.bVm())}function z(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",42)(1,"div",43)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Product"),e.k0s(),e.nrm(5,"input",44)(6,"input",45)(7,"input",46),e.k0s()(),e.j41(8,"div",43)(9,"mat-form-field")(10,"mat-label"),e.EFF(11,"Product Description"),e.k0s(),e.nrm(12,"input",47)(13,"mat-validation-message",48),e.k0s()(),e.j41(14,"div",49)(15,"mat-form-field")(16,"mat-label"),e.EFF(17,"Qty"),e.k0s(),e.nrm(18,"input",50)(19,"mat-validation-message",48),e.k0s()(),e.j41(20,"div",49)(21,"mat-form-field")(22,"mat-label"),e.EFF(23,"UOM"),e.k0s(),e.nrm(24,"input",51)(25,"input",52),e.k0s()(),e.j41(26,"div",49)(27,"mat-form-field")(28,"mat-label"),e.EFF(29,"PO Quantity"),e.k0s(),e.nrm(30,"input",53),e.k0s()(),e.j41(31,"div",49)(32,"mat-form-field")(33,"mat-label"),e.EFF(34,"Past Received Quantity"),e.k0s(),e.nrm(35,"input",54),e.k0s()(),e.j41(36,"div",49)(37,"mat-form-field")(38,"mat-label"),e.EFF(39,"Remaining Quantity"),e.k0s(),e.nrm(40,"input",55),e.k0s()(),e.j41(41,"div",17)(42,"mat-form-field")(43,"mat-label"),e.EFF(44,"Remarks"),e.k0s(),e.nrm(45,"textarea",56),e.k0s()(),e.j41(46,"div",57)(47,"button",58),e.bIt("click",function(){const a=e.eBV(t).index,r=e.XpG();return e.Njj(r.removeProductDetail(a))}),e.j41(48,"mat-icon"),e.EFF(49,"delete"),e.k0s()()(),e.nrm(50,"hr"),e.k0s()}if(2&n){const t=i.$implicit,o=i.index,a=e.XpG();e.Y8G("formGroupName",o),e.R7$(13),e.Y8G("control",t.get("productDescription"))("message","Product Description")("formSubmitted",a.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("quantity"))("message","Qty")("formSubmitted",a.isFormSubmitted)}}let w=(()=>{class n{constructor(t,o,a,r,l,u,he,fe,ge,ve){this.activatedRoute=t,this.router=o,this.formBuilder=a,this.inwardService=r,this.notificationService=l,this.listService=u,this.authService=he,this.datePipe=fe,this.inventoryTypeService=ge,this.purchaseOrderService=ve,this.page=d.Wt.inward,this.permissions=d.eZ,this.showCustomers=!1,this.showVendors=!0,this.showWarehouses=!1,this.fileOptions={maxAllowedFile:1,completeCallback:this.uploadCompleted.bind(this),onWhenAddingFileFailed:this.uploadFailed.bind(this)},this.fileUploader=new d.o7(this.fileOptions),this.loggedInUserId=this.authService.getBrowserUser().id,this.createForm()}ngOnInit(){this.getInwardRoute(),this.loadDropdowns(),this.isEditMode||this.generateInwardCode()}createForm(){this.frmInward=this.formBuilder.group({inwardCode:[{value:"",disabled:!0},[c.k0.required,c.k0.maxLength(32)]],inwardDate:[new Date,[c.k0.required]],inventoryTypeId:["",[c.k0.required]],fromWarehouseId:["",[c.k0.required]],customerId:[""],vendorId:[""],warehouseId:[""],purchaseOrderId:[""],supportingDocumentId:[""],supportingDocumentNo:[""],supportingDocumentDate:[""],remarks:[""],inwardProductDetails:this.formBuilder.array([])})}get inwardProductDetails(){return this.frmInward.get("inwardProductDetails")}getInwardRoute(){this.routerSub=this.activatedRoute.params.subscribe(t=>{this.isEditMode=!d.ov.isEmpty(t.id),this.isEditMode&&(this.inwardId=+t.id,this.getInwardDetails())})}getInwardDetails(){this.inwardService.getById(this.inwardId).subscribe(t=>{this.inwardData=t,this.onInventoryTypeChange(t.inventoryTypeId),this.onVendorChange(t.vendorId),this.setInwardData(t)},t=>{this.error=t})}setInwardData(t){this.frmInward.patchValue(t),t.inwardProductDetails&&t.inwardProductDetails.forEach(o=>{this.addProductDetail(o)})}addProductDetail(t){this.inwardProductDetails.push(this.formBuilder.group({id:[t?t.id:0],productId:[t?t.productId:"",[c.k0.required]],productName:[{value:t?t.productName:"",disabled:!0}],productDescription:[t?t.productDescription:"",[c.k0.required]],quantity:[t?t.quantity:"",[c.k0.required,c.k0.min(.01),c.k0.max(t?t.remainingQuantity:.01)]],uomId:[t?t.uomId:"",[c.k0.required]],uomName:[{value:t?t.uomName:"",disabled:!0}],poQuantity:[{value:t?t.poQuantity:"",disabled:!0}],pastReceivedQuantity:[{value:t?t.pastReceivedQuantity:"",disabled:!0}],remainingQuantity:[{value:t?t.remainingQuantity:"",disabled:!0}],remarks:[t?t.remarks:""]}))}removeProductDetail(t){this.inwardProductDetails.removeAt(t)}loadDropdowns(){this.inventoryTypeService.getInwardInventoryTypes().subscribe(t=>{this.inventoryTypes=t}),this.listService.getList("warehouses").subscribe(t=>{this.warehouses=t})}onInventoryTypeChange(t){this.inventoryTypeService.getById(t).subscribe(o=>{o.applicableToId===d.AH.ApplicableTo.Customer?(this.showCustomers=!0,this.showVendors=!1,this.showWarehouses=!1,this.listService.getList("customers").subscribe(a=>{this.customers=a},a=>{console.log(a)})):o.applicableToId===d.AH.ApplicableTo.Vendor?(this.showCustomers=!1,this.showVendors=!0,this.showWarehouses=!1,this.listService.getList("vendors").subscribe(a=>{this.vendors=a},a=>{console.log(a)})):o.applicableToId===d.AH.ApplicableTo.Warehouse&&(this.showCustomers=!1,this.showVendors=!1,this.showWarehouses=!0)},o=>{console.log(o)})}onVendorChange(t){this.purchaseOrderService.getPendingPurchaseOrdersByVendorId(t).subscribe(o=>{this.purchaseOrders=o},o=>{this.purchaseOrders=[],console.log(o)})}onPurchaseOrderChange(t){this.inwardProductDetails.clear(),this.purchaseOrderService.getPendingProductDetailsByPurchaseOrderId(t).subscribe(o=>{o.forEach(a=>{this.addProductDetail(a)})},o=>{console.log(o)})}onProductChange(t,o){this.inwardService.getProductUOMs(o).subscribe(a=>{const r=this.inwardProductDetails.at(t);r.get("uomId").setValue(a.id),r.get("uomName").setValue(a.name)})}generateInwardCode(){this.inwardService.generateCode().subscribe(t=>{this.frmInward.get("inwardCode").setValue(t)})}formatDate(t){return this.datePipe.transform(t,"yyyy-MM-dd")}uploadDocuments(t){this.fileUploader.uploadFiles({uploadType:S.Sq.Inward,id:t.toString()})}uploadCompleted(){this.cancel(),this.notificationService.success(this.isEditMode?"Inward updated successfully.":"Inward saved successfully.")}uploadFailed(){this.notificationService.warning("You are only allowed to upload jpg/jpeg/png/pdf/doc files.")}onSelectFile(t){}removeFile(t){this.inwardData&&(this.inwardData.supportingDocumentId=null,this.inwardData.supportingDocument=null,this.frmInward.controls.supportingDocumentId.setValue(null)),this.fileUploader.uploader.clearQueue()}canHideUploader(){let t=!1;return(this.inwardData&&this.inwardData.supportingDocumentId>0||this.fileUploader.hasFile())&&(t=!0),t}createInward(t){this.inwardService.add(t).subscribe(o=>{this.fileUploader.hasFile()?this.uploadDocuments(o.id):(this.cancel(),this.notificationService.success("Inward saved successfully."))},o=>{this.error=o})}updateInward(t){this.inwardService.update(this.inwardId,t).subscribe(o=>{this.fileUploader.hasFile()?this.uploadDocuments(o.id):(this.cancel(),this.notificationService.success("Inward updated successfully."))},o=>{this.error=o})}save(){if(this.isFormSubmitted=!0,this.frmInward.invalid)return;const t=this.frmInward.getRawValue();0!==t.inwardProductDetails.length?(t.id=this.inwardId,t.inwardDate=this.formatDate(t.inwardDate),t.supportingDocumentDate=this.formatDate(t.supportingDocumentDate),this.isEditMode?this.updateInward(t):this.createInward(t)):this.notificationService.warning("Please add at least one product detail.")}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(p.nX),e.rXU(p.Ix),e.rXU(c.ze),e.rXU(f),e.rXU(b.tw),e.rXU(d.aG),e.rXU(d.FJ),e.rXU(m.vh),e.rXU(C.C),e.rXU(D.j))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],features:[e.Jv_([m.QX,m.vh])],decls:88,vars:20,consts:[["form","ngForm"],["picker1",""],["picker2",""],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","inwardCode","readonly",""],["matInput","","formControlName","inwardDate",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","fromWarehouseId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","inventoryTypeId",3,"selectionChange"],[4,"ngIf"],["type","text","matInput","","formControlName","supportingDocumentNo"],["matInput","","formControlName","supportingDocumentDate",3,"matDatepicker"],["type","hidden","formControlName","supportingDocumentId"],[3,"removeDocument","selectedFile","documents","isEditMode","uploader","label","hideUploader"],[1,"col-md-8"],["matInput","","formControlName","remarks","rows","2"],[1,"card-header","d-flex","align-items-center","justify-content-between"],["formArrayName","inwardProductDetails"],["class","row mt-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[3,"value"],["formControlName","customerId"],["formControlName","vendorId",3,"selectionChange"],["formControlName","warehouseId"],["formControlName","purchaseOrderId",3,"selectionChange"],[1,"row","mt-3",3,"formGroupName"],[1,"col-md-3"],["type","hidden","formControlName","id"],["type","hidden","formControlName","productId"],["type","text","matInput","","formControlName","productName","readonly",""],["type","text","matInput","","formControlName","productDescription"],[3,"control","message","formSubmitted"],[1,"col-md-2"],["type","number","matInput","","formControlName","quantity"],["type","hidden","formControlName","uomId"],["type","text","matInput","","formControlName","uomName","readonly",""],["type","number","matInput","","formControlName","poQuantity","readonly",""],["type","number","matInput","","formControlName","pastReceivedQuantity","readonly",""],["type","number","matInput","","formControlName","remainingQuantity","readonly",""],["matInput","","formControlName","remarks","rows","1"],[1,"col-md-1","d-flex","align-items-center"],["type","button","mat-icon-button","","color","warn",3,"click"]],template:function(o,a){if(1&o){const r=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h4",8),e.nrm(6,"i",9),e.EFF(7," Add/Edit Inward"),e.k0s()(),e.j41(8,"div",10),e.DNE(9,x,2,0,"a",11),e.k0s()(),e.j41(10,"form",12,0),e.bIt("submit",function(){return e.eBV(r),e.Njj(a.save())}),e.j41(12,"div",13)(13,"div",14)(14,"h5",8),e.EFF(15,"Basic Details"),e.k0s()(),e.j41(16,"div",15)(17,"div",16)(18,"div",17)(19,"mat-form-field")(20,"mat-label"),e.EFF(21,"Inward Code"),e.k0s(),e.nrm(22,"input",18),e.k0s()(),e.j41(23,"div",17)(24,"mat-form-field")(25,"mat-label"),e.EFF(26,"Inward Date"),e.k0s(),e.nrm(27,"input",19)(28,"mat-datepicker-toggle",20)(29,"mat-datepicker",null,1),e.k0s()(),e.j41(31,"div",17)(32,"mat-form-field")(33,"mat-label"),e.EFF(34,"From Warehouse"),e.k0s(),e.j41(35,"mat-select",21),e.DNE(36,Y,2,2,"mat-option",22),e.k0s()()()(),e.j41(37,"div",16)(38,"div",17)(39,"mat-form-field")(40,"mat-label"),e.EFF(41,"Inventory Type"),e.k0s(),e.j41(42,"mat-select",23),e.bIt("selectionChange",function(u){return e.eBV(r),e.Njj(a.onInventoryTypeChange(u.value))}),e.DNE(43,U,2,2,"mat-option",22),e.k0s()()(),e.j41(44,"div",17),e.DNE(45,L,6,1,"ng-container",24)(46,M,6,1,"ng-container",24)(47,W,6,1,"ng-container",24),e.k0s(),e.j41(48,"div",17),e.DNE(49,Q,2,0,"ng-container",24)(50,J,6,1,"ng-container",24)(51,Z,2,0,"ng-container",24),e.k0s()(),e.j41(52,"div",16)(53,"div",17)(54,"mat-form-field")(55,"mat-label"),e.EFF(56,"Supporting Document No"),e.k0s(),e.nrm(57,"input",25),e.k0s()(),e.j41(58,"div",17)(59,"mat-form-field")(60,"mat-label"),e.EFF(61,"Supporting Document Date"),e.k0s(),e.nrm(62,"input",26)(63,"mat-datepicker-toggle",20)(64,"mat-datepicker",null,2),e.k0s()(),e.j41(66,"div",17)(67,"label"),e.EFF(68,"Supporting Document"),e.k0s(),e.nrm(69,"input",27),e.j41(70,"file-uploader",28),e.bIt("removeDocument",function(u){return e.eBV(r),e.Njj(a.removeFile(u))})("selectedFile",function(u){return e.eBV(r),e.Njj(a.onSelectFile(u))}),e.k0s()()(),e.j41(71,"div",16)(72,"div",29)(73,"mat-form-field")(74,"mat-label"),e.EFF(75,"Remarks"),e.k0s(),e.nrm(76,"textarea",30),e.k0s()()()()(),e.j41(77,"div",13)(78,"div",31)(79,"h5",8),e.EFF(80,"Product Details"),e.k0s()(),e.j41(81,"div",15)(82,"div",32),e.DNE(83,z,51,7,"div",33),e.k0s()()(),e.j41(84,"div",16)(85,"div",34)(86,"button",35),e.EFF(87,"Save"),e.k0s()()()()()()()}if(2&o){const r=e.sdS(30),l=e.sdS(65);e.R7$(9),e.Y8G("authPermission",a.page+"_"+a.permissions.list),e.R7$(),e.Y8G("formGroup",a.frmInward),e.R7$(17),e.Y8G("matDatepicker",r),e.R7$(),e.Y8G("for",r),e.R7$(8),e.Y8G("ngForOf",a.warehouses),e.R7$(7),e.Y8G("ngForOf",a.inventoryTypes),e.R7$(2),e.Y8G("ngIf",a.showCustomers),e.R7$(),e.Y8G("ngIf",a.showVendors),e.R7$(),e.Y8G("ngIf",a.showWarehouses),e.R7$(2),e.Y8G("ngIf",a.showCustomers),e.R7$(),e.Y8G("ngIf",a.showVendors),e.R7$(),e.Y8G("ngIf",a.showWarehouses),e.R7$(11),e.Y8G("matDatepicker",l),e.R7$(),e.Y8G("for",l),e.R7$(7),e.Y8G("documents",null==a.inwardData?null:a.inwardData.supportingDocument)("isEditMode",a.isEditMode)("uploader",null==a.fileUploader?null:a.fileUploader.uploader)("label","")("hideUploader",a.canHideUploader()),e.R7$(13),e.Y8G("ngForOf",a.inwardProductDetails.controls)}},dependencies:[m.Sq,m.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.j4,c.JD,c.$R,c.v8,h.It,h.$z,h.iY,g.rl,g.nJ,g.yw,G.fg,F.An,R.VO,A.wT,v.Vh,v.bZ,v.bU,k.B,P.T,V.r,$.A],encapsulation:2})}return n})();var E=s(62288),I=s(33380),K=s(49239),q=s(74193);let j=(()=>{class n{constructor(){this.searchChanged=new e.bkB,this.searchData={},this.searchKey="inwardCode,inventoryTypeName,fromWarehouseName,customerName,vendorName,warehouseName,supportingDocumentNo"}updateSearchTerms(t,o){this.searchData[t]=o,this.searchChanged.emit(this.searchData)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["inward-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"search-text",2),e.bIt("textSearchEntered",function(l){return a.updateSearchTerms(a.searchKey,l)}),e.k0s()(),e.j41(3,"div",3)(4,"search-inactive",4),e.bIt("chkChanged",function(l){return a.updateSearchTerms("isActive",l)}),e.k0s()()()),2&o&&(e.R7$(2),e.Y8G("placeHolder","Search Inward Code, Inventory Type From Warehouse, Customer Name, Vendor Name, Warehouse, Supporting Document No"))},dependencies:[K.D,q.$],encapsulation:2})}return n})();var ee=s(96081);const te=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),ne=()=>["../","add"],ae=n=>["..","edit",n];function oe(n,i){1&n&&(e.j41(0,"a",26)(1,"span"),e.EFF(2,"Add New"),e.k0s(),e.nrm(3,"i",27),e.k0s()),2&n&&e.Y8G("routerLink",e.lJ4(1,ne))}function re(n,i){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=i.value;e.R7$(),e.JRh(e.i5U(2,1,t,"dd/MM/yyyy"))}}function ie(n,i){if(1&n&&(e.j41(0,"a",30)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()),2&n){const t=e.XpG().row;e.Y8G("routerLink",e.eq3(1,ae,t.id))}}function se(n,i){if(1&n){const t=e.RV6();e.j41(0,"a",33),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2).row,r=e.XpG();return e.Njj(r.activateToggleInward(a,!1))}),e.j41(1,"mat-icon"),e.EFF(2,"lock"),e.k0s()()}}function de(n,i){if(1&n){const t=e.RV6();e.j41(0,"a",33),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2).row,r=e.XpG();return e.Njj(r.activateToggleInward(a,!0))}),e.j41(1,"mat-icon"),e.EFF(2,"lock_open"),e.k0s()()}}function ce(n,i){if(1&n&&(e.qex(0,31),e.DNE(1,se,3,0,"a",32)(2,de,3,0,"a",32),e.bVm()),2&n){const t=e.XpG().row;e.R7$(),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive)}}function le(n,i){if(1&n&&e.DNE(0,ie,3,3,"a",28)(1,ce,3,2,"ng-container",29),2&n){const t=e.XpG();e.Y8G("authPermission",t.page+"_"+t.permissions.edit),e.R7$(),e.Y8G("authPermission",t.page+"_"+t.permissions.active)}}const me=[{path:"",component:y,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(t,o,a){this.inwardService=t,this.notificationService=o,this.datePipe=a,this.inwardData=[],this.page=d.Wt.inward,this.permissions=d.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getInwardData()}getInwardData(){this.loading=!0,this.inwardService.get().subscribe(t=>{this.inwardData=t,this.loading=!1},t=>{console.log(t),this.loading=!1})}exportToExcel(){let t=this.inwardData.map(r=>({Id:r.id,"Inward Code":r.inwardCode,"Inward Date":this.datePipe.transform(r.inwardDate,"dd/MM/yyyy"),"Inventory Type":r.inventoryTypeName,"From Warehouse":r.fromWarehouseName,"Customer Name":r.customerName,"Vendor Name":r.vendorName,Warehouse:r.warehouseName,"Purchase Order No":r.purchaseOrderCode,"Supporting Document No":r.supportingDocumentNo,"Supporting Document Date":this.datePipe.transform(r.supportingDocumentDate,"dd/MM/yyyy"),Active:r.isActive?"Yes":"No"}));const a={Sheets:{data:E.Wp.json_to_sheet(t)},SheetNames:["data"]};E._h(a,"Inwards.xlsx")}activateToggleInward(t,o){confirm(`Are you sure you want to ${o?"Activate":"Deactivate"} this inward?`)&&this.inwardService.toggleActivate(t.id,o).subscribe(()=>{this.getInwardData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(t){this.searchData=Object.assign({},t)}isActiveRow(t){return{"text-danger":!t.isActive}}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(f),e.rXU(b.tw),e.rXU(m.vh))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],features:[e.Jv_([m.vh])],decls:30,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row","mb-3"],[1,"col-lg-9"],[3,"searchChanged"],[1,"col-lg-3"],["mat-flat-button","","color","primary",1,"app-button",2,"float","right",3,"click"],[1,"row"],[1,"col-12"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Inward Code","prop","inwardCode"],["name","Inward Date","prop","inwardDate"],["ngx-datatable-cell-template",""],["name","From Warehouse","prop","fromWarehouseName"],["name","Inventory Type","prop","inventoryTypeName"],["name","Customer Name","prop","customerName"],["name","Vendor Name","prop","vendorName"],["name","Warehouse","prop","warehouseName"],["name","Supporting Document No","prop","supportingDocumentNo"],["name","Actions",3,"sortable"],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e.EFF(6,"Inward List"),e.k0s()(),e.j41(7,"div",6),e.DNE(8,oe,4,2,"a",7),e.k0s()(),e.j41(9,"div",8)(10,"div",9)(11,"inward-search-panel",10),e.bIt("searchChanged",function(l){return a.updateSearch(l)}),e.k0s()(),e.j41(12,"div",11)(13,"button",12),e.bIt("click",function(){return a.exportToExcel()}),e.EFF(14," Export to Excel "),e.k0s()()(),e.j41(15,"div",13)(16,"div",14)(17,"ngx-datatable",15),e.nI1(18,"searchtable"),e.nrm(19,"ngx-datatable-column",16),e.j41(20,"ngx-datatable-column",17),e.DNE(21,re,3,4,"ng-template",18),e.k0s(),e.nrm(22,"ngx-datatable-column",19)(23,"ngx-datatable-column",20)(24,"ngx-datatable-column",21)(25,"ngx-datatable-column",22)(26,"ngx-datatable-column",23)(27,"ngx-datatable-column",24),e.j41(28,"ngx-datatable-column",25),e.DNE(29,le,2,2,"ng-template",18),e.k0s()()()()()()()),2&o&&(e.R7$(8),e.Y8G("authPermission",a.page+"_"+a.permissions.create),e.R7$(9),e.Y8G("rows",e.i5U(18,12,a.inwardData,a.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",a.loading)("scrollbarH",!0)("rowClass",a.isActiveRow)("messages",e.lJ4(15,te)),e.R7$(11),e.Y8G("sortable",!1))},dependencies:[m.bT,h.It,h.$z,F.An,p.Wk,I.ge,I.ed,I.QI,k.B,j,m.vh,ee.j],encapsulation:2})}return n})(),canActivate:[d.LL],data:{page:d.Wt.inward,action:d.eZ.list,title:"Inward"}},{path:"add",canActivate:[d.LL],data:{page:d.Wt.inward,action:d.eZ.create,title:"Inward"},component:w},{path:"edit/:id",canActivate:[d.LL],data:{page:d.Wt.inward,action:d.eZ.edit,title:"Inward"},component:w}]}];let ue=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[p.iI.forChild(me),p.iI]})}return n})(),pe=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[f,C.C,D.j],imports:[T.Gg,ue]})}return n})()}}]);