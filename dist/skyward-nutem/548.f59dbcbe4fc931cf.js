"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[548],{59548:(vt,b,s)=>{s.r(b),s.d(b,{OutwardModule:()=>pt});var E=s(71774),p=s(18498),t=s(54438);let y=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,a){1&i&&t.nrm(0,"router-outlet")},dependencies:[p.n3],encapsulation:2})}return o})();var u=s(89417),d=s(4434),l=s(60177),N=s(52495);let f=(()=>{class o extends d.QP{constructor(e){super(e,"outward"),this._baseService=e}generateCode(){return this._baseService.get(`${d.T6.outward}/generateCode`)}getVendors(){return this._baseService.get(`${d.T6.vendormaster}`)}getProductUOMs(e){return this._baseService.get(`${d.T6.product}/productUOMs/${e}`)}getPendingMaterialRequisitionsByCustomerId(e){return this._baseService.get(`${d.T6.outward}/PendingMaterialRequisitionsByCustomerId/${e}`)}static#t=this.\u0275fac=function(i){return new(i||o)(t.KVO(d.dD))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}return o})();var C=s(45794),k=s(77048),h=s(88834),g=s(32102),T=s(99631),D=s(99213),S=s(82798),R=s(86600),v=s(25084),F=s(30220),G=s(58777),A=s(67133),$=s(71893);function P(o,r){if(1&o){const e=t.RV6();t.j41(0,"a",37),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(1," View List "),t.k0s()}}function V(o,r){if(1&o&&(t.j41(0,"mat-option",38),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function x(o,r){if(1&o&&(t.j41(0,"mat-option",38),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function Y(o,r){if(1&o&&(t.j41(0,"mat-option",38),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function U(o,r){if(1&o){const e=t.RV6();t.qex(0),t.j41(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Customer"),t.k0s(),t.j41(4,"mat-select",39),t.bIt("selectionChange",function(a){t.eBV(e);const n=t.XpG();return t.Njj(n.onCustomerChange(a.value))}),t.DNE(5,Y,2,2,"mat-option",22),t.k0s()(),t.bVm()}if(2&o){const e=t.XpG();t.R7$(5),t.Y8G("ngForOf",e.customers)}}function M(o,r){if(1&o&&(t.j41(0,"mat-option",38),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function L(o,r){if(1&o&&(t.qex(0),t.j41(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Vendor"),t.k0s(),t.j41(4,"mat-select",40),t.DNE(5,M,2,2,"mat-option",22),t.k0s()(),t.bVm()),2&o){const e=t.XpG();t.R7$(5),t.Y8G("ngForOf",e.vendors)}}function B(o,r){if(1&o&&(t.j41(0,"mat-option",38),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function X(o,r){if(1&o&&(t.qex(0),t.j41(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Warehouse"),t.k0s(),t.j41(4,"mat-select",41),t.DNE(5,B,2,2,"mat-option",22),t.k0s()(),t.bVm()),2&o){const e=t.XpG();t.R7$(5),t.Y8G("ngForOf",e.warehouses)}}function W(o,r){if(1&o&&(t.j41(0,"mat-option",38),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function Q(o,r){if(1&o){const e=t.RV6();t.qex(0),t.j41(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Material Requisition"),t.k0s(),t.j41(4,"mat-select",42),t.bIt("selectionChange",function(a){t.eBV(e);const n=t.XpG();return t.Njj(n.onMaterialRequisitionChange(a.value))}),t.DNE(5,W,2,2,"mat-option",22),t.k0s()(),t.bVm()}if(2&o){const e=t.XpG();t.R7$(5),t.Y8G("ngForOf",e.materialRequisitions)}}function H(o,r){1&o&&t.eu8(0)}function q(o,r){1&o&&t.eu8(0)}function J(o,r){if(1&o&&(t.j41(0,"mat-option",38),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.Lme(" ",e.name," - ",e.code," ")}}function Z(o,r){if(1&o){const e=t.RV6();t.j41(0,"div",43)(1,"div",44)(2,"mat-form-field"),t.nrm(3,"input",45),t.j41(4,"mat-label"),t.EFF(5,"Product"),t.k0s(),t.j41(6,"mat-select",46),t.bIt("selectionChange",function(a){const n=t.eBV(e).index,c=t.XpG();return t.Njj(c.onProductChange(n,a.value))}),t.DNE(7,J,2,3,"mat-option",22),t.k0s()()(),t.j41(8,"div",44)(9,"mat-form-field")(10,"mat-label"),t.EFF(11,"Product Description"),t.k0s(),t.nrm(12,"input",47)(13,"mat-validation-message",48),t.k0s()(),t.j41(14,"div",49)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Qty"),t.k0s(),t.nrm(18,"input",50)(19,"mat-validation-message",48),t.k0s()(),t.j41(20,"div",49)(21,"mat-form-field")(22,"mat-label"),t.EFF(23,"UOM"),t.k0s(),t.nrm(24,"input",51)(25,"input",52),t.k0s()(),t.j41(26,"div",49)(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"MR Quantity"),t.k0s(),t.nrm(30,"input",53),t.k0s()(),t.j41(31,"div",49)(32,"mat-form-field")(33,"mat-label"),t.EFF(34,"Past Issued Quantity"),t.k0s(),t.nrm(35,"input",54),t.k0s()(),t.j41(36,"div",49)(37,"mat-form-field")(38,"mat-label"),t.EFF(39,"Remaining Quantity"),t.k0s(),t.nrm(40,"input",55),t.k0s()(),t.j41(41,"div",49)(42,"mat-form-field")(43,"mat-label"),t.EFF(44,"Stock Quantity"),t.k0s(),t.nrm(45,"input",56),t.k0s()(),t.j41(46,"div",17)(47,"mat-form-field")(48,"mat-label"),t.EFF(49,"Remarks"),t.k0s(),t.nrm(50,"textarea",57),t.k0s()(),t.j41(51,"div",58)(52,"button",59),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.addProductDetail())}),t.j41(53,"mat-icon"),t.EFF(54,"add"),t.k0s()(),t.j41(55,"button",59),t.bIt("click",function(){const a=t.eBV(e).index,n=t.XpG();return t.Njj(n.removeProductDetail(a))}),t.j41(56,"mat-icon"),t.EFF(57,"delete"),t.k0s()()(),t.nrm(58,"hr"),t.k0s()}if(2&o){const e=r.$implicit,i=r.index,a=t.XpG();t.Y8G("formGroupName",i),t.R7$(7),t.Y8G("ngForOf",a.products),t.R7$(6),t.Y8G("control",e.get("productDescription"))("message","Product Description")("formSubmitted",a.isFormSubmitted),t.R7$(6),t.Y8G("control",e.get("quantity"))("message","Qty")("formSubmitted",a.isFormSubmitted)}}let w=(()=>{class o{constructor(e,i,a,n,c,m,ht,ft,gt){this.activatedRoute=e,this.router=i,this.formBuilder=a,this.outwardService=n,this.notificationService=c,this.listService=m,this.authService=ht,this.datePipe=ft,this.inventoryTypeService=gt,this.page=d.Wt.outward,this.permissions=d.eZ,this.uoms=[],this.showCustomers=!0,this.showVendors=!1,this.showWarehouses=!1,this.fileOptions={maxAllowedFile:1,completeCallback:this.uploadCompleted.bind(this),onWhenAddingFileFailed:this.uploadFailed.bind(this)},this.fileUploader=new d.o7(this.fileOptions),this.loggedInUserId=this.authService.getBrowserUser().id,this.createForm()}ngOnInit(){this.getOutwardRoute(),this.loadDropdowns(),this.isEditMode||this.generateOutwardCode()}createForm(){this.frmOutward=this.formBuilder.group({outwardCode:[{value:"",disabled:!0},[u.k0.required,u.k0.maxLength(32)]],outwardDate:[new Date,[u.k0.required]],inventoryTypeId:["",[u.k0.required]],fromWarehouseId:["",[u.k0.required]],customerId:[""],vendorId:[""],warehouseId:[""],materialRequisitionId:[""],address:[""],billingAddress:[""],supportingDocumentId:[""],supportingDocumentNo:[""],supportingDocumentDate:[""],remarks:[""],outwardProductDetails:this.formBuilder.array([])})}get outwardProductDetails(){return this.frmOutward.get("outwardProductDetails")}getOutwardRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{this.isEditMode=!d.ov.isEmpty(e.id),this.isEditMode&&(this.outwardId=+e.id,this.getOutwardDetails())})}getOutwardDetails(){this.outwardService.getById(this.outwardId).subscribe(e=>{this.outwardData=e,this.onInventoryTypeChange(e.inventoryTypeId),this.onCustomerChange(e.customerId),this.setOutwardData(e)},e=>{this.error=e})}setOutwardData(e){this.frmOutward.patchValue(e),e.outwardProductDetails&&e.outwardProductDetails.forEach(i=>{this.addProductDetail(i)})}addProductDetail(e){this.outwardProductDetails.push(this.formBuilder.group({id:[e?e.id:0],productId:[e?e.productId:"",[u.k0.required]],productName:[{value:e?e.productName:"",disabled:!0}],productDescription:[e?e.productDescription:"",[u.k0.required]],quantity:[e?e.quantity:"",[u.k0.required,u.k0.min(.01),u.k0.max(e?e.remainingQuantity:1)]],uomId:[e?e.uomId:"",[u.k0.required]],uomName:[{value:e?e.uomName:"",disabled:!0}],mrQuantity:[{value:e?e.mrQuantity:1,disabled:!0}],pastIssuedQuantity:[{value:e?e.pastIssuedQuantity:0,disabled:!0}],remainingQuantity:[{value:e?e.remainingQuantity:1,disabled:!0}],stockQuantity:[{value:e?e.stockQuantity:0,disabled:!0}],remarks:[e?e.remarks:""]}))}removeProductDetail(e){this.outwardProductDetails.removeAt(e)}loadDropdowns(){this.inventoryTypeService.getOutwardInventoryTypes().subscribe(e=>{this.inventoryTypes=e}),this.listService.getList("warehouses").subscribe(e=>{this.warehouses=e}),this.listService.getList("products").subscribe(e=>{this.products=e})}onInventoryTypeChange(e){this.inventoryTypeService.getById(e).subscribe(i=>{i.applicableToId===d.AH.ApplicableTo.Customer?(this.showCustomers=!0,this.showVendors=!1,this.showWarehouses=!1,this.listService.getList("customers").subscribe(a=>{this.customers=a},a=>{console.log(a)})):i.applicableToId===d.AH.ApplicableTo.Vendor?(this.showCustomers=!1,this.showVendors=!0,this.showWarehouses=!1,this.listService.getList("vendors").subscribe(a=>{this.vendors=a},a=>{console.log(a)})):i.applicableToId===d.AH.ApplicableTo.Warehouse&&(this.showCustomers=!1,this.showVendors=!1,this.showWarehouses=!0)},i=>{console.log(i)})}onCustomerChange(e){this.outwardService.getPendingMaterialRequisitionsByCustomerId(e).subscribe(i=>{this.materialRequisitions=i},i=>{this.materialRequisitions=[],console.log(i)})}onMaterialRequisitionChange(e){this.outwardProductDetails.clear()}onProductChange(e,i){this.outwardService.getProductUOMs(i).subscribe(a=>{const n=this.outwardProductDetails.at(e);n.get("uomId").setValue(a.id),n.get("uomName").setValue(a.name)})}generateOutwardCode(){this.outwardService.generateCode().subscribe(e=>{this.frmOutward.get("outwardCode").setValue(e)})}formatDate(e){return this.datePipe.transform(e,"yyyy-MM-dd")}uploadDocuments(e){this.fileUploader.uploadFiles({uploadType:N.Sq.Outward,id:e.toString()})}uploadCompleted(){this.cancel(),this.notificationService.success(this.isEditMode?"Outward updated successfully.":"Outward saved successfully.")}uploadFailed(){this.notificationService.warning("You are only allowed to upload jpg/jpeg/png/pdf/doc files.")}onSelectFile(e){}removeFile(e){this.outwardData&&(this.outwardData.supportingDocumentId=null,this.outwardData.supportingDocument=null),this.fileUploader.uploader.clearQueue()}canHideUploader(){let e=!1;return(this.outwardData&&this.outwardData.supportingDocumentId>0||this.fileUploader.hasFile())&&(e=!0),e}createOutward(e){this.outwardService.add(e).subscribe(i=>{this.fileUploader.hasFile()?this.uploadDocuments(i.id):(this.cancel(),this.notificationService.success("Outward saved successfully."))},i=>{this.error=i})}updateOutward(e){this.outwardService.update(this.outwardId,e).subscribe(i=>{this.fileUploader.hasFile()?this.uploadDocuments(i.id):(this.cancel(),this.notificationService.success("Outward updated successfully."))},i=>{this.error=i})}save(){if(this.isFormSubmitted=!0,this.frmOutward.invalid)return;const e=this.frmOutward.getRawValue();0!==e.outwardProductDetails.length?(e.id=this.outwardId,e.outwardDate=this.formatDate(e.outwardDate),e.supportingDocumentDate=this.formatDate(e.supportingDocumentDate),this.isEditMode?this.updateOutward(e):this.createOutward(e)):this.notificationService.warning("Please add at least one product detail.")}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(p.nX),t.rXU(p.Ix),t.rXU(u.ze),t.rXU(f),t.rXU(C.tw),t.rXU(d.aG),t.rXU(d.FJ),t.rXU(l.vh),t.rXU(k.C))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],features:[t.Jv_([l.QX,l.vh])],decls:90,vars:20,consts:[["form","ngForm"],["picker1",""],["picker2",""],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","outwardCode","readonly",""],["matInput","","formControlName","outwardDate",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","fromWarehouseId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","inventoryTypeId",3,"selectionChange"],[4,"ngIf"],["type","text","matInput","","formControlName","supportingDocumentNo"],["matInput","","formControlName","supportingDocumentDate",3,"matDatepicker"],["type","hidden","formControlName","supportingDocumentId"],[3,"removeDocument","selectedFile","documents","isEditMode","uploader","label","hideUploader"],[1,"col-md-8"],["matInput","","formControlName","remarks","rows","2"],[1,"card-header","d-flex","align-items-center","justify-content-between"],["type","button","mat-flat-button","","color","primary",3,"click"],["formArrayName","outwardProductDetails"],["class","row mt-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[3,"value"],["formControlName","customerId",3,"selectionChange"],["formControlName","vendorId"],["formControlName","warehouseId"],["formControlName","materialRequisitionId",3,"selectionChange"],[1,"row","mt-3",3,"formGroupName"],[1,"col-md-3"],["type","hidden","formControlName","id"],["formControlName","productId",3,"selectionChange"],["type","text","matInput","","formControlName","productDescription"],[3,"control","message","formSubmitted"],[1,"col-md-2"],["type","number","matInput","","formControlName","quantity"],["type","hidden","formControlName","uomId"],["type","text","matInput","","formControlName","uomName","readonly",""],["type","number","matInput","","formControlName","mrQuantity","readonly",""],["type","number","matInput","","formControlName","pastIssuedQuantity","readonly",""],["type","number","matInput","","formControlName","remainingQuantity","readonly",""],["type","number","matInput","","formControlName","stockQuantity","readonly",""],["matInput","","formControlName","remarks","rows","1"],[1,"col-md-1","d-flex","align-items-center"],["type","button","mat-icon-button","","color","warn",3,"click"]],template:function(i,a){if(1&i){const n=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h4",8),t.nrm(6,"i",9),t.EFF(7," Add/Edit Outward"),t.k0s()(),t.j41(8,"div",10),t.DNE(9,P,2,0,"a",11),t.k0s()(),t.j41(10,"form",12,0),t.bIt("submit",function(){return t.eBV(n),t.Njj(a.save())}),t.j41(12,"div",13)(13,"div",14)(14,"h5",8),t.EFF(15,"Basic Details"),t.k0s()(),t.j41(16,"div",15)(17,"div",16)(18,"div",17)(19,"mat-form-field")(20,"mat-label"),t.EFF(21,"Outward Code"),t.k0s(),t.nrm(22,"input",18),t.k0s()(),t.j41(23,"div",17)(24,"mat-form-field")(25,"mat-label"),t.EFF(26,"Outward Date"),t.k0s(),t.nrm(27,"input",19)(28,"mat-datepicker-toggle",20)(29,"mat-datepicker",null,1),t.k0s()(),t.j41(31,"div",17)(32,"mat-form-field")(33,"mat-label"),t.EFF(34,"From Warehouse"),t.k0s(),t.j41(35,"mat-select",21),t.DNE(36,V,2,2,"mat-option",22),t.k0s()()()(),t.j41(37,"div",16)(38,"div",17)(39,"mat-form-field")(40,"mat-label"),t.EFF(41,"Inventory Type"),t.k0s(),t.j41(42,"mat-select",23),t.bIt("selectionChange",function(m){return t.eBV(n),t.Njj(a.onInventoryTypeChange(m.value))}),t.DNE(43,x,2,2,"mat-option",22),t.k0s()()(),t.j41(44,"div",17),t.DNE(45,U,6,1,"ng-container",24)(46,L,6,1,"ng-container",24)(47,X,6,1,"ng-container",24),t.k0s(),t.j41(48,"div",17),t.DNE(49,Q,6,1,"ng-container",24)(50,H,1,0,"ng-container",24)(51,q,1,0,"ng-container",24),t.k0s()(),t.j41(52,"div",16)(53,"div",17)(54,"mat-form-field")(55,"mat-label"),t.EFF(56,"Supporting Document No"),t.k0s(),t.nrm(57,"input",25),t.k0s()(),t.j41(58,"div",17)(59,"mat-form-field")(60,"mat-label"),t.EFF(61,"Supporting Document Date"),t.k0s(),t.nrm(62,"input",26)(63,"mat-datepicker-toggle",20)(64,"mat-datepicker",null,2),t.k0s()(),t.j41(66,"div",17)(67,"label"),t.EFF(68,"Supporting Document"),t.k0s(),t.nrm(69,"input",27),t.j41(70,"file-uploader",28),t.bIt("removeDocument",function(m){return t.eBV(n),t.Njj(a.removeFile(m))})("selectedFile",function(m){return t.eBV(n),t.Njj(a.onSelectFile(m))}),t.k0s()()(),t.j41(71,"div",16)(72,"div",29)(73,"mat-form-field")(74,"mat-label"),t.EFF(75,"Remarks"),t.k0s(),t.nrm(76,"textarea",30),t.k0s()()()()(),t.j41(77,"div",13)(78,"div",31)(79,"h5",8),t.EFF(80,"Product Details"),t.k0s(),t.j41(81,"button",32),t.bIt("click",function(){return t.eBV(n),t.Njj(a.addProductDetail())}),t.EFF(82,"Add Product"),t.k0s()(),t.j41(83,"div",15)(84,"div",33),t.DNE(85,Z,59,8,"div",34),t.k0s()()(),t.j41(86,"div",16)(87,"div",35)(88,"button",36),t.EFF(89,"Save"),t.k0s()()()()()()()}if(2&i){const n=t.sdS(30),c=t.sdS(65);t.R7$(9),t.Y8G("authPermission",a.page+"_"+a.permissions.list),t.R7$(),t.Y8G("formGroup",a.frmOutward),t.R7$(17),t.Y8G("matDatepicker",n),t.R7$(),t.Y8G("for",n),t.R7$(8),t.Y8G("ngForOf",a.warehouses),t.R7$(7),t.Y8G("ngForOf",a.inventoryTypes),t.R7$(2),t.Y8G("ngIf",a.showCustomers),t.R7$(),t.Y8G("ngIf",a.showVendors),t.R7$(),t.Y8G("ngIf",a.showWarehouses),t.R7$(2),t.Y8G("ngIf",a.showCustomers),t.R7$(),t.Y8G("ngIf",a.showVendors),t.R7$(),t.Y8G("ngIf",a.showWarehouses),t.R7$(11),t.Y8G("matDatepicker",c),t.R7$(),t.Y8G("for",c),t.R7$(7),t.Y8G("documents",null==a.outwardData?null:a.outwardData.supportingDocument)("isEditMode",a.isEditMode)("uploader",null==a.fileUploader?null:a.fileUploader.uploader)("label","")("hideUploader",a.canHideUploader()),t.R7$(15),t.Y8G("ngForOf",a.outwardProductDetails.controls)}},dependencies:[l.Sq,l.bT,u.qT,u.me,u.Q0,u.BC,u.cb,u.j4,u.JD,u.$R,u.v8,h.It,h.$z,h.iY,g.rl,g.nJ,g.yw,T.fg,D.An,S.VO,R.wT,v.Vh,v.bZ,v.bU,F.B,G.T,A.r,$.A],encapsulation:2})}return o})();var O=s(62288),_=s(33380),z=s(49239),K=s(74193);let I=(()=>{class o{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="outwardCode,inventoryTypeName,fromWarehouseName,customerName,vendorName,warehouseName,supportingDocumentNo"}updateSearchTerms(e,i){this.searchData[e]=i,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["outward-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(c){return a.updateSearchTerms(a.searchKey,c)}),t.k0s()(),t.j41(3,"div",3)(4,"search-inactive",4),t.bIt("chkChanged",function(c){return a.updateSearchTerms("isActive",c)}),t.k0s()()()),2&i&&(t.R7$(2),t.Y8G("placeHolder","Search Outward Code, Inventory Type, From Warehouse, Customer Name, Vendor Name, Warehouse, Supporting Document No"))},dependencies:[z.D,K.$],encapsulation:2})}return o})();var tt=s(96081);const et=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),ot=()=>["../","add"],at=o=>["..","edit",o];function it(o,r){1&o&&(t.j41(0,"a",26)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",27),t.k0s()),2&o&&t.Y8G("routerLink",t.lJ4(1,ot))}function nt(o,r){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&o){const e=r.value;t.R7$(),t.JRh(t.i5U(2,1,e,"dd/MM/yyyy"))}}function rt(o,r){if(1&o&&(t.j41(0,"a",30)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&o){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,at,e.id))}}function st(o,r){if(1&o){const e=t.RV6();t.j41(0,"a",33),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,n=t.XpG();return t.Njj(n.activateToggleOutward(a,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function dt(o,r){if(1&o){const e=t.RV6();t.j41(0,"a",33),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,n=t.XpG();return t.Njj(n.activateToggleOutward(a,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function ut(o,r){if(1&o&&(t.qex(0,31),t.DNE(1,st,3,0,"a",32)(2,dt,3,0,"a",32),t.bVm()),2&o){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function ct(o,r){if(1&o&&t.DNE(0,rt,3,3,"a",28)(1,ut,3,2,"ng-container",29),2&o){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}const lt=[{path:"",component:y,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,i,a){this.outwardService=e,this.notificationService=i,this.datePipe=a,this.outwardData=[],this.page=d.Wt.outward,this.permissions=d.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getOutwardData()}getOutwardData(){this.loading=!0,this.outwardService.get().subscribe(e=>{this.outwardData=e,this.loading=!1},e=>{console.log(e),this.loading=!1})}exportToExcel(){let e=this.outwardData.map(n=>({Id:n.id,"Outward Code":n.outwardCode,"Outward Date":this.datePipe.transform(n.outwardDate,"dd/MM/yyyy"),"Inventory Type":n.inventoryTypeName,"From Warehouse":n.fromWarehouseName,"Customer Name":n.customerName,"Vendor Name":n.vendorName,Warehouse:n.warehouseName,"Material Requisition No":n.materialRequisitionCode,"Supporting Document No":n.supportingDocumentNo,"Supporting Document Date":this.datePipe.transform(n.supportingDocumentDate,"dd/MM/yyyy"),Active:n.isActive?"Yes":"No"}));const a={Sheets:{data:O.Wp.json_to_sheet(e)},SheetNames:["data"]};O._h(a,"Outwards.xlsx")}activateToggleOutward(e,i){confirm(`Are you sure you want to ${i?"Activate":"Deactivate"} this outward?`)&&this.outwardService.toggleActivate(e.id,i).subscribe(()=>{this.getOutwardData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(e){this.searchData=Object.assign({},e)}isActiveRow(e){return{"text-danger":!e.isActive}}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(f),t.rXU(C.tw),t.rXU(l.vh))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],features:[t.Jv_([l.vh])],decls:30,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row","mb-3"],[1,"col-lg-9"],[3,"searchChanged"],[1,"col-lg-3"],["mat-flat-button","","color","primary",1,"app-button",2,"float","right",3,"click"],[1,"row"],[1,"col-12"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Outward Code","prop","outwardCode"],["name","Outward Date","prop","outwardDate"],["ngx-datatable-cell-template",""],["name","From Warehouse","prop","fromWarehouseName"],["name","Inventory Type","prop","inventoryTypeName"],["name","Customer Name","prop","customerName"],["name","Vendor Name","prop","vendorName"],["name","Warehouse","prop","warehouseName"],["name","Supporting Document No","prop","supportingDocumentNo"],["name","Actions",3,"sortable"],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Outward List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,it,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"outward-search-panel",10),t.bIt("searchChanged",function(c){return a.updateSearch(c)}),t.k0s()(),t.j41(12,"div",11)(13,"button",12),t.bIt("click",function(){return a.exportToExcel()}),t.EFF(14," Export to Excel "),t.k0s()()(),t.j41(15,"div",13)(16,"div",14)(17,"ngx-datatable",15),t.nI1(18,"searchtable"),t.nrm(19,"ngx-datatable-column",16),t.j41(20,"ngx-datatable-column",17),t.DNE(21,nt,3,4,"ng-template",18),t.k0s(),t.nrm(22,"ngx-datatable-column",19)(23,"ngx-datatable-column",20)(24,"ngx-datatable-column",21)(25,"ngx-datatable-column",22)(26,"ngx-datatable-column",23)(27,"ngx-datatable-column",24),t.j41(28,"ngx-datatable-column",25),t.DNE(29,ct,2,2,"ng-template",18),t.k0s()()()()()()()),2&i&&(t.R7$(8),t.Y8G("authPermission",a.page+"_"+a.permissions.create),t.R7$(9),t.Y8G("rows",t.i5U(18,12,a.outwardData,a.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",a.loading)("scrollbarH",!0)("rowClass",a.isActiveRow)("messages",t.lJ4(15,et)),t.R7$(11),t.Y8G("sortable",!1))},dependencies:[l.bT,h.It,h.$z,D.An,p.Wk,_.ge,_.ed,_.QI,F.B,I,l.vh,tt.j],encapsulation:2})}return o})(),canActivate:[d.LL],data:{page:d.Wt.outward,action:d.eZ.list,title:"Outward"}},{path:"add",canActivate:[d.LL],data:{page:d.Wt.outward,action:d.eZ.create,title:"Outward"},component:w},{path:"edit/:id",canActivate:[d.LL],data:{page:d.Wt.outward,action:d.eZ.edit,title:"Outward"},component:w}]}];let mt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[p.iI.forChild(lt),p.iI]})}return o})(),pt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({providers:[f,k.C],imports:[E.Gg,mt]})}return o})()}}]);