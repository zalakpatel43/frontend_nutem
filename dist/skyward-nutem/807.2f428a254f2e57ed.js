"use strict";(self.webpackChunkskyward_nutem=self.webpackChunkskyward_nutem||[]).push([[807],{6807:(pt,S,d)=>{d.r(S),d.d(S,{DowntimeTrackingModule:()=>gt});var T=d(177),p=d(8498),t=d(4438);let y=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275cmp=t.VBU({type:n,selectors:[["app-downtime"]],decls:1,vars:0,template:function(e,o){1&e&&t.nrm(0,"router-outlet")},dependencies:[p.n3]})}return n})();var c=d(4434),A=d(1626);let v=(()=>{class n{constructor(i,e){this.http=i,this._baseService=e}getDowntimeTrackingList(){return this.http.get(`${c.T6.downtimeTrackingList}`)}getShiftList(){return this.http.get(`${c.T6.ShiftList}`)}getCauseList(){return this.http.get(`${c.T6.CauseList}`)}getMaster(){return this.http.get(`${c.T6.MasterList}`)}getUserList(){return this.http.get(`${c.T6.UserList}`)}getProductionOrderList(){return this.http.get(`${c.T6.ProductionOrderList}`)}getProductList(){return this.http.get(`${c.T6.ProductList}`)}addDowntimeTracking(i){return this.http.post(`${c.T6.downtimeTrackingAdd}`,i)}updateDowntimeTracking(i){return this.http.post(`${c.T6.downtimeTrackingEdit}`,i)}getByIdDowntimeTracking(i){return this.http.get(`${c.T6.downtimeTrackingGetById}?id=`+i)}deleteDowntimeTracking(i){return this.http.delete(`${c.T6.downtimeTrackingDelete}?id=`+i)}static#t=this.\u0275fac=function(e){return new(e||n)(t.KVO(A.Qq),t.KVO(c.dD))};static#i=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j=d(5794),f=d(8834),_=d(9213),F=d(3380),P=d(6081);const $=()=>["../","add"],R=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),N=n=>["..","edit",n];function O(n,s){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const i=s.value;t.R7$(),t.JRh(t.i5U(2,1,i,"MM/dd/yyyy hh:mm a"))}}function x(n,s){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const i=s.value;t.R7$(),t.JRh(i)}}function G(n,s){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const i=s.value;t.R7$(),t.JRh(i)}}function B(n,s){if(1&n){const i=t.RV6();t.j41(0,"a",17)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()(),t.j41(3,"button",18),t.bIt("click",function(){const o=t.eBV(i).row,r=t.XpG();return t.Njj(r.removeDowntimeTracking(o.id))}),t.j41(4,"mat-icon"),t.EFF(5,"close"),t.k0s()()}2&n&&t.Y8G("routerLink",t.eq3(1,N,s.row.id))}let L=(()=>{class n{constructor(i,e){this.downtimeTrackingService=i,this.notificationService=e,this.downtimeTrackingData=[],this.page=c.Wt.downtimeTracking,this.permissions=c.eZ,this.searchData={}}ngOnInit(){this.getDowntimeTrackingData()}getDowntimeTrackingData(){this.loading=!0,this.downtimeTrackingService.getDowntimeTrackingList().subscribe(i=>{this.downtimeTrackingData=i,console.log("Downtime tracking list",this.downtimeTrackingData),this.loading=!1},i=>{this.error=i,this.loading=!1})}removeDowntimeTracking(i){confirm("Are you sure, you want to delete this Downtime Tracking?")&&this.downtimeTrackingService.deleteDowntimeTracking(i).subscribe(()=>{this.getDowntimeTrackingData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(i){this.searchData=Object.assign({},i),console.log("Search data",this.searchData)}isActiveRow(i){return{"text-danger":!i.isActive}}static#t=this.\u0275fac=function(e){return new(e||n)(t.rXU(v),t.rXU(j.tw))};static#i=this.\u0275cmp=t.VBU({type:n,selectors:[["app-list"]],decls:24,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],[1,"row"],[1,"col-12"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","messages"],["name","Date","prop","productionDateTime"],["ngx-datatable-cell-template",""],["name","Product Name","prop","productName"],["name","Filling Line","prop","productLineName"],["name","Actions",3,"sortable"],["color","primary",1,"button-padding",3,"routerLink"],["type","button",2,"border","none","background-color","white","color","red",3,"click"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Downtime Tracking List"),t.k0s()(),t.j41(7,"div",6)(8,"a",7)(9,"span"),t.EFF(10,"Add New"),t.k0s(),t.nrm(11,"i",8),t.k0s()()(),t.j41(12,"div",9)(13,"div",10)(14,"ngx-datatable",11),t.nI1(15,"searchtable"),t.j41(16,"ngx-datatable-column",12),t.DNE(17,O,3,4,"ng-template",13),t.k0s(),t.j41(18,"ngx-datatable-column",14),t.DNE(19,x,2,1,"ng-template",13),t.k0s(),t.j41(20,"ngx-datatable-column",15),t.DNE(21,G,2,1,"ng-template",13),t.k0s(),t.j41(22,"ngx-datatable-column",16),t.DNE(23,B,6,3,"ng-template",13),t.k0s()()()()()()()),2&e&&(t.R7$(8),t.Y8G("routerLink",t.lJ4(14,$)),t.R7$(6),t.Y8G("rows",t.i5U(15,11,o.downtimeTrackingData,o.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",o.loading)("scrollbarH",!0)("messages",t.lJ4(15,R)),t.R7$(8),t.Y8G("sortable",!1))},dependencies:[p.Wk,f.It,_.An,F.ge,F.ed,F.QI,T.vh,P.j]})}return n})();var u=d(9417),k=d(2102),C=d(9631),Y=d(2798),M=d(6600),U=d(220),V=d(8777),H=d(7133),b=d(2356),D=d(8910);function X(n,s){if(1&n){const i=t.RV6();t.j41(0,"a",45),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.cancel())}),t.EFF(1," View List "),t.k0s()}}function J(n,s){if(1&n&&(t.j41(0,"mat-option",46),t.EFF(1),t.k0s()),2&n){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.productName," ")}}function W(n,s){if(1&n&&(t.j41(0,"mat-option",46),t.EFF(1),t.k0s()),2&n){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.name," ")}}function K(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Filling Line is required "),t.k0s())}function Q(n,s){if(1&n&&(t.j41(0,"mat-option",46),t.EFF(1),t.k0s()),2&n){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.poNumber," ")}}function Z(n,s){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Production Order is required "),t.k0s())}function z(n,s){if(1&n&&(t.j41(0,"mat-option",46),t.EFF(1),t.k0s()),2&n){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.causeName," ")}}function q(n,s){if(1&n&&(t.j41(0,"mat-option",46),t.EFF(1),t.k0s()),2&n){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.shiftName," ")}}function tt(n,s){if(1&n&&(t.j41(0,"mat-option",46),t.EFF(1),t.k0s()),2&n){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.name," ")}}function it(n,s){if(1&n){const i=t.RV6();t.j41(0,"div",47)(1,"div",17)(2,"div",18)(3,"mat-form-field",23)(4,"mat-label"),t.EFF(5,"Start Time"),t.k0s(),t.nrm(6,"input",48)(7,"ngx-material-timepicker",null,2),t.k0s()(),t.j41(9,"div",18)(10,"mat-form-field",23)(11,"mat-label"),t.EFF(12,"End Time"),t.k0s(),t.j41(13,"input",49),t.bIt("ngModelChange",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.calculateDuration())}),t.k0s(),t.nrm(14,"ngx-material-timepicker",null,3),t.k0s()(),t.j41(16,"div",18)(17,"mat-form-field",23)(18,"mat-label"),t.EFF(19,"Durations"),t.k0s(),t.nrm(20,"input",50),t.k0s()(),t.j41(21,"div",18)(22,"mat-form-field",23)(23,"mat-label"),t.EFF(24,"Cause"),t.k0s(),t.j41(25,"mat-select",51),t.DNE(26,z,2,2,"mat-option",25),t.k0s()()(),t.j41(27,"div",18)(28,"mat-form-field",23)(29,"mat-label"),t.EFF(30,"Shift"),t.k0s(),t.j41(31,"mat-select",52),t.DNE(32,q,2,2,"mat-option",25),t.k0s()()(),t.j41(33,"div",18)(34,"mat-form-field",23)(35,"mat-label"),t.EFF(36,"Action Taken"),t.k0s(),t.nrm(37,"input",53),t.k0s()(),t.j41(38,"div",18)(39,"mat-form-field",23)(40,"mat-label"),t.EFF(41,"Action taken By "),t.k0s(),t.j41(42,"mat-select",54),t.DNE(43,tt,2,2,"mat-option",25),t.k0s()()(),t.j41(44,"div",55)(45,"button",56),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.addFinalDowntimeDetail())}),t.j41(46,"mat-icon"),t.EFF(47,"add"),t.k0s()()()()()}if(2&n){const i=s.index,e=t.sdS(8),o=t.sdS(15),r=t.XpG();t.Y8G("formGroupName",i),t.R7$(6),t.Y8G("ngxTimepicker",e),t.R7$(7),t.Y8G("ngxTimepicker",o),t.R7$(13),t.Y8G("ngForOf",r.causeList),t.R7$(6),t.Y8G("ngForOf",r.shiftList),t.R7$(11),t.Y8G("ngForOf",r.usersList)}}function et(n,s){1&n&&t.eu8(0)}function nt(n,s){if(1&n&&(t.qex(0),t.EFF(1),t.DNE(2,et,1,0,"ng-container",28),t.bVm()),2&n){const i=s.$implicit,e=t.XpG(2);t.R7$(),t.SpI(" ",e.userMap.get(i)||"Unknown"," "),t.R7$(),t.Y8G("ngIf",!e.last)}}function ot(n,s){if(1&n){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.DNE(14,nt,3,2,"ng-container",41),t.k0s(),t.j41(15,"td",57)(16,"button",58),t.bIt("click",function(){const o=t.eBV(i),r=o.$implicit,m=o.index,a=t.XpG();return t.Njj(a.onEditDetail(r,m))}),t.nrm(17,"i",59),t.k0s()()()}if(2&n){const i=s.$implicit,e=t.XpG();t.R7$(2),t.JRh(i.StartDate),t.R7$(2),t.JRh(i.EndDate),t.R7$(2),t.JRh(i.Durations),t.R7$(2),t.JRh(e.shiftMap.get(i.ShiftId)||"Unknown"),t.R7$(2),t.JRh(e.causeMap.get(i.CauseId)||"Unknown"),t.R7$(2),t.JRh(i.ActionTaken),t.R7$(2),t.Y8G("ngForOf",i.DoneByUserIds)}}let E=(()=>{class n{constructor(i,e,o,r,m){this.activatedRoute=i,this.router=e,this.formBuilder=o,this.downtimeTrackingService=r,this.notificationService=m,this.page=c.Wt.downtimeTracking,this.permissions=c.eZ,this.productionOrderList=[],this.productList=[],this.causeList=[],this.addedDowntimeTrackingDetailsList=[],this.editDetailsId=-1,this.fillingLineList=[],this.shiftList=[],this.usersList=[],this.selectedDate=null,this.selectedTime=null,this.shiftMap=new Map,this.causeMap=new Map,this.userMap=new Map}ngOnInit(){this.getRoute(),this.loadDropdowns(),this.form=this.fb.group({ProductionDateTime:["",u.k0.required],ProductionTime:["",u.k0.required]})}get ProductionDateTime(){return this.downtimeTrackingForm.controls.ProductionDateTime}onDateChange(i){const e=i.value,o=this.downtimeTrackingForm.get("ProductionTime")?.value;e&&o&&this.downtimeTrackingForm.get("ProductionDateTime")?.setValue(`${e}T${o}`)}getRoute(){this.routerSub=this.activatedRoute.params.subscribe(i=>{this.isEditMode=!c.ov.isEmpty(i.id),this.createForm(),this.addDowntimeDetail(),this.isEditMode&&(this.downtimeTrackingId=i.id,this.getDowntimeTrackingById())})}getDowntimeTrackingById(){this.downtimeTrackingService.getByIdDowntimeTracking(this.downtimeTrackingId).subscribe(i=>{this.downtimeTrackingData=i,this.setDowntimeTrackingData()},i=>{console.log(i)})}get isDateTimeValid(){return!(!this.selectedDate||!this.selectedTime)}setDowntimeTrackingData(){this.downtimeTrackingForm.patchValue({Code:this.downtimeTrackingData.code,ProductionDateTime:this.downtimeTrackingData.productionDateTime,ProductId:this.downtimeTrackingData.productId,ProductionOrderId:this.downtimeTrackingData.ProductionOrderId,FillingLineId:this.downtimeTrackingData.FillingLineId,SAPProductionOrderId:this.downtimeTrackingData.sapProductionOrderId,productLineId:this.downtimeTrackingData.productLineId}),this.downtimeTrackingForm.get("ProductionOrderId").disable(),this.downtimeTrackingForm.get("SAPProductionOrderId").disable(),this.downtimeTrackingForm.get("productLineId").disable();const e=o=>{const r=new Date(o);let m=r.getHours();const a=r.getMinutes(),l=m>=12?"PM":"AM";return m%=12,m=m||12,`${m}:${a<10?"0"+a:a} ${l}`};setTimeout(()=>{this.downtimeTrackingData.downtimeTrackingDetails?.forEach(o=>{const r=(o.doneByUserIds||"").split(",").map(a=>Number(a.trim())).filter(a=>!isNaN(a));let m={id:o.id,StartDate:e(o.startDate),EndDate:e(o.endDate),Durations:o.durations,CauseId:o.causeId,ShiftId:o.shiftId,ActionTaken:o.actionTaken,DoneByUserIds:r,IsActive:o.isActive};this.addedDowntimeTrackingDetailsList.push(m)})},500)}loadDropdowns(){this.downtimeTrackingService.getProductionOrderList().subscribe(i=>{this.productionOrderList=i,console.log("Data",this,this.productionOrderList)}),this.downtimeTrackingService.getProductList().subscribe(i=>{this.productList=i}),this.downtimeTrackingService.getCauseList().subscribe(i=>{this.causeList=i,this.causeMap=new Map(i.map(e=>[e.id,e.causeName]))}),this.downtimeTrackingService.getMaster().subscribe(i=>{this.fillingLineList=this.filterFillingLines(i)}),this.downtimeTrackingService.getUserList().subscribe(i=>{this.usersList=i,this.userMap=new Map(i.map(e=>[e.id,e.name]))}),this.downtimeTrackingService.getShiftList().subscribe(i=>{this.shiftList=i,this.shiftMap=new Map(i.map(e=>[e.id,e.shiftName]))})}filterFillingLines(i){return i.filter(e=>e.categoryName&&-1!==e.categoryName.toLowerCase().indexOf("fill"))}createForm(){this.downtimeTrackingForm=this.formBuilder.group({Code:[{value:"",disabled:!0},u.k0.required],ProductionDateTime:["",u.k0.required],ProductId:["",u.k0.required],FillingLineId:[""],DoneByUserIds:[""],SAPProductionOrderId:[""],ProductionOrderId:[""],productLineId:[""],downtimeTrackingDetails:this.formBuilder.array([])})}addDowntimeDetail(){this.downtimeTrackingDetails?.clear(),this.editDetailsId=-1;const i=this.formBuilder.group({StartDate:[""],EndDate:[""],Durations:[""],CauseId:[""],ActionTaken:[""],DoneByUserIds:[""],ShiftId:[""]});this.downtimeTrackingDetails=this.downtimeTrackingForm?.get("downtimeTrackingDetails"),this.downtimeTrackingDetails.push(i)}addFinalDowntimeDetail(){const i=this.downtimeTrackingDetails.at(0).value;i.StartDate&&i.EndDate?(this.editDetailsId>=0?(this.addedDowntimeTrackingDetailsList[this.editDetailsId]={...i,IsActive:!0,id:this.addedDowntimeTrackingDetailsList[this.editDetailsId].id},this.editDetailsId=-1):this.addedDowntimeTrackingDetailsList.push({...i,IsActive:!0,id:0}),this.downtimeTrackingDetails.clear(),this.addDowntimeDetail()):this.notificationService.error("Start Date and End Date are required")}onEditDetail(i,e){this.populateFormWithValues([i]),this.editDetailsId=e}populateFormWithValues(i){const e=Array.isArray(i)?i:[i];this.downtimeTrackingDetails=this.downtimeTrackingForm.get("downtimeTrackingDetails"),this.downtimeTrackingDetails.clear(),e.forEach(o=>{const r=this.formBuilder.group({StartDate:[o.StartDate||""],EndDate:[o.EndDate||""],Durations:[o.Durations||""],CauseId:[o.CauseId||""],ShiftId:[o.ShiftId||""],ActionTaken:[o.ActionTaken||""],DoneByUserIds:[o.DoneByUserIds||[]],IsActive:[o.IsActive||!0]});this.downtimeTrackingDetails.push(r)})}removeDowntimeDetail(i){this.addedDowntimeTrackingDetailsList.splice(i,1)}save(){if(this.isFormSubmitted=!0,this.downtimeTrackingForm.invalid)return void this.notificationService.error("Please fill out all required fields.");if(0===this.addedDowntimeTrackingDetailsList.length)return void this.notificationService.error("At least one downtime detail is required.");const i=this.downtimeTrackingForm.value;i.downtimeTrackingDetails=this.addedDowntimeTrackingDetailsList;const e=this.transformData(i);console.log("Transformed Payload:",e),this.isEditMode?this.updateDowntimeTracking(e):this.createDowntimeTracking(e),this.downtimeTrackingForm.reset(),this.addedDowntimeTrackingDetailsList=[],this.addDowntimeDetail()}transformData(i){function e(a){const l=new Date(a);if(isNaN(l.getTime()))throw new Error("Invalid date string provided");return`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}T${String(l.getHours()).padStart(2,"0")}:${String(l.getMinutes()).padStart(2,"0")}:00.000Z`}function o(a){const l=new Date,[g,w]=a.split(" ");let[h,I]=g.split(":").map(Number);return"PM"===w&&h<12&&(h+=12),"AM"===w&&12===h&&(h=0),l.setHours(h),l.setMinutes(I),l.setSeconds(0),l.setMilliseconds(0),e(l.toISOString())}console.log("Original Data:",i);const r=Array.isArray(i.downtimeTrackingDetails)?i.downtimeTrackingDetails:[];return{id:this.isEditMode?this.downtimeTrackingData.id:0,code:this.isEditMode?this.downtimeTrackingData.code:"",productionDateTime:e(i.ProductionDateTime),productId:this.isEditMode?this.downtimeTrackingData.productId:i.ProductId,productName:this.isEditMode?this.downtimeTrackingData.productName:"string",productLineId:this.isEditMode?this.downtimeTrackingData.productLineId:i.productLineId,productLineName:this.isEditMode?this.downtimeTrackingData.productLineName:"string",isActive:!0,SAPProductionOrderId:this.isEditMode?this.downtimeTrackingData.sapProductionOrderId:i.SAPProductionOrderId,downtimeTrackingDetails:r.map(a=>({id:a.id||0,headerId:this.isEditMode?this.downtimeTrackingData.id:0,startDate:o(a.StartDate),endDate:o(a.EndDate),durations:a.Durations,causeId:a.CauseId,shiftId:a.ShiftId,actionTaken:a.ActionTaken,doneByUserIds:(Array.isArray(a.DoneByUserIds)?a.DoneByUserIds.join(","):a.DoneByUserIds)||"",doneByUserNames:"",isActive:a.IsActive||!0}))}}createDowntimeTracking(i){console.log("Creating Downtime Tracking:",i),this.downtimeTrackingService.addDowntimeTracking(i).subscribe(e=>{console.log("Create Response:",e),this.cancel(),this.notificationService.success("Downtime Tracking created successfully.")},e=>{console.error("Error creating Downtime Tracking:",e),this.error=e,this.notificationService.error("Failed to create Downtime Tracking.")})}updateDowntimeTracking(i){console.log("Updating Downtime Tracking:",i),this.downtimeTrackingService.updateDowntimeTracking(i).subscribe(e=>{console.log("Update Response:",e),this.cancel(),this.notificationService.success("Downtime Tracking updated successfully.")},e=>{console.error("Error updating Downtime Tracking:",e),this.error=e,this.notificationService.error("Failed to update Downtime Tracking.")})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe()}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}calculateDuration(){const i=this.downtimeTrackingDetails.at(0).get("StartDate")?.value,e=this.downtimeTrackingDetails.at(0).get("EndDate")?.value;if(i&&e){const o=this.parseTime(i),r=this.parseTime(e),m=Math.round((r.getTime()-o.getTime())/6e4),g=`${Math.floor(m/60)}hr ${m%60}min`;this.downtimeTrackingDetails.at(0).get("Durations")?.setValue(g)}}parseTime(i){const[e,o]=i.split(" ");let[r,m]=e.split(":").map(Number);"PM"===o&&r<12&&(r+=12),"AM"===o&&12===r&&(r=0);const a=new Date;return a.setHours(r),a.setMinutes(m),a.setSeconds(0),a.setMilliseconds(0),a}static#t=this.\u0275fac=function(e){return new(e||n)(t.rXU(p.nX),t.rXU(p.Ix),t.rXU(u.ok),t.rXU(v),t.rXU(j.tw))};static#i=this.\u0275cmp=t.VBU({type:n,selectors:[["app-down-time"]],decls:92,vars:16,consts:[["form","ngForm"],["pickerProductionDateTime",""],["startDatePicker",""],["endDatePicker",""],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","mb-3"],["appearance","fill"],["matInput","","placeholder","Production Date Time","formControlName","ProductionDateTime","required","",3,"ngxMatDatetimePicker"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["apperance","fill"],["appearance","fill",1,"full-width"],["formControlName","ProductId",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"control","message","formSubmitted"],["formControlName","productLineId",3,"disabled"],[4,"ngIf"],["formControlName","SAPProductionOrderId",3,"disabled"],[1,"card-header","d-flex","align-items-center","justify-content-between"],["formArrayName","downtimeTrackingDetails"],["class","row mt-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"table-responsive"],["id","gridDowntimeTracking",1,"table","table-hover","table-bordered","display","mb-30","fixed-table-scroll-inner",2,"overflow","scroll","width","auto"],[1,"bg-primary","text-primary","text-center"],[2,"width","10%"],[2,"width","15%"],[2,"width","20%"],[2,"width","5%"],[4,"ngFor","ngForOf"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],[1,"static-data"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[3,"value"],[1,"row","mt-3",3,"formGroupName"],["matInput","","placeholder","Select time","formControlName","StartDate",3,"ngxTimepicker"],["matInput","","placeholder","Select time","formControlName","EndDate",3,"ngModelChange","ngxTimepicker"],["matInput","","formControlName","Durations","readonly",""],["formControlName","CauseId"],["formControlName","ShiftId"],["matInput","","formControlName","ActionTaken"],["formControlName","DoneByUserIds","multiple",""],[1,"col-12","col-sm-12","col-md-2","col-lg-2","mb-3","p-1","d-flex","align-items-center"],["type","button","mat-icon-button","","color","warn",3,"click"],[1,"text-center"],["type","button",1,"btn","btn-primary","btn-sm","btnModifyRow",3,"click"],[1,"fa","fa-pencil"]],template:function(e,o){if(1&e){const r=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h4",9),t.nrm(6,"i",10),t.EFF(7," Add/Edit Downtime Tracking"),t.k0s()(),t.j41(8,"div",11),t.DNE(9,X,2,0,"a",12),t.k0s()(),t.j41(10,"form",13,0),t.bIt("submit",function(){return t.eBV(r),t.Njj(o.save())}),t.j41(12,"div",14)(13,"div",15)(14,"h5",9),t.EFF(15,"Downtime Tracking Header"),t.k0s()(),t.j41(16,"div",16)(17,"div",17)(18,"div",18)(19,"mat-form-field",19),t.nrm(20,"input",20),t.j41(21,"button",21),t.bIt("click",function(){t.eBV(r);const a=t.sdS(25);return t.Njj(a.open())}),t.j41(22,"mat-icon"),t.EFF(23,"calendar_today"),t.k0s()(),t.nrm(24,"ngx-mat-datetime-picker",22,1),t.k0s()(),t.j41(26,"div",18)(27,"mat-form-field",23)(28,"mat-label"),t.EFF(29,"Product"),t.k0s(),t.j41(30,"mat-select",24),t.DNE(31,J,2,2,"mat-option",25),t.k0s(),t.nrm(32,"mat-validation-message",26),t.k0s()(),t.j41(33,"div",18)(34,"mat-form-field",23)(35,"mat-label"),t.EFF(36,"Filling Line"),t.k0s(),t.j41(37,"mat-select",27),t.DNE(38,W,2,2,"mat-option",25),t.k0s(),t.DNE(39,K,2,0,"mat-error",28),t.k0s()(),t.j41(40,"div",18)(41,"mat-form-field",23)(42,"mat-label"),t.EFF(43,"Production Order"),t.k0s(),t.j41(44,"mat-select",29),t.DNE(45,Q,2,2,"mat-option",25),t.k0s(),t.DNE(46,Z,2,0,"mat-error",28),t.k0s()()()()(),t.j41(47,"div",14)(48,"div",30)(49,"h5",9),t.EFF(50,"Downtime Tracking Details"),t.k0s()(),t.j41(51,"div",16)(52,"div",31),t.DNE(53,it,48,6,"div",32),t.k0s()()(),t.j41(54,"div",17)(55,"div",33)(56,"div",34)(57,"table",35)(58,"thead",36)(59,"tr")(60,"th",37),t.EFF(61,"Start Date"),t.k0s(),t.j41(62,"th",37),t.EFF(63,"End Date"),t.k0s(),t.j41(64,"th",38),t.EFF(65,"Durations"),t.k0s(),t.j41(66,"th",38),t.EFF(67,"Shift"),t.k0s(),t.j41(68,"th",38),t.EFF(69,"Cause"),t.k0s(),t.j41(70,"th",39),t.EFF(71,"Action Taken"),t.k0s(),t.j41(72,"th",39),t.EFF(73,"Action Taken By"),t.k0s(),t.j41(74,"th",40),t.EFF(75,"Action"),t.k0s()()(),t.j41(76,"tbody"),t.DNE(77,ot,18,7,"tr",41),t.k0s()()()()(),t.j41(78,"div",17)(79,"div",42)(80,"button",43),t.EFF(81,"Save"),t.k0s()()()(),t.j41(82,"div",44)(83,"h5"),t.EFF(84,"DOWNTIME REPORTING INSTRUCTION"),t.k0s(),t.j41(85,"ul")(86,"li"),t.EFF(87,"1. Downtime (D/T) to be documented whenever the FILLER is NOT running. Operator to record the Duration and Cause as well as the Actions Taken to correct the issue."),t.k0s(),t.j41(88,"li"),t.EFF(89,"2. A Breakdown (B/D) is any single stop which is greater than 10 minutes. All other down time to be registered as accumulated. When a B/D occurs notify the Shift Supervisor/Production Manager and record under Action Taken."),t.k0s(),t.j41(90,"li"),t.EFF(91,"3. If a Quality issue is the cause, notify the Shift Supervisor/Production Manager and QA and record under Action Taken."),t.k0s()()()()()()}if(2&e){const r=t.sdS(25);t.R7$(9),t.Y8G("authPermission",o.page+"_"+o.permissions.list),t.R7$(),t.Y8G("formGroup",o.downtimeTrackingForm),t.R7$(10),t.Y8G("ngxMatDatetimePicker",r),t.R7$(10),t.Y8G("disabled",o.isEditMode),t.R7$(),t.Y8G("ngForOf",o.productList),t.R7$(),t.Y8G("control",o.downtimeTrackingForm.controls.ProductId)("message","Product")("formSubmitted",o.isFormSubmitted),t.R7$(5),t.Y8G("disabled",o.isEditMode),t.R7$(),t.Y8G("ngForOf",o.fillingLineList),t.R7$(),t.Y8G("ngIf",o.downtimeTrackingForm.get("FillingLineId").invalid&&o.isFormSubmitted),t.R7$(5),t.Y8G("disabled",o.isEditMode),t.R7$(),t.Y8G("ngForOf",o.productionOrderList),t.R7$(),t.Y8G("ngIf",o.downtimeTrackingForm.get("ProductionOrderId").invalid&&o.isFormSubmitted),t.R7$(7),t.Y8G("ngForOf",o.downtimeTrackingDetails.controls),t.R7$(24),t.Y8G("ngForOf",o.addedDowntimeTrackingDetailsList)}},dependencies:[T.Sq,T.bT,u.qT,u.me,u.BC,u.cb,u.YS,u.j4,u.JD,u.$R,u.v8,f.It,f.$z,f.iY,k.rl,k.nJ,k.TL,k.yw,C.fg,_.An,Y.VO,M.wT,U.B,V.T,H.r,b.zk,b.v2,D.m7,D.yF],styles:[".card[_ngcontent-%COMP%]{margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:.75rem 1.25rem}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.static-data[_ngcontent-%COMP%]{margin-top:20px;padding:15px;border:1px solid #ddd;border-radius:5px;background-color:#f9f9f9}.static-data[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px}.static-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:decimal;margin-left:20px}.mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.full-width[_ngcontent-%COMP%]{width:100%}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}  .mat-calendar{margin-top:20px;background-color:#d3d3d3}  .time-container{background-color:#d3d3d3}  .mat-calendar-body-selected{background-color:#1976d2!important;color:#fff!important;border-radius:50%!important}  .mat-calendar-body-active{background-color:#42a5f5!important;border-radius:50%!important}  .mat-calendar-body-today{border-color:#ff9800!important;border-width:2px;border-style:solid;border-radius:50%}"]})}return n})();d(9239);const st=[{path:"",component:y,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:L,canActivate:[c.LL],data:{page:c.Wt.downtimeTracking,title:"Downtime Tracking"}},{path:"add",canActivate:[c.LL],data:{page:c.Wt.downtimeTracking,title:"Downtime Tracking"},component:E},{path:"edit/:id",canActivate:[c.LL],data:{page:c.Wt.downtimeTracking,title:"Downtime Tracking"},component:E}]}];let dt=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.$C({type:n});static#e=this.\u0275inj=t.G2t({imports:[p.iI.forChild(st),p.iI]})}return n})();var ct=d(1774),mt=d(9830),lt=d(5263),ut=d(40);let gt=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.$C({type:n});static#e=this.\u0275inj=t.G2t({providers:[v,(0,mt._c)()],imports:[T.MD,dt,ct.Gg,b.c9,D.Hw,D.Xg,D.T_,M.WX,lt.ZG,ut.Yr,k.RG,C.fS]})}return n})()}}]);