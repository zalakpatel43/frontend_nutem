"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[64],{92064:(St,I,o)=>{o.r(I),o.d(I,{UserModule:()=>Pt});var p=o(71774),k=o(99830),g=o(18498),r=o(4434),d=o(89417),R=o(80775),t=o(54438);let b=(()=>{class i extends r.QP{constructor(e){super(e,"user"),this._baseService=e}getReportsToUsers(e,s){return this._baseService.get(`${r.T6.account}/gettownusers/${e}/${s}`)}getUsers(e,s){return this._baseService.get(`${r.T6.user}/paged?pageIndex=${e}&pageSize=${s}`)}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(r.dD))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}return i})();var y=o(2558),T=o(45794),_=o(60177),h=o(88834),u=o(32102),E=o(99631),D=o(99213),C=o(30220),M=o(58777),L=o(17371),N=o(11331),A=o(67133);function B(i,c){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"a",24),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(2," View List "),t.k0s()()}}function G(i,c){1&i&&(t.j41(0,"div"),t.EFF(1," Minimum 10 Characters Required "),t.k0s())}function $(i,c){if(1&i&&(t.j41(0,"div",25),t.DNE(1,G,2,0,"div",26),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.frmUser.controls.phoneNumber.errors.minlength)}}let P=(()=>{class i{constructor(e,s,a,n,l,m,v){this.activatedRoute=e,this.router=s,this.formBuilder=a,this.userService=n,this.roleService=l,this.notificationService=m,this.listService=v,this.reportsToData=[],this.roleData=[],this.hidePassword=!0,this.hideConfirmPassword=!0,this.page=r.Wt.user,this.permissions=r.eZ,this.createForm()}ngOnInit(){this.getUserRoute(),this.getRoleData()}getUserRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{console.log("Edit params ",e),this.isEditMode=!r.ov.isEmpty(e.id),this.createForm(),this.isEditMode?(this.userId=e.id,this.getUserDetails()):(this.userData=new R.KJ,this.getRoleData())})}getUserDetails(){console.log("user id ",this.userId),this.userService.getById(this.userId).subscribe(e=>{this.userData=e,this.setUserData(),this.getRoleData()},e=>{console.log(e)})}getRoleData(){this.roleService.get().subscribe(e=>{this.roleData=e,this.createRolesControl()},e=>{console.log(e)})}getReportsToData(){r.ov.isNotNull(this.userId),this.userService.get().subscribe(s=>{this.reportsToData=s,this.createReportsToControl()})}setUserData(){this.frmUser.patchValue(this.userData),this.frmUser.controls.password.setValue("********"),this.frmUser.controls.confirmPassword.setValue("********")}createForm(){this.frmUser=this.formBuilder.group({userName:[{value:"",disabled:this.isEditMode},[d.k0.required,d.k0.maxLength(50)]],password:[{value:"",disabled:this.isEditMode},[d.k0.required,d.k0.min(6),d.k0.maxLength(20),p.Bm.passwordValidator]],confirmPassword:[{value:"",disabled:this.isEditMode},[d.k0.required,p.Bm.comparePassword]],email:["",[d.k0.required,p.Bm.emailValidator,p.Bm.multipleemailrestrictValidator,d.k0.maxLength(50)]],phoneNumber:["",[d.k0.maxLength(15)]]})}createReportsToControl(){const e=this.frmUser.controls.reportsTo;e.controls=[],this.reportsToData.forEach(s=>{e.push(new d.hs((this.userData.reportsTo||[]).some(a=>a.reportToId===s.id)))})}createRolesControl(){}createUser(){let e=Object.assign({},this.frmUser.value);this.userService.add(e).subscribe(s=>{s?(this.cancel(),this.notificationService.success("User saved successfully.")):this.notificationService.warning(s.message)},s=>{this.error=400===s.status&&s.error.modelState?s.error.modelState[""][0]:"Something went wrong"})}updateUser(){this.userData=Object.assign(this.userData,this.frmUser.value),this.userService.update(this.userData.id,this.userData).subscribe(s=>{s.isSuccess?(this.cancel(),this.notificationService.success("User updated successfully."),this.router.navigate(["../..","list"],{relativeTo:this.activatedRoute})):this.notificationService.warning(s.message)},s=>{this.error=400===s.status&&s.error.modelState?s.error.modelState[""][0]:"Something went wrong"})}save(){this.isFormSubmitted=!0,!this.frmUser.invalid&&(this.isEditMode?this.updateUser():this.createUser())}setValidators(){r.ov.getSelectedCheckboxList(this.frmUser.value.roles,this.roleData).some(s=>"Super Admin"===s.name)?this.frmUser.controls.parkingAuthorityId.setValidators([]):this.frmUser.controls.parkingAuthorityId.setValidators([d.k0.required]),this.frmUser.controls.parkingAuthorityId.updateValueAndValidity()}keyDownHandler(e){"Space"===e.code&&e.preventDefault()}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(g.nX),t.rXU(g.Ix),t.rXU(d.ze),t.rXU(b),t.rXU(y.W),t.rXU(T.tw),t.rXU(r.aG))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["ng-component"]],decls:61,vars:24,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-2","d-flex","justify-content-end","rightSideHeader","mb10"],[4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-md-6"],["type","text","matInput","","formControlName","userName","space-restrict","",3,"keydown"],[3,"control","message","formSubmitted"],["matInput","","formControlName","password","autocomplete","off",3,"keydown","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["type","text","matInput","","formControlName","email","textlower","",3,"keydown"],["matInput","","formControlName","confirmPassword","autocomplete","off",3,"keydown","type"],["type","text","mask","(000) 000-0000","matInput","","formControlName","phoneNumber","autocomplete","nope",3,"dropSpecialCharacters"],["class","custom-validation",4,"ngIf"],[1,"col-md-12"],[1,"col-md-8","text-right"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["type","button","mat-flat-button","","color","primary",1,"app-button",3,"click"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[1,"custom-validation"],[4,"ngIf"]],template:function(s,a){if(1&s){const n=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.EFF(6,"User Details"),t.k0s()(),t.j41(7,"div",7),t.DNE(8,B,3,0,"div",8),t.k0s()(),t.j41(9,"div")(10,"form",9,0),t.bIt("submit",function(){return t.eBV(n),t.Njj(a.save())}),t.j41(12,"div",10)(13,"div",11)(14,"mat-form-field")(15,"mat-label"),t.EFF(16,"Username"),t.k0s(),t.j41(17,"input",12),t.bIt("keydown",function(m){return t.eBV(n),t.Njj(a.keyDownHandler(m))}),t.k0s(),t.nrm(18,"mat-validation-message",13),t.k0s()(),t.j41(19,"div",11)(20,"mat-form-field")(21,"mat-label"),t.EFF(22,"Password"),t.k0s(),t.j41(23,"input",14),t.bIt("keydown",function(m){return t.eBV(n),t.Njj(a.keyDownHandler(m))}),t.k0s(),t.j41(24,"button",15),t.bIt("click",function(){return t.eBV(n),t.Njj(a.hidePassword=!a.hidePassword)}),t.j41(25,"mat-icon"),t.EFF(26),t.k0s()(),t.nrm(27,"mat-validation-message",13),t.k0s()()(),t.j41(28,"div",10)(29,"div",11)(30,"mat-form-field")(31,"mat-label"),t.EFF(32,"Email"),t.k0s(),t.j41(33,"input",16),t.bIt("keydown",function(m){return t.eBV(n),t.Njj(a.keyDownHandler(m))}),t.k0s(),t.nrm(34,"mat-validation-message",13),t.k0s()(),t.j41(35,"div",11)(36,"mat-form-field")(37,"mat-label"),t.EFF(38,"Confirm Password"),t.k0s(),t.j41(39,"input",17),t.bIt("keydown",function(m){return t.eBV(n),t.Njj(a.keyDownHandler(m))}),t.k0s(),t.j41(40,"button",15),t.bIt("click",function(){return t.eBV(n),t.Njj(a.hideConfirmPassword=!a.hideConfirmPassword)}),t.j41(41,"mat-icon"),t.EFF(42),t.k0s()(),t.nrm(43,"mat-validation-message",13),t.k0s()()(),t.j41(44,"div",10)(45,"div",11)(46,"mat-form-field")(47,"mat-label"),t.EFF(48,"Phone Number"),t.k0s(),t.nrm(49,"input",18),t.DNE(50,$,2,1,"div",19),t.k0s()()(),t.j41(51,"div",10)(52,"div",20),t.EFF(53," \xa0 "),t.k0s()(),t.j41(54,"div",10)(55,"div",21)(56,"button",22),t.EFF(57,"Save "),t.k0s(),t.EFF(58,"\xa0\xa0 "),t.j41(59,"button",23),t.bIt("click",function(){return t.eBV(n),t.Njj(a.cancel())}),t.EFF(60,"Cancel "),t.k0s()()()()()()()()}2&s&&(t.R7$(8),t.Y8G("authPermission",a.page+"_"+a.permissions.list),t.R7$(2),t.Y8G("formGroup",a.frmUser),t.R7$(8),t.Y8G("control",a.frmUser.controls.userName)("message","Username")("formSubmitted",a.isFormSubmitted),t.R7$(5),t.Y8G("type",a.hidePassword||a.isEditMode?"password":"text"),t.R7$(),t.BMQ("aria-label","Hide password")("aria-pressed",a.hidePassword),t.R7$(2),t.JRh(a.hidePassword?"visibility_off":"visibility"),t.R7$(),t.Y8G("control",a.frmUser.controls.password)("message","Password")("formSubmitted",a.isFormSubmitted),t.R7$(7),t.Y8G("control",a.frmUser.controls.email)("message","Email")("formSubmitted",a.isFormSubmitted),t.R7$(5),t.Y8G("type",a.hideConfirmPassword||a.isEditMode?"password":"text"),t.R7$(),t.BMQ("aria-label","Hide confirm password")("aria-pressed",a.hideConfirmPassword),t.R7$(2),t.JRh(a.hideConfirmPassword?"visibility_off":"visibility"),t.R7$(),t.Y8G("control",a.frmUser.controls.confirmPassword)("message","Confirm Password")("formSubmitted",a.isFormSubmitted),t.R7$(6),t.Y8G("dropSpecialCharacters",!1),t.R7$(),t.Y8G("ngIf",a.frmUser.controls.phoneNumber.errors))},dependencies:[_.bT,d.qT,d.me,d.BC,d.cb,d.j4,d.JD,h.It,h.$z,h.iY,u.rl,u.nJ,u.yw,E.fg,D.An,k.Zr,C.B,M.T,L.X,N.U,A.r],encapsulation:2})}return i})();var S=o(33380),O=o(30932),V=o(21413),X=o(92771),U=o(82798),x=o(14823),H=o(86600);function Y(i,c){if(1&i&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&i){const e=c.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function Q(i,c){if(1&i){const e=t.RV6();t.j41(0,"mat-form-field",13)(1,"mat-select",15),t.bIt("selectionChange",function(a){t.eBV(e);const n=t.XpG(2);return t.Njj(n._changePageSize(a.value))}),t.Z7z(2,Y,2,2,"mat-option",16,t.fX1),t.k0s()()}if(2&i){const e=t.XpG(2);t.Y8G("appearance",e._formFieldAppearance)("color",e.color),t.R7$(),t.Y8G("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),t.R7$(),t.Dyx(e._displayedPageSizeOptions)}}function J(i,c){if(1&i&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.JRh(e.pageSize)}}function W(i,c){if(1&i&&(t.j41(0,"div",2)(1,"div",12),t.EFF(2),t.k0s(),t.DNE(3,Q,4,7,"mat-form-field",13)(4,J,2,1,"div",14),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.BMQ("id",e._pageSizeLabelId),t.R7$(),t.SpI(" ",e._intl.itemsPerPageLabel," "),t.R7$(),t.vxM(3,e._displayedPageSizeOptions.length>1?3:-1),t.R7$(),t.vxM(4,e._displayedPageSizeOptions.length<=1?4:-1)}}function Z(i,c){if(1&i){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.firstPage())}),t.qSk(),t.j41(1,"svg",7),t.nrm(2,"path",18),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),t.BMQ("aria-label",e._intl.firstPageLabel)}}function K(i,c){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.lastPage())}),t.qSk(),t.j41(1,"svg",7),t.nrm(2,"path",20),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),t.BMQ("aria-label",e._intl.lastPageLabel)}}let f=(()=>{class i{constructor(){this.changes=new V.B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,s,a)=>{if(0==a||0==s)return`0 of ${a}`;const n=e*s;return`${n+1} \u2013 ${n<(a=Math.max(a,0))?Math.min(n+s,a):n+s} of ${a}`}}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const tt={provide:f,deps:[[new t.Xx1,new t.kdw,f]],useFactory:function q(i){return i||new f}},it=new t.nKC("MAT_PAGINATOR_DEFAULT_OPTIONS");let at=0,w=(()=>{class i{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(s=>(0,t.Udg)(s,0)),this._updateDisplayedPageSizeOptions()}constructor(e,s,a){if(this._intl=e,this._changeDetectorRef=s,this._pageSizeLabelId="mat-paginator-page-size-label-"+at++,this._isInitialized=!1,this._initializedStream=new X.m(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new t.bkB,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),a){const{pageSize:n,pageSizeOptions:l,hidePageSize:m,showFirstLastButtons:v}=a;null!=n&&(this._pageSize=n),null!=l&&(this._pageSizeOptions=l),null!=m&&(this.hidePageSize=m),null!=v&&(this.showFirstLastButtons=v)}this._formFieldAppearance=a?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const a=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(a)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,s)=>e-s),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(f),t.rXU(t.gRc),t.rXU(it,8))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[t.Mj6.HasDecoratorInputTransform,"pageIndex","pageIndex",t.Udg],length:[t.Mj6.HasDecoratorInputTransform,"length","length",t.Udg],pageSize:[t.Mj6.HasDecoratorInputTransform,"pageSize","pageSize",t.Udg],pageSizeOptions:"pageSizeOptions",hidePageSize:[t.Mj6.HasDecoratorInputTransform,"hidePageSize","hidePageSize",t.L39],showFirstLastButtons:[t.Mj6.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",t.L39],selectConfig:"selectConfig",disabled:[t.Mj6.HasDecoratorInputTransform,"disabled","disabled",t.L39]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[t.GFd,t.aNF],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(s,a){1&s&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,W,5,4,"div",2),t.j41(3,"div",3)(4,"div",4),t.EFF(5),t.k0s(),t.DNE(6,Z,3,5,"button",5),t.j41(7,"button",6),t.bIt("click",function(){return a.previousPage()}),t.qSk(),t.j41(8,"svg",7),t.nrm(9,"path",8),t.k0s()(),t.joV(),t.j41(10,"button",9),t.bIt("click",function(){return a.nextPage()}),t.qSk(),t.j41(11,"svg",7),t.nrm(12,"path",10),t.k0s()(),t.DNE(13,K,3,5,"button",11),t.k0s()()()),2&s&&(t.R7$(2),t.vxM(2,a.hidePageSize?-1:2),t.R7$(3),t.SpI(" ",a._intl.getRangeLabel(a.pageIndex,a.pageSize,a.length)," "),t.R7$(),t.vxM(6,a.showFirstLastButtons?6:-1),t.R7$(),t.Y8G("matTooltip",a._intl.previousPageLabel)("matTooltipDisabled",a._previousButtonsDisabled())("matTooltipPosition","above")("disabled",a._previousButtonsDisabled()),t.BMQ("aria-label",a._intl.previousPageLabel),t.R7$(3),t.Y8G("matTooltip",a._intl.nextPageLabel)("matTooltipDisabled",a._nextButtonsDisabled())("matTooltipPosition","above")("disabled",a._nextButtonsDisabled()),t.BMQ("aria-label",a._intl.nextPageLabel),t.R7$(3),t.vxM(13,a.showFirstLastButtons?13:-1))},dependencies:[u.rl,U.VO,H.wT,h.iY,x.oV],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return i})(),st=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[tt],imports:[h.Hl,U.Ve,x.uc,w]})}return i})();var nt=o(49239);let j=(()=>{class i{constructor(){this.searchChanged=new t.bkB,this.searchData=[],this.searchKey="userName,firstName,lastNumber,email,phoneNumber,parkingAuthorityName"}updateSearchTerms(e,s){this.searchData.isActive=this.searchInactive.searchBox.value,this.searchData[e]=s,console.log("search data for inactive",this.searchData),this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["user-search-panel"]],viewQuery:function(s,a){if(1&s&&t.GBs(p.$A,5),2&s){let n;t.mGM(n=t.lsd())&&(a.searchInactive=n.first)}},outputs:{searchChanged:"searchChanged"},decls:3,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"]],template:function(s,a){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(l){return a.updateSearchTerms(a.searchKey,l)}),t.k0s()()()),2&s&&(t.R7$(2),t.Y8G("placeHolder","Search User"))},dependencies:[nt.D],encapsulation:2})}return i})();var ot=o(96081);const rt=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),lt=()=>["../","add"],dt=i=>["../","edit",i];function ct(i,c){1&i&&(t.j41(0,"a",19)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",20),t.k0s()),2&i&&t.Y8G("routerLink",t.lJ4(1,lt))}function mt(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=c.value;t.R7$(),t.JRh(t.i5U(2,1,e,"MM/dd/yyyy hh:mm a"))}}function pt(i,c){if(1&i&&(t.j41(0,"a",23)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&i){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,dt,e.id))}}function gt(i,c){if(1&i){const e=t.RV6();t.j41(0,"a",27),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,n=t.XpG();return t.Njj(n.toggleActivate(a.id,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function ht(i,c){if(1&i){const e=t.RV6();t.j41(0,"a",28),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,n=t.XpG();return t.Njj(n.toggleActivate(a.id,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function ut(i,c){if(1&i&&(t.qex(0,24),t.DNE(1,gt,3,0,"a",25)(2,ht,3,0,"a",26),t.bVm()),2&i){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function ft(i,c){if(1&i&&t.DNE(0,pt,3,3,"a",21)(1,ut,3,2,"ng-container",22),2&i){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}let z=(()=>{class i{constructor(e,s){this.userService=e,this.notificationService=s,this.userData=[],this.page=r.Wt.user,this.permissions=r.eZ,this.searchData={isActive:!1},this.pageIndex=1,this.pageSize=10,this.totalItems=0}ngOnInit(){this.getUserData()}getUserData(){this.loading=!0,this.userService.getUsers(this.pageIndex,this.pageSize).subscribe(e=>{this.loading=!1,this.userData=e.items,this.totalItems=e.totalCount},e=>{this.loading=!1,console.log(e)})}onPageChange(e){this.pageIndex=e.pageIndex+1,this.getUserData()}getRoles(e){return e.map(s=>s.roleName).join(", ")}updateSearch(e){this.searchData={...e},console.log("search",e)}isActiveRow(e){return{"text-danger":!e.isActive}}toggleActivate(e,s){confirm(`Are you sure you want to ${s?"Activate":"Deactivate"} ?`)&&this.userService.toggleActivate(e,s).subscribe(n=>{n.isSuccess?this.getUserData():this.notificationService.warning(n.message)},n=>{this.notificationService.error("Something went wrong.")})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(b),t.rXU(T.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["ng-component"]],decls:23,vars:18,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","User Name","prop","userName"],["name","Email","prop","email"],["name","Phone Number","prop","phoneNumber"],["name","Registered On","prop","createdDate"],["ngx-datatable-cell-template",""],["name","Actions"],[3,"page","pageSize","pageIndex","length"],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["title","Edit","class","button-padding",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["title","Edit",1,"button-padding",3,"routerLink"],[1,"ml-10"],["href","#","title","Make Inactive","class","button-padding",3,"click",4,"ngIf"],["href","#","title","Make Active","class","button-padding",3,"click",4,"ngIf"],["href","#","title","Make Inactive",1,"button-padding",3,"click"],["href","#","title","Make Active",1,"button-padding",3,"click"]],template:function(s,a){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"User List"),t.k0s()(),t.j41(7,"div",6)(8,"div"),t.DNE(9,ct,4,2,"a",7),t.k0s()()(),t.j41(10,"div",8)(11,"div",9)(12,"user-search-panel",10),t.bIt("searchChanged",function(l){return a.updateSearch(l)}),t.k0s(),t.j41(13,"ngx-datatable",11),t.nI1(14,"searchtable"),t.nrm(15,"ngx-datatable-column",12)(16,"ngx-datatable-column",13)(17,"ngx-datatable-column",14),t.j41(18,"ngx-datatable-column",15),t.DNE(19,mt,3,4,"ng-template",16),t.k0s(),t.j41(20,"ngx-datatable-column",17),t.DNE(21,ft,2,2,"ng-template",16),t.k0s()(),t.j41(22,"mat-paginator",18),t.bIt("page",function(l){return a.onPageChange(l)}),t.k0s()()()()()()),2&s&&(t.R7$(9),t.Y8G("authPermission",a.page+"_"+a.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(14,14,a.userData,a.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",a.pageSize)("loadingIndicator",a.loading)("scrollbarH",!0)("rowClass",a.isActiveRow)("messages",t.lJ4(17,rt)),t.R7$(9),t.Y8G("pageSize",a.pageSize)("pageIndex",a.pageIndex-1)("length",a.totalItems))},dependencies:[_.bT,h.It,D.An,g.Wk,S.ge,S.ed,S.QI,O.a,C.B,w,j,_.vh,ot.j],encapsulation:2})}return i})();const vt=[{path:"",component:(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(s,a){1&s&&t.nrm(0,"router-outlet")},dependencies:[g.n3],encapsulation:2})}return i})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[r.LL],component:z,data:{page:r.Wt.user,action:r.eZ.list,title:"User"}},{path:"add",canActivate:[r.LL],data:{page:r.Wt.user,action:r.eZ.create,title:"User"},component:P},{path:"edit/:id",canActivate:[r.LL],data:{page:r.Wt.user,action:r.eZ.edit,title:"User"},component:P}]}];let bt=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[g.iI.forChild(vt),g.iI]})}return i})();var _t=o(9159);let Pt=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[b,y.W,(0,k._c)()],imports:[p.Gg,bt,_t.tP,st]})}return i})()}}]);