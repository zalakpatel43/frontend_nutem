"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[299],{14299:(ve,g,d)=>{d.r(g),d.d(g,{VendorMasterModule:()=>le});var y=d(71774),c=d(18498),e=d(54438);let h=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(a,o){1&a&&e.nrm(0,"router-outlet")},dependencies:[c.n3],encapsulation:2})}return r})();var n=d(89417),b=d(80775),m=d(4434),D=d(69189),I=d(52495);let p=(()=>{class r extends m.QP{constructor(t){super(t,"vendormaster"),this._baseService=t}generateVendorCode(){return this._baseService.get(`${m.T6.vendormaster}/GenerateCode`)}static#e=this.\u0275fac=function(a){return new(a||r)(e.KVO(m.dD))};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac})}return r})();var F=d(45794),k=d(48686),N=d(98937),_=d(60177),u=d(88834),C=d(32102),S=d(99631),M=d(99213),G=d(82798),A=d(86600),j=d(30220),R=d(58777),x=d(67133),$=d(71893);function L(r,i){if(1&r){const t=e.RV6();e.j41(0,"a",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(1," View List "),e.k0s()}}function Y(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function T(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function P(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function w(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function X(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function B(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",42)(1,"div",15)(2,"mat-form-field"),e.nrm(3,"input",43),e.j41(4,"mat-label"),e.EFF(5,"First Name"),e.k0s(),e.nrm(6,"input",44)(7,"mat-validation-message",17),e.k0s()(),e.j41(8,"div",15)(9,"mat-form-field")(10,"mat-label"),e.EFF(11,"Last Name"),e.k0s(),e.nrm(12,"input",45)(13,"mat-validation-message",17),e.k0s()(),e.j41(14,"div",15)(15,"mat-form-field")(16,"mat-label"),e.EFF(17,"Mobile No"),e.k0s(),e.nrm(18,"input",46),e.k0s()(),e.j41(19,"div",15)(20,"mat-form-field")(21,"mat-label"),e.EFF(22,"Landline No"),e.k0s(),e.nrm(23,"input",47),e.k0s()(),e.j41(24,"div",15)(25,"mat-form-field")(26,"mat-label"),e.EFF(27,"Email"),e.k0s(),e.nrm(28,"input",19)(29,"mat-validation-message",17),e.k0s()(),e.j41(30,"div",15)(31,"mat-form-field")(32,"mat-label"),e.EFF(33,"Address 1"),e.k0s(),e.nrm(34,"input",48)(35,"mat-validation-message",17),e.k0s()(),e.j41(36,"div",15)(37,"mat-form-field")(38,"mat-label"),e.EFF(39,"Address 2"),e.k0s(),e.nrm(40,"input",49),e.k0s()(),e.j41(41,"div",15)(42,"mat-form-field")(43,"mat-label"),e.EFF(44,"City"),e.k0s(),e.nrm(45,"input",24)(46,"mat-validation-message",17),e.k0s()(),e.j41(47,"div",15)(48,"mat-form-field")(49,"mat-label"),e.EFF(50,"State"),e.k0s(),e.j41(51,"mat-select",25),e.DNE(52,w,2,2,"mat-option",26),e.k0s(),e.nrm(53,"mat-validation-message",17),e.k0s()(),e.j41(54,"div",15)(55,"mat-form-field")(56,"mat-label"),e.EFF(57,"Country"),e.k0s(),e.j41(58,"mat-select",27),e.DNE(59,X,2,2,"mat-option",26),e.k0s(),e.nrm(60,"mat-validation-message",17),e.k0s()(),e.j41(61,"div",15)(62,"mat-form-field")(63,"mat-label"),e.EFF(64,"Department"),e.k0s(),e.nrm(65,"input",50)(66,"mat-validation-message",17),e.k0s()(),e.j41(67,"div",15)(68,"mat-form-field")(69,"mat-label"),e.EFF(70,"Designation"),e.k0s(),e.nrm(71,"input",51)(72,"mat-validation-message",17),e.k0s()(),e.j41(73,"div",15)(74,"mat-form-field")(75,"mat-label"),e.EFF(76,"Reporting To"),e.k0s(),e.nrm(77,"input",52),e.k0s()(),e.j41(78,"div",53)(79,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addVendorContactInformation())}),e.j41(80,"mat-icon"),e.EFF(81,"add"),e.k0s()(),e.j41(82,"button",54),e.bIt("click",function(){const o=e.eBV(t).index,s=e.XpG();return e.Njj(s.removeVendorContactInformation(o))}),e.j41(83,"mat-icon"),e.EFF(84,"delete"),e.k0s()()()()}if(2&r){const t=i.$implicit,a=i.index,o=e.XpG();e.Y8G("formGroupName",a),e.R7$(7),e.Y8G("control",t.get("firstName"))("message","First Name")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("lastName"))("message","Last Name")("formSubmitted",o.isFormSubmitted),e.R7$(16),e.Y8G("control",t.get("email"))("message","Email")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("address1"))("message","Address 1")("formSubmitted",o.isFormSubmitted),e.R7$(11),e.Y8G("control",t.get("city"))("message","City")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",o.statesList),e.R7$(),e.Y8G("control",t.get("stateId"))("message","State")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",o.countriesList),e.R7$(),e.Y8G("control",t.get("countryId"))("message","Country")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("department"))("message","Department")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("designation"))("message","Designation")("formSubmitted",o.isFormSubmitted)}}function O(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function U(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function q(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",42)(1,"div",15)(2,"mat-form-field"),e.nrm(3,"input",43),e.j41(4,"mat-label"),e.EFF(5,"Location"),e.k0s(),e.nrm(6,"input",55)(7,"mat-validation-message",17),e.k0s()(),e.j41(8,"div",15)(9,"mat-form-field")(10,"mat-label"),e.EFF(11,"Mobile No"),e.k0s(),e.nrm(12,"input",46)(13,"mat-validation-message",17),e.k0s()(),e.j41(14,"div",15)(15,"mat-form-field")(16,"mat-label"),e.EFF(17,"Landline No"),e.k0s(),e.nrm(18,"input",47)(19,"mat-validation-message",17),e.k0s()(),e.j41(20,"div",15)(21,"mat-form-field")(22,"mat-label"),e.EFF(23,"Email"),e.k0s(),e.nrm(24,"input",19)(25,"mat-validation-message",17),e.k0s()(),e.j41(26,"div",15)(27,"mat-form-field")(28,"mat-label"),e.EFF(29,"Address 1"),e.k0s(),e.nrm(30,"input",48)(31,"mat-validation-message",17),e.k0s()(),e.j41(32,"div",15)(33,"mat-form-field")(34,"mat-label"),e.EFF(35,"Address 2"),e.k0s(),e.nrm(36,"input",49),e.k0s()(),e.j41(37,"div",15)(38,"mat-form-field")(39,"mat-label"),e.EFF(40,"City"),e.k0s(),e.nrm(41,"input",24)(42,"mat-validation-message",17),e.k0s()(),e.j41(43,"div",15)(44,"mat-form-field")(45,"mat-label"),e.EFF(46,"State"),e.k0s(),e.j41(47,"mat-select",25),e.DNE(48,O,2,2,"mat-option",26),e.k0s(),e.nrm(49,"mat-validation-message",17),e.k0s()(),e.j41(50,"div",15)(51,"mat-form-field")(52,"mat-label"),e.EFF(53,"Country"),e.k0s(),e.j41(54,"mat-select",27),e.DNE(55,U,2,2,"mat-option",26),e.k0s(),e.nrm(56,"mat-validation-message",17),e.k0s()(),e.j41(57,"div",15)(58,"mat-form-field")(59,"mat-label"),e.EFF(60,"GST No"),e.k0s(),e.nrm(61,"input",56)(62,"mat-validation-message",17),e.k0s()(),e.j41(63,"div",53)(64,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addVendorAddressInformation())}),e.j41(65,"mat-icon"),e.EFF(66,"add"),e.k0s()(),e.j41(67,"button",54),e.bIt("click",function(){const o=e.eBV(t).index,s=e.XpG();return e.Njj(s.removeVendorAddressInformation(o))}),e.j41(68,"mat-icon"),e.EFF(69,"delete"),e.k0s()()()()}if(2&r){const t=i.$implicit,a=i.index,o=e.XpG();e.Y8G("formGroupName",a),e.R7$(7),e.Y8G("control",t.get("location"))("message","Location")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("mobileNo"))("message","Mobile No")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("landlineNo"))("message","Landline No")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("email"))("message","Email")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("address1"))("message","Address 1")("formSubmitted",o.isFormSubmitted),e.R7$(11),e.Y8G("control",t.get("city"))("message","City")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",o.statesList),e.R7$(),e.Y8G("control",t.get("stateId"))("message","State")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",o.countriesList),e.R7$(),e.Y8G("control",t.get("countryId"))("message","Country")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("gstNo"))("message","GST No")("formSubmitted",o.isFormSubmitted)}}function H(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",42)(1,"div",57)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Document Name"),e.k0s(),e.nrm(5,"input",58)(6,"mat-validation-message",17),e.k0s()(),e.j41(7,"div",57),e.nrm(8,"input",59),e.j41(9,"file-uploader",60),e.bIt("removeDocument",function(){const o=e.eBV(t).index,s=e.XpG();return e.Njj(s.removeEditFile(null==s.vendorMasterData?null:s.vendorMasterData.vendorDocuments[o]))})("selectedFile",function(){const o=e.eBV(t).index,s=e.XpG();return e.Njj(s.selectedFile(null==s.vendorMasterData?null:s.vendorMasterData.vendorDocuments[o]))}),e.k0s()(),e.j41(10,"div",53)(11,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addVendorDocument())}),e.j41(12,"mat-icon"),e.EFF(13,"add"),e.k0s()(),e.j41(14,"button",54),e.bIt("click",function(){const o=e.eBV(t).index,s=e.XpG();return e.Njj(s.removeVendorDocument(o))}),e.j41(15,"mat-icon"),e.EFF(16,"delete"),e.k0s()()()()}if(2&r){const t=i.$implicit,a=i.index,o=e.XpG();e.Y8G("formGroupName",a),e.R7$(6),e.Y8G("control",t.get("documentName"))("message","Document Name")("formSubmitted",o.isFormSubmitted),e.R7$(3),e.Y8G("documents",null==o.vendorMasterData||null==o.vendorMasterData.vendorDocuments[a]?null:o.vendorMasterData.vendorDocuments[a].picture)("isEditMode",o.isEditMode)("label","")("hideUploader",null==o.vendorMasterData||null==o.vendorMasterData.vendorDocuments[a]?null:o.vendorMasterData.vendorDocuments[a].hideUploader)("uploader",null==o.vendorMasterData||null==o.vendorMasterData.vendorDocuments[a]||null==o.vendorMasterData.vendorDocuments[a].uploader?null:o.vendorMasterData.vendorDocuments[a].uploader.uploader)}}function W(r,i){if(1&r&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Z(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",42)(1,"div",14)(2,"div",57)(3,"mat-form-field"),e.nrm(4,"input",43),e.j41(5,"mat-label"),e.EFF(6,"Product Category"),e.k0s(),e.j41(7,"mat-select",61),e.DNE(8,W,2,2,"mat-option",26),e.k0s(),e.nrm(9,"mat-validation-message",17),e.k0s()(),e.j41(10,"div",57)(11,"mat-form-field")(12,"mat-label"),e.EFF(13,"Expected Delivery Days"),e.k0s(),e.nrm(14,"input",62)(15,"mat-validation-message",17),e.k0s()(),e.j41(16,"div",63)(17,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addVendorProductCategory())}),e.j41(18,"mat-icon"),e.EFF(19,"add"),e.k0s()(),e.j41(20,"button",54),e.bIt("click",function(){const o=e.eBV(t).index,s=e.XpG();return e.Njj(s.removeVendorProductCategory(o))}),e.j41(21,"mat-icon"),e.EFF(22,"delete"),e.k0s()()()()()}if(2&r){const t=i.$implicit,a=i.index,o=e.XpG();e.Y8G("formGroupName",a),e.R7$(8),e.Y8G("ngForOf",o.productCategoriesList),e.R7$(),e.Y8G("control",t.get("productCategoryId"))("message","Product Category")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",t.get("expectedDeliveryDays"))("message","Expected Delivery Days")("formSubmitted",o.isFormSubmitted)}}let v=(()=>{class r{constructor(t,a,o,s,l,ce,ue,pe){this.fb=t,this.activatedRoute=a,this.router=o,this.vendorMasterService=s,this.listService=l,this.toastr=ce,this.termsAndConditionsService=ue,this.modalService=pe,this.isEditMode=!1,this.isFormSubmitted=!1,this.page=m.Wt.vendorMaster,this.permissions=m.eZ,this.uploadDocuments=[],this.uploadedCount=0,this.termsConditionsList=[],this.statesList=[],this.countriesList=[],this.productCategoriesList=[],this.createForm()}ngOnInit(){this.loadDropdowns(),this.getVendorMasterRoute()}createForm(){this.vendorMasterForm=this.fb.group({vendorCode:[{value:"",disabled:!0},[n.k0.required]],vendorName:["",[n.k0.required,n.k0.maxLength(256)]],email:["",[n.k0.required,n.k0.email,n.k0.maxLength(128)]],phone:["",[n.k0.required,n.k0.maxLength(32)]],mobile:["",[n.k0.required,n.k0.maxLength(32)]],baseAddress1:["",[n.k0.required,n.k0.maxLength(128)]],baseAddress2:["",n.k0.maxLength(128)],city:["",[n.k0.required,n.k0.maxLength(128)]],stateId:[null,n.k0.required],countryId:[null,n.k0.required],zipCode:["",[n.k0.required,n.k0.maxLength(32)]],gstNumber:["",[n.k0.required,n.k0.maxLength(64)]],termsConditionsId:[null,n.k0.required],isActive:[!0],vendorContactInformations:this.fb.array([]),vendorAddressInformations:this.fb.array([]),vendorDocuments:this.fb.array([]),vendorProductCategories:this.fb.array([])})}getVendorMasterRoute(){this.routerSub=this.activatedRoute.params.subscribe(t=>{this.isEditMode=!m.ov.isEmpty(t.id),this.createForm(),this.isEditMode?(this.vendorMasterId=+t.id,this.getVendorMasterDetails(this.vendorMasterId)):this.generateVendorCode()})}get vendorContactInformations(){return this.vendorMasterForm.get("vendorContactInformations")}get vendorAddressInformations(){return this.vendorMasterForm.get("vendorAddressInformations")}get vendorDocuments(){return this.vendorMasterForm.get("vendorDocuments")}get vendorProductCategories(){return this.vendorMasterForm.get("vendorProductCategories")}addVendorContactInformation(t){this.vendorContactInformations.push(this.fb.group({id:[t?t.id:0],firstName:[t?t.firstName:"",[n.k0.required,n.k0.maxLength(128)]],lastName:[t?t.lastName:"",[n.k0.required,n.k0.maxLength(128)]],mobileNo:[t?t.mobileNo:"",n.k0.maxLength(128)],landlineNo:[t?t.landlineNo:"",n.k0.maxLength(128)],email:[t?t.email:"",[n.k0.required,n.k0.email,n.k0.maxLength(128)]],address1:[t?t.address1:"",[n.k0.required,n.k0.maxLength(128)]],address2:[t?t.address2:"",n.k0.maxLength(128)],city:[t?t.city:"",[n.k0.required,n.k0.maxLength(128)]],stateId:[t?t.stateId:null,n.k0.required],countryId:[t?t.countryId:null,n.k0.required],department:[t?t.department:"",[n.k0.required,n.k0.maxLength(128)]],designation:[t?t.designation:"",[n.k0.required,n.k0.maxLength(128)]],reportingTo:[t?t.reportingTo:"",n.k0.maxLength(128)]}))}addVendorAddressInformation(t){this.vendorAddressInformations.push(this.fb.group({id:[t?t.id:0],location:[t?t.location:"",[n.k0.required,n.k0.maxLength(256)]],mobileNo:[t?t.mobileNo:"",[n.k0.required,n.k0.maxLength(128)]],landlineNo:[t?t.landlineNo:"",[n.k0.required,n.k0.maxLength(128)]],email:[t?t.email:"",[n.k0.required,n.k0.email,n.k0.maxLength(256)]],address1:[t?t.address1:"",[n.k0.required,n.k0.maxLength(128)]],address2:[t?t.address2:"",n.k0.maxLength(128)],city:[t?t.city:"",[n.k0.required,n.k0.maxLength(128)]],stateId:[t?t.stateId:null,n.k0.required],countryId:[t?t.countryId:null,n.k0.required],gstNo:[t?t.gstNo:"",[n.k0.required,n.k0.maxLength(128)]]}))}addVendorDocument(t){let a=!0;t||(a=!1,(t=new b.B7).pictureId=null,t.picture=null,t.documentName="",t.hideUploader=!1,t.uniqueId=m.ov.generateUUID(),t.uploader=new m.o7({maxAllowedFile:1,completeCallback:this.uploadCompleted.bind(this,t),onWhenAddingFileFailed:this.uploadFailed.bind(this)})),this.vendorDocuments.push(this.fb.group({documentName:[t?t.documentName:"",[n.k0.required,n.k0.maxLength(256)]],pictureId:[t?t.pictureId:null],uniqueId:[t?t.uniqueId:null]})),m.ov.isEmpty(this.vendorMasterData)&&(this.vendorMasterData=new b.L1),a||this.vendorMasterData.vendorDocuments.push(t)}addVendorProductCategory(t){this.vendorProductCategories.push(this.fb.group({id:[t?t.id:0],productCategoryId:[t?t.productCategoryId:null,n.k0.required],expectedDeliveryDays:[t?t.expectedDeliveryDays:null,n.k0.required]}))}removeVendorContactInformation(t){this.vendorContactInformations.removeAt(t)}removeVendorAddressInformation(t){this.vendorAddressInformations.removeAt(t)}removeVendorDocument(t){this.vendorDocuments.removeAt(t),this.vendorMasterData.vendorDocuments.splice(t,1)}removeVendorProductCategory(t){this.vendorProductCategories.removeAt(t)}generateVendorCode(){this.vendorMasterService.generateVendorCode().subscribe(t=>{this.vendorMasterForm.patchValue({vendorCode:t})},t=>{console.log(t)})}loadDropdowns(){this.termsAndConditionsService.getTermsAndConditionsList().subscribe(t=>{this.termsConditionsList=t}),this.listService.getList("productcategories").subscribe(t=>{this.productCategoriesList=t}),this.listService.getAllStates().subscribe(t=>{this.statesList=t}),this.listService.getCountries().subscribe(t=>{this.countriesList=t})}getVendorMasterDetails(t){this.vendorMasterService.getById(t).subscribe(a=>{this.vendorMasterData=a,m.ov.isNotEmpty(this.vendorMasterData.vendorDocuments)&&this.vendorMasterData.vendorDocuments.forEach(o=>{o.hideUploader=o.pictureId>0,o.uniqueId=m.ov.generateUUID(),o.uploader=new m.o7({maxAllowedFile:1,completeCallback:this.uploadCompleted.bind(this,o),onWhenAddingFileFailed:this.uploadFailed.bind(this)})}),this.setVendorData()})}setVendorData(){this.vendorMasterForm.patchValue(this.vendorMasterData),this.vendorMasterData.vendorContactInformations.forEach(t=>this.addVendorContactInformation(t)),this.vendorMasterData.vendorAddressInformations.forEach(t=>this.addVendorAddressInformation(t)),this.vendorMasterData.vendorDocuments.forEach(t=>this.addVendorDocument(t)),this.vendorMasterData.vendorProductCategories.forEach(t=>this.addVendorProductCategory(t))}createVendor(){let t=this.vendorMasterForm.getRawValue();this.vendorMasterData=Object.assign(this.vendorMasterData,this.vendorMasterData,t),this.vendorMasterService.add(t).subscribe(()=>{this.cancel(),this.toastr.success("Vendor details added successfully.")},a=>{this.error=a})}updateVendor(){let t=this.vendorMasterForm.getRawValue();this.vendorMasterData=Object.assign(this.vendorMasterData,this.vendorMasterData,t),this.vendorMasterService.update(this.vendorMasterData.id,this.vendorMasterData).subscribe(()=>{this.cancel(),this.toastr.success("Vendor details updated successfully.")},a=>{this.error=a})}save(){if(this.isFormSubmitted=!0,!this.vendorMasterForm.invalid){if(this.vendorMasterData.vendorDocuments.some(t=>!t.pictureId&&!t.uploader.hasFile()))return void this.toastr.warning("Please upload all the required documents.");this.uploadDocuments=this.vendorMasterData.vendorDocuments.filter(t=>t.uploader.hasFile()),this.uploadedCount=0,this.uploadDocuments.length>0?this.uploadDocuments.forEach((t,a)=>{t.uploader.hasFile()&&t.uploader.uploadFiles({uploadType:I.Sq.Vendor,id:"0"})}):this.isEditMode?this.updateVendor():this.createVendor()}}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}hasFile(t){return this.isEditMode&&m.ov.isNotEmpty(t.picture)||t.uploader.hasFile()}uploadCompleted(t,a){this.uploadedCount++;const o=this.vendorDocuments.controls.find(s=>s.get("uniqueId").value===t.uniqueId);o&&o.get("pictureId").setValue(a.id),this.uploadedCount===this.uploadDocuments.length&&(this.isEditMode?this.updateVendor():this.createVendor())}uploadFailed(){this.toastr.warning("You are only allowed to upload jpg/jpeg/png/pdf/doc files.")}selectedFile(t){t.hideUploader=!0}removeEditFile(t){t.pictureId=null,t.picture=null,t.hideUploader=!1,t.uploader.uploader.clearQueue()}filePreview(t,a,o){this.filePreviewModalRef=this.modalService.show(D.v,{class:"modal-lg modal-tr"}),this.filePreviewModalRef.content.setData({file:t,type:a,title:o})}ngOnDestroy(){this.routerSub.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||r)(e.rXU(n.ze),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(p),e.rXU(m.aG),e.rXU(F.tw),e.rXU(k.S),e.rXU(N.I8))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-vendor-master-add-edit"]],decls:142,vars:45,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center","mb-4"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end"],[1,"mb-0"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"ngSubmit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","vendorCode"],[3,"control","message","formSubmitted"],["type","text","matInput","","formControlName","vendorName"],["type","email","matInput","","formControlName","email"],["type","text","matInput","","formControlName","phone"],["type","text","matInput","","formControlName","mobile"],["type","text","matInput","","formControlName","baseAddress1"],["type","text","matInput","","formControlName","baseAddress2"],["type","text","matInput","","formControlName","city"],["formControlName","stateId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","countryId"],["type","text","matInput","","formControlName","zipCode"],["type","text","matInput","","formControlName","gstNumber"],["formControlName","termsConditionsId"],[1,"card-header","d-flex","align-items-center","justify-content-between"],["type","button","mat-flat-button","","color","primary",3,"click"],["formArrayName","vendorContactInformations"],["class","row mt-3",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","vendorAddressInformations"],["formArrayName","vendorDocuments"],["formArrayName","vendorProductCategories"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button",2,"margin-right","10px"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[3,"value"],[1,"row","mt-3",3,"formGroupName"],["type","hidden","formControlName","id"],["type","text","matInput","","formControlName","firstName"],["type","text","matInput","","formControlName","lastName"],["type","text","matInput","","formControlName","mobileNo"],["type","text","matInput","","formControlName","landlineNo"],["type","text","matInput","","formControlName","address1"],["type","text","matInput","","formControlName","address2"],["type","text","matInput","","formControlName","department"],["type","text","matInput","","formControlName","designation"],["type","text","matInput","","formControlName","reportingTo"],[1,"col-md-2","d-flex","align-items-center"],["type","button","mat-icon-button","","color","warn",3,"click"],["type","text","matInput","","formControlName","location"],["type","text","matInput","","formControlName","gstNo"],[1,"col-md-5"],["type","text","matInput","","formControlName","documentName"],["type","hidden","formControlName","uniqueId"],[3,"removeDocument","selectedFile","documents","isEditMode","label","hideUploader","uploader"],["formControlName","productCategoryId"],["type","number","matInput","","formControlName","expectedDeliveryDays"],[1,"col-md-2"]],template:function(a,o){if(1&a){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),e.nrm(6,"i",7),e.EFF(7," Add/Edit Vendor"),e.k0s()(),e.j41(8,"div",8),e.DNE(9,L,2,0,"a",9),e.k0s()(),e.j41(10,"form",10,0),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(o.save())}),e.j41(12,"div",11)(13,"div",12)(14,"h5",6),e.EFF(15,"Basic Details"),e.k0s()(),e.j41(16,"div",13)(17,"div",14)(18,"div",15)(19,"mat-form-field")(20,"mat-label"),e.EFF(21,"Vendor Code"),e.k0s(),e.nrm(22,"input",16)(23,"mat-validation-message",17),e.k0s()(),e.j41(24,"div",15)(25,"mat-form-field")(26,"mat-label"),e.EFF(27,"Vendor Name"),e.k0s(),e.nrm(28,"input",18)(29,"mat-validation-message",17),e.k0s()(),e.j41(30,"div",15)(31,"mat-form-field")(32,"mat-label"),e.EFF(33,"Email"),e.k0s(),e.nrm(34,"input",19)(35,"mat-validation-message",17),e.k0s()()(),e.j41(36,"div",14)(37,"div",15)(38,"mat-form-field")(39,"mat-label"),e.EFF(40,"Phone"),e.k0s(),e.nrm(41,"input",20)(42,"mat-validation-message",17),e.k0s()(),e.j41(43,"div",15)(44,"mat-form-field")(45,"mat-label"),e.EFF(46,"Mobile"),e.k0s(),e.nrm(47,"input",21)(48,"mat-validation-message",17),e.k0s()(),e.j41(49,"div",15)(50,"mat-form-field")(51,"mat-label"),e.EFF(52,"Base Address 1"),e.k0s(),e.nrm(53,"input",22)(54,"mat-validation-message",17),e.k0s()()(),e.j41(55,"div",14)(56,"div",15)(57,"mat-form-field")(58,"mat-label"),e.EFF(59,"Base Address 2"),e.k0s(),e.nrm(60,"input",23),e.k0s()(),e.j41(61,"div",15)(62,"mat-form-field")(63,"mat-label"),e.EFF(64,"City"),e.k0s(),e.nrm(65,"input",24)(66,"mat-validation-message",17),e.k0s()(),e.j41(67,"div",15)(68,"mat-form-field")(69,"mat-label"),e.EFF(70,"State"),e.k0s(),e.j41(71,"mat-select",25),e.DNE(72,Y,2,2,"mat-option",26),e.k0s(),e.nrm(73,"mat-validation-message",17),e.k0s()()(),e.j41(74,"div",14)(75,"div",15)(76,"mat-form-field")(77,"mat-label"),e.EFF(78,"Country"),e.k0s(),e.j41(79,"mat-select",27),e.DNE(80,T,2,2,"mat-option",26),e.k0s(),e.nrm(81,"mat-validation-message",17),e.k0s()(),e.j41(82,"div",15)(83,"mat-form-field")(84,"mat-label"),e.EFF(85,"Zipcode"),e.k0s(),e.nrm(86,"input",28)(87,"mat-validation-message",17),e.k0s()(),e.j41(88,"div",15)(89,"mat-form-field")(90,"mat-label"),e.EFF(91,"GST Number"),e.k0s(),e.nrm(92,"input",29)(93,"mat-validation-message",17),e.k0s()()(),e.j41(94,"div",14)(95,"div",15)(96,"mat-form-field")(97,"mat-label"),e.EFF(98,"Terms and Conditions"),e.k0s(),e.j41(99,"mat-select",30),e.DNE(100,P,2,2,"mat-option",26),e.k0s(),e.nrm(101,"mat-validation-message",17),e.k0s()()()()(),e.j41(102,"div",11)(103,"div",31)(104,"h5",6),e.EFF(105,"Vendor Contact Information"),e.k0s(),e.j41(106,"button",32),e.bIt("click",function(){return e.eBV(s),e.Njj(o.addVendorContactInformation())}),e.EFF(107," Add Contact "),e.k0s()(),e.j41(108,"div",13)(109,"div",33),e.DNE(110,B,85,30,"div",34),e.k0s()()(),e.j41(111,"div",11)(112,"div",31)(113,"h5",6),e.EFF(114,"Vendor Address Information"),e.k0s(),e.j41(115,"button",32),e.bIt("click",function(){return e.eBV(s),e.Njj(o.addVendorAddressInformation())}),e.EFF(116," Add Address "),e.k0s()(),e.j41(117,"div",13)(118,"div",35),e.DNE(119,q,70,30,"div",34),e.k0s()()(),e.j41(120,"div",11)(121,"div",31)(122,"h5",6),e.EFF(123,"Vendor Documents"),e.k0s(),e.j41(124,"button",32),e.bIt("click",function(){return e.eBV(s),e.Njj(o.addVendorDocument())}),e.EFF(125," Add Document "),e.k0s()(),e.j41(126,"div",13)(127,"div",36),e.DNE(128,H,17,9,"div",34),e.k0s()()(),e.j41(129,"div",11)(130,"div",31)(131,"h5",6),e.EFF(132,"Vendor Product Categories"),e.k0s(),e.j41(133,"button",32),e.bIt("click",function(){return e.eBV(s),e.Njj(o.addVendorProductCategory())}),e.EFF(134," Add Product Category "),e.k0s()(),e.j41(135,"div",13)(136,"div",37),e.DNE(137,Z,23,8,"div",34),e.k0s()()(),e.j41(138,"div",14)(139,"div",38)(140,"button",39),e.EFF(141," Save "),e.k0s()()()()()()()}2&a&&(e.R7$(9),e.Y8G("authPermission",o.page+"_"+o.permissions.list),e.R7$(),e.Y8G("formGroup",o.vendorMasterForm),e.R7$(13),e.Y8G("control",o.vendorMasterForm.controls.vendorCode)("message","Vendor Code")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",o.vendorMasterForm.controls.vendorName)("message","Vendor Name")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",o.vendorMasterForm.controls.email)("message","Email")("formSubmitted",o.isFormSubmitted),e.R7$(7),e.Y8G("control",o.vendorMasterForm.controls.phone)("message","Phone")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",o.vendorMasterForm.controls.mobile)("message","Mobile")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",o.vendorMasterForm.controls.baseAddress1)("message","Base Address 1")("formSubmitted",o.isFormSubmitted),e.R7$(12),e.Y8G("control",o.vendorMasterForm.controls.city)("message","City")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("ngForOf",o.statesList),e.R7$(),e.Y8G("control",o.vendorMasterForm.controls.stateId)("message","State")("formSubmitted",o.isFormSubmitted),e.R7$(7),e.Y8G("ngForOf",o.countriesList),e.R7$(),e.Y8G("control",o.vendorMasterForm.controls.countryId)("message","Country")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",o.vendorMasterForm.controls.zipCode)("message","Zipcode")("formSubmitted",o.isFormSubmitted),e.R7$(6),e.Y8G("control",o.vendorMasterForm.controls.gstNumber)("message","GST Number")("formSubmitted",o.isFormSubmitted),e.R7$(7),e.Y8G("ngForOf",o.termsConditionsList),e.R7$(),e.Y8G("control",o.vendorMasterForm.controls.termsConditionsId)("message","Terms and Conditions")("formSubmitted",o.isFormSubmitted),e.R7$(9),e.Y8G("ngForOf",o.vendorContactInformations.controls),e.R7$(9),e.Y8G("ngForOf",o.vendorAddressInformations.controls),e.R7$(9),e.Y8G("ngForOf",o.vendorDocuments.controls),e.R7$(9),e.Y8G("ngForOf",o.vendorProductCategories.controls))},dependencies:[_.Sq,n.qT,n.me,n.Q0,n.BC,n.cb,n.j4,n.JD,n.$R,n.v8,u.It,u.$z,u.iY,C.rl,C.nJ,S.fg,M.An,G.VO,A.wT,j.B,R.T,x.r,$.A],styles:[".card[_ngcontent-%COMP%]{margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:.75rem 1.25rem}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.mat-icon[_ngcontent-%COMP%]{vertical-align:middle}"]})}return r})();var f=d(33380),z=d(49239),J=d(74193);let V=(()=>{class r{constructor(){this.searchChanged=new e.bkB,this.searchData={},this.searchKey="vendorCode,vendorName,email,phone,mobile,baseAddress1,baseAddress2,city"}updateSearchTerms(t,a){this.searchData[t]=a,this.searchChanged.emit(this.searchData)}static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["vendor-master-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(a,o){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"search-text",2),e.bIt("textSearchEntered",function(l){return o.updateSearchTerms(o.searchKey,l)}),e.k0s()(),e.j41(3,"div",3)(4,"search-inactive",4),e.bIt("chkChanged",function(l){return o.updateSearchTerms("isActive",l)}),e.k0s()()()),2&a&&(e.R7$(2),e.Y8G("placeHolder","Search Vendor Code, Vendor Name, Email, Phone, Mobile, City"))},dependencies:[z.D,J.$],encapsulation:2})}return r})();var Q=d(96081);const K=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),ee=()=>["../","add"],te=r=>["..","edit",r];function oe(r,i){1&r&&(e.j41(0,"a",20)(1,"span"),e.EFF(2,"Add New"),e.k0s(),e.nrm(3,"i",21),e.k0s()),2&r&&e.Y8G("routerLink",e.lJ4(1,ee))}function re(r,i){if(1&r&&(e.j41(0,"a",24)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()),2&r){const t=e.XpG().row;e.Y8G("routerLink",e.eq3(1,te,t.id))}}function ne(r,i){if(1&r){const t=e.RV6();e.j41(0,"a",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).row,s=e.XpG();return e.Njj(s.activateToggleVendorMaster(o,!1))}),e.j41(1,"mat-icon"),e.EFF(2,"lock"),e.k0s()()}}function ae(r,i){if(1&r){const t=e.RV6();e.j41(0,"a",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).row,s=e.XpG();return e.Njj(s.activateToggleVendorMaster(o,!0))}),e.j41(1,"mat-icon"),e.EFF(2,"lock_open"),e.k0s()()}}function ie(r,i){if(1&r&&(e.qex(0,25),e.DNE(1,ne,3,0,"a",26)(2,ae,3,0,"a",26),e.bVm()),2&r){const t=e.XpG().row;e.R7$(),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive)}}function se(r,i){if(1&r&&e.DNE(0,re,3,3,"a",22)(1,ie,3,2,"ng-container",23),2&r){const t=e.XpG();e.Y8G("authPermission",t.page+"_"+t.permissions.edit),e.R7$(),e.Y8G("authPermission",t.page+"_"+t.permissions.active)}}const de=[{path:"",component:h,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class r{constructor(t,a){this.vendorMasterService=t,this.notificationService=a,this.vendorMasterData=[],this.page=m.Wt.vendorMaster,this.permissions=m.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getVendorMasterData()}getVendorMasterData(){this.loading=!0,this.vendorMasterService.get().subscribe(t=>{this.vendorMasterData=t,this.loading=!1},t=>{console.log(t),this.loading=!1})}activateToggleVendorMaster(t,a){confirm(`Are you sure you want to ${a?"Activate":"Deactivate"} this vendor?`)&&this.vendorMasterService.toggleActivate(t.id,a).subscribe(()=>{this.getVendorMasterData()},s=>{this.notificationService.error("Something went wrong.")})}updateSearch(t){this.searchData=Object.assign({},t)}isActiveRow(t){return{"text-danger":!t.isActive}}static#e=this.\u0275fac=function(a){return new(a||r)(e.rXU(p),e.rXU(F.tw))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:22,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Vendor Code","prop","vendorCode"],["name","Vendor Name","prop","vendorName"],["name","Email","prop","email"],["name","Phone","prop","phone"],["name","Mobile","prop","mobile"],["name","City","prop","city"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(a,o){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e.EFF(6,"Vendor Master List"),e.k0s()(),e.j41(7,"div",6),e.DNE(8,oe,4,2,"a",7),e.k0s()(),e.j41(9,"div",8)(10,"div",9)(11,"vendor-master-search-panel",10),e.bIt("searchChanged",function(l){return o.updateSearch(l)}),e.k0s(),e.j41(12,"ngx-datatable",11),e.nI1(13,"searchtable"),e.nrm(14,"ngx-datatable-column",12)(15,"ngx-datatable-column",13)(16,"ngx-datatable-column",14)(17,"ngx-datatable-column",15)(18,"ngx-datatable-column",16)(19,"ngx-datatable-column",17),e.j41(20,"ngx-datatable-column",18),e.DNE(21,se,2,2,"ng-template",19),e.k0s()()()()()()()),2&a&&(e.R7$(8),e.Y8G("authPermission",o.page+"_"+o.permissions.create),e.R7$(4),e.Y8G("rows",e.i5U(13,12,o.vendorMasterData,o.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",o.loading)("scrollbarH",!0)("rowClass",o.isActiveRow)("messages",e.lJ4(15,K)),e.R7$(8),e.Y8G("sortable",!1))},dependencies:[_.bT,u.It,M.An,c.Wk,f.ge,f.ed,f.QI,j.B,V,Q.j],encapsulation:2})}return r})(),canActivate:[m.LL],data:{page:m.Wt.vendorMaster,action:m.eZ.list,title:"Vendor Master"}},{path:"add",canActivate:[m.LL],data:{page:m.Wt.vendorMaster,action:m.eZ.create,title:"Vendor Master"},component:v},{path:"edit/:id",canActivate:[m.LL],data:{page:m.Wt.vendorMaster,action:m.eZ.edit,title:"Vendor Master"},component:v}]}];let me=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=e.$C({type:r});static#o=this.\u0275inj=e.G2t({imports:[c.iI.forChild(de),c.iI]})}return r})(),le=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=e.$C({type:r});static#o=this.\u0275inj=e.G2t({providers:[p,k.S],imports:[y.Gg,me]})}return r})()}}]);