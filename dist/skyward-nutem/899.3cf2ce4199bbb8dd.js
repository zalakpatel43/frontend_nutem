"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[899],{899:(ft,S,s)=>{s.r(S),s.d(S,{ProductionOrderModule:()=>_t});var h=s(60177),O=s(33380),m=s(18498),t=s(54438);let v=(()=>{class e{onSearchChanged(i){console.log("Search data:",i)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-production-order"]],decls:1,vars:0,template:function(o,n){1&o&&t.nrm(0,"router-outlet")},dependencies:[m.n3],encapsulation:2})}return e})();var p=s(4434),r=s(49969),y=s(21626);let D=(()=>{class e{constructor(i,o){this.http=i,this._baseService=o}getProductionOrderList(){return this.http.get(`${p.T6.productionOrderList}`)}getByIdProductionOrder(i){return this.http.get(`${p.T6.productionOrderGetById}/${i}`)}static#t=this.\u0275fac=function(o){return new(o||e)(t.KVO(y.Qq),t.KVO(p.dD))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var P=s(45794),w=s(88834),b=s(99213),d=s(9159);const T=()=>["expandedDetail"],F=e=>["../","edit",e],C=()=>["type","code","date","productName","shiftName","actions"];function k(e,a){if(1&e&&(t.j41(0,"th",18),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,i)," ")}}function E(e,a){if(1&e){const i=t.RV6();t.qex(0),t.j41(1,"a",21),t.bIt("click",function(){t.eBV(i);const n=t.XpG().$implicit,c=t.XpG(2);return t.Njj(c.isRowExpanded(n))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()(),t.EFF(4),t.bVm()}if(2&e){const i=t.XpG().$implicit,o=t.XpG().$implicit,n=t.XpG();t.R7$(3),t.JRh(n.isRowExpanded(i)?"remove_circle_outline":"control_point"),t.R7$(),t.SpI(" ",i[o]," ")}}function A(e,a){if(1&e&&(t.qex(0),t.EFF(1),t.bVm()),2&e){const i=t.XpG().$implicit,o=t.XpG().$implicit;t.R7$(),t.SpI(" ",i[o]," ")}}function I(e,a){if(1&e&&(t.qex(0),t.j41(1,"a",22)(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.bVm()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("routerLink",t.eq3(1,F,i.id))}}function R(e,a){if(1&e&&(t.j41(0,"td",19),t.DNE(1,E,5,2,"ng-container",20)(2,A,2,1,"ng-container",20)(3,I,4,3,"ng-container",20),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf","code"===i),t.R7$(),t.Y8G("ngIf","code"!==i&&"actions"!==i),t.R7$(),t.Y8G("ngIf","actions"===i)}}function M(e,a){1&e&&(t.qex(0,16),t.DNE(1,k,3,3,"th",17)(2,R,4,3,"td",12),t.bVm()),2&e&&t.Y8G("matColumnDef",a.$implicit)}function N(e,a){1&e&&(t.j41(0,"th",18),t.EFF(1," Type "),t.k0s())}function H(e,a){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.SpI(" ",i.type," ")}}function $(e,a){1&e&&(t.j41(0,"th",18),t.EFF(1," Code "),t.k0s())}function L(e,a){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.SpI(" ",i.code," ")}}function j(e,a){1&e&&(t.j41(0,"th",18),t.EFF(1," Date "),t.k0s())}function V(e,a){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,i.date,"dd-MMM-yyyy HH:mm a")," ")}}function Y(e,a){1&e&&(t.j41(0,"th",18),t.EFF(1," Product Name "),t.k0s())}function G(e,a){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.SpI(" ",i.productName," ")}}function B(e,a){1&e&&(t.j41(0,"th",18),t.EFF(1," Shift Name "),t.k0s())}function X(e,a){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.SpI(" ",i.shiftName," ")}}function U(e,a){1&e&&(t.j41(0,"th",18),t.EFF(1," Actions "),t.k0s())}function z(e,a){if(1&e){const i=t.RV6();t.j41(0,"td",19)(1,"a",21),t.bIt("click",function(){const n=t.eBV(i).$implicit,c=t.XpG(2);return t.Njj(c.editRelatedData(n))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()()()}}function Z(e,a){1&e&&t.nrm(0,"tr",32)}function K(e,a){1&e&&t.nrm(0,"tr",33)}function W(e,a){if(1&e&&(t.j41(0,"td",19)(1,"div",23)(2,"table",24),t.qex(3,25),t.DNE(4,N,2,0,"th",17)(5,H,2,1,"td",12),t.bVm(),t.qex(6,26),t.DNE(7,$,2,0,"th",17)(8,L,2,1,"td",12),t.bVm(),t.qex(9,27),t.DNE(10,j,2,0,"th",17)(11,V,3,4,"td",12),t.bVm(),t.qex(12,28),t.DNE(13,Y,2,0,"th",17)(14,G,2,1,"td",12),t.bVm(),t.qex(15,29),t.DNE(16,B,2,0,"th",17)(17,X,2,1,"td",12),t.bVm(),t.qex(18,30),t.DNE(19,U,2,0,"th",17)(20,z,4,0,"td",12),t.bVm(),t.DNE(21,Z,1,0,"tr",13)(22,K,1,0,"tr",31),t.k0s()()()),2&e){const i=a.$implicit,o=t.XpG();t.BMQ("colspan",o.columnsToDisplay.length),t.R7$(),t.Y8G("@detailExpand",o.isRowExpanded(i)?"expanded":"collapsed"),t.R7$(),t.Y8G("dataSource",o.relatedData),t.R7$(19),t.Y8G("matHeaderRowDef",t.lJ4(5,C)),t.R7$(),t.Y8G("matRowDefColumns",t.lJ4(6,C))}}function J(e,a){1&e&&t.nrm(0,"tr",32)}function Q(e,a){if(1&e){const i=t.RV6();t.j41(0,"tr",34),t.bIt("click",function(){const n=t.eBV(i).$implicit,c=t.XpG();return t.Njj(c.toggleExpandRow(n))}),t.k0s()}if(2&e){const i=a.$implicit,o=t.XpG();t.AVh("matgrid-expanded-row",o.expandedElement===i)}}function q(e,a){1&e&&t.nrm(0,"tr",35)}let x=(()=>{class e{constructor(i,o,n){this.productionOrderService=i,this.notificationService=o,this.router=n,this.productionOrderData=[],this.columnsToDisplay=["code","poNumber","poDateTimeFormatted","plannedQty","itemName","actions"],this.expandedElement=null,this.relatedData=[],this.searchData={}}ngOnInit(){this.getProductionOrderData()}getProductionOrderData(){this.productionOrderService.getProductionOrderList().subscribe(i=>{this.productionOrderData=i},i=>{this.notificationService.error("Failed to load production orders.")})}toggleExpandRow(i){this.expandedElement===i?this.expandedElement=null:(this.expandedElement=i,this.productionOrderService.getByIdProductionOrder(i.id).subscribe(o=>{this.relatedData=this.getRelatedData(o)},o=>{this.notificationService.error("Failed to load related data.")}))}isRowExpanded(i){return this.expandedElement===i}getRelatedData(i){const o=[];return i.weightChecks&&i.weightChecks.forEach(n=>o.push({type:"Weight Check",id:n.id,code:n.code,date:n.startDateTime,productName:n.productName,shiftName:n.shiftName})),i.attributeChecks&&i.attributeChecks.forEach(n=>o.push({type:"Attribute Check",id:n.id,code:n.code,date:n.acDate,productName:n.productName,shiftName:""})),i.preCheckListEntities&&i.preCheckListEntities.forEach(n=>o.push({type:"Pre Check List",id:n.id,code:n.code,date:n.startDateTime,productName:n.productName,shiftName:n.shiftName})),i.postCheckListEntities&&i.postCheckListEntities.forEach(n=>o.push({type:"Post Check List",id:n.id,code:n.code,date:n.endDateTime,productName:n.productName,shiftName:n.shiftName})),o}editRelatedData(i){"Weight Check"===i.type?this.router.navigate(["/secure/masters/weight-check/edit",i.id]):"Attribute Check"===i.type?this.router.navigate(["/secure/masters/attribute-check/edit",i.id]):"Pre Check List"===i.type?this.router.navigate(["/secure/masters/pre-check/edit",i.id]):"Post Check List"===i.type?this.router.navigate(["/secure/masters/post-check/edit",i.id]):console.error("Unknown type:",i.type)}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(D),t.rXU(P.tw),t.rXU(m.Ix))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-production-order-list"]],decls:17,vars:6,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],[1,"row"],[1,"col-12"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","matgrid-element-row",3,"matgrid-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","matgrid-detail-row",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"routerLink"],[1,"matgrid-element-detail",2,"margin-left","3%"],["mat-table","",1,"mat-elevation-z8","nested-table",3,"dataSource"],["matColumnDef","type"],["matColumnDef","code"],["matColumnDef","date"],["matColumnDef","productName"],["matColumnDef","shiftName"],["matColumnDef","actions"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"matgrid-element-row",3,"click"],["mat-row","",1,"matgrid-detail-row"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Production Order List"),t.k0s()(),t.nrm(7,"div",6),t.k0s(),t.j41(8,"div",7)(9,"div",8)(10,"table",9),t.DNE(11,M,3,1,"ng-container",10),t.qex(12,11),t.DNE(13,W,23,7,"td",12),t.bVm(),t.DNE(14,J,1,0,"tr",13)(15,Q,1,2,"tr",14)(16,q,1,0,"tr",15),t.k0s()()()()()()),2&o&&(t.R7$(10),t.Y8G("dataSource",n.productionOrderData),t.R7$(),t.Y8G("ngForOf",n.columnsToDisplay),t.R7$(3),t.Y8G("matHeaderRowDef",n.columnsToDisplay),t.R7$(),t.Y8G("matRowDefColumns",n.columnsToDisplay),t.R7$(),t.Y8G("matRowDefColumns",t.lJ4(5,T)))},dependencies:[h.Sq,h.bT,m.Wk,w.pQ,b.An,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,h.PV,h.vh],styles:["table[_ngcontent-%COMP%]{width:100%}tr.matgrid-detail-row[_ngcontent-%COMP%]{height:0}tr.matgrid-element-row[_ngcontent-%COMP%]:not(.matgrid-expanded-row):hover{background:#f5f5f5}tr.matgrid-element-row[_ngcontent-%COMP%]:not(.matgrid-expanded-row):active{background:#efefef}.matgrid-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.matgrid-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.matgrid-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:114px}.matgrid-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.matgrid-element-description[_ngcontent-%COMP%]{padding:16px}.matgrid-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}  .mat-mdc-header-cell{font-size:14px!important;font-weight:700!important}"],data:{animation:[(0,r.hZ)("detailExpand",[(0,r.wk)("collapsed",(0,r.iF)({height:"0px",minHeight:"0"})),(0,r.wk)("expanded",(0,r.iF)({height:"*"})),(0,r.kY)("expanded <=> collapsed",(0,r.i0)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}return e})();s(49239);const it=[{path:"",component:v,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:x,canActivate:[p.LL],data:{page:p.Wt.productionOrder,title:"Production Order"}}]}];let rt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.$C({type:e});static#i=this.\u0275inj=t.G2t({imports:[m.iI.forChild(it),m.iI]})}return e})();var ot=s(71774),nt=s(99830),at=s(42356),_=s(48910),u=s(86600),st=s(75263),ct=s(40),dt=s(32102),lt=s(99631),ht=s(21413);let f=(()=>{class e{constructor(){this.changes=new ht.B}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const pt={provide:f,deps:[[new t.Xx1,new t.kdw,f]],useFactory:function mt(e){return e||new f}};let ut=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.$C({type:e});static#i=this.\u0275inj=t.G2t({providers:[pt],imports:[u.yE]})}return e})(),_t=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.$C({type:e});static#i=this.\u0275inj=t.G2t({providers:[D,(0,nt._c)()],imports:[h.MD,rt,ot.Gg,O.Kj,at.c9,_.Hw,_.Xg,_.T_,u.WX,st.ZG,ct.Yr,dt.RG,lt.fS,d.tP,w.Hl,b.m_,ut]})}return e})()}}]);