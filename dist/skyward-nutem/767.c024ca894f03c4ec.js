"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[767],{24767:(P,f,s)=>{s.r(f),s.d(f,{RoleModule:()=>M});var j=s(71774),c=s(18498),t=s(54438);let v=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,a){1&i&&t.nrm(0,"router-outlet")},dependencies:[c.n3],encapsulation:2})}return o})();var l=s(89417),n=s(4434),h=s(2558),R=s(45794),u=s(88834),b=s(32102),S=s(99631),_=s(30220),D=s(58777),F=s(67133);function T(o,m){if(1&o){const e=t.RV6();t.j41(0,"a",18),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(1," View List "),t.k0s()}}let p=(()=>{class o{constructor(e,i,a,r,d){this.activatedRoute=e,this.router=i,this.formBuilder=a,this.roleService=r,this.notificationService=d,this.page=n.Wt.role,this.permissions=n.eZ,this.createForm()}ngOnInit(){this.getRoleRoute()}getRoleRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{this.isEditMode=!n.ov.isEmpty(e.id),this.createForm(),this.isEditMode&&(this.roleId=e.id,this.getRoleDetails())})}getRoleDetails(){this.roleService.getById(this.roleId).subscribe(e=>{this.roleData=e,this.setRoleData()},e=>{console.log(e)})}setRoleData(){this.frmRole.controls.name.setValue(this.roleData.name)}createForm(){this.frmRole=this.formBuilder.group({name:["",[l.k0.required,l.k0.maxLength(100)]]})}createRole(){this.roleService.add(this.frmRole.value).subscribe(a=>{this.cancel(),this.notificationService.success("Role saved successfully.")},a=>{this.error=a})}updateRole(){this.roleData=Object.assign(this.roleData,this.roleData,this.frmRole.value),this.roleService.update(this.roleData.id,this.roleData).subscribe(i=>{this.cancel(),this.notificationService.success("Role uddated successfully.")},i=>{this.error=i})}save(){this.isFormSubmitted=!0,!this.frmRole.invalid&&(this.isEditMode?this.updateRole():this.createRole())}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(c.nX),t.rXU(c.Ix),t.rXU(l.ze),t.rXU(h.W),t.rXU(R.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:25,vars:5,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","name"],[3,"control","message","formSubmitted"],[1,"col-md-8"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"]],template:function(i,a){if(1&i){const r=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.nrm(6,"i",7),t.EFF(7," Add/Edit Role"),t.k0s()(),t.j41(8,"div",8),t.DNE(9,T,2,0,"a",9),t.k0s()(),t.j41(10,"div")(11,"form",10,0),t.bIt("submit",function(){return t.eBV(r),t.Njj(a.save())}),t.j41(13,"div",11)(14,"div",12)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Role name"),t.k0s(),t.nrm(18,"input",13)(19,"mat-validation-message",14),t.k0s()(),t.nrm(20,"div",15),t.k0s(),t.j41(21,"div",11)(22,"div",16)(23,"button",17),t.EFF(24,"Save "),t.k0s()()()()()()()()}2&i&&(t.R7$(9),t.Y8G("authPermission",a.page+"_"+a.permissions.list),t.R7$(2),t.Y8G("formGroup",a.frmRole),t.R7$(8),t.Y8G("control",a.frmRole.controls.name)("message","Role Name")("formSubmitted",a.isFormSubmitted))},dependencies:[l.qT,l.me,l.BC,l.cb,l.j4,l.JD,u.It,u.$z,b.rl,b.nJ,S.fg,_.B,D.T,F.r],encapsulation:2})}return o})();var E=s(60177),k=s(99213),g=s(33380),x=s(49239);let y=(()=>{class o{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="name"}updateSearchTerms(e,i){this.searchData[e]=i,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["role-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:3,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(d){return a.updateSearchTerms(a.searchKey,d)}),t.k0s()()()),2&i&&(t.R7$(2),t.Y8G("placeHolder","Search Role"))},dependencies:[x.D],encapsulation:2})}return o})();var L=s(96081);const G=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),I=()=>["../","add"],w=o=>["..","edit",o];function A(o,m){1&o&&(t.j41(0,"a",15)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",16),t.k0s()),2&o&&t.Y8G("routerLink",t.lJ4(1,I))}function X(o,m){if(1&o&&(t.j41(0,"a",19)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&o){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,w,e.id))}}function B(o,m){if(1&o){const e=t.RV6();t.j41(0,"a",22),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,r=t.XpG();return t.Njj(r.activateToggleRole(a,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function V(o,m){if(1&o){const e=t.RV6();t.j41(0,"a",22),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,r=t.XpG();return t.Njj(r.activateToggleRole(a,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function H(o,m){if(1&o&&(t.qex(0,20),t.DNE(1,B,3,0,"a",21)(2,V,3,0,"a",21),t.bVm()),2&o){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function $(o,m){if(1&o&&t.DNE(0,X,3,3,"a",17)(1,H,3,2,"ng-container",18),2&o){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}const N=[{path:"",component:v,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,i){this.roleService=e,this.notificationService=i,this.roleData=[],this.page=n.Wt.role,this.permissions=n.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getRoleData()}getRoleData(){this.loading=!0,this.roleService.get().subscribe(e=>{this.roleData=e,this.loading=!1},e=>{console.log(e),this.loading=!1})}activateToggleRole(e,i){confirm(`Are you sure you want to ${i?"Active":"Inactive"} ?`)&&this.roleService.toggleActivate(e.id,i).subscribe(r=>{this.getRoleData()},r=>{this.notificationService.error("Something went wrong.")})}updateSearch(e){this.searchData=Object.assign({},e)}isActiveRow(e){return{"text-danger":!e.isActive}}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(h.W),t.rXU(R.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:17,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Role","prop","name"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Role List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,A,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"role-search-panel",10),t.bIt("searchChanged",function(d){return a.updateSearch(d)}),t.k0s(),t.j41(12,"ngx-datatable",11),t.nI1(13,"searchtable"),t.nrm(14,"ngx-datatable-column",12),t.j41(15,"ngx-datatable-column",13),t.DNE(16,$,2,2,"ng-template",14),t.k0s()()()()()()()),2&i&&(t.R7$(8),t.Y8G("authPermission",a.page+"_"+a.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(13,12,a.roleData,a.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",a.loading)("scrollbarH",!0)("rowClass",a.isActiveRow)("messages",t.lJ4(15,G)),t.R7$(3),t.Y8G("sortable",!1))},dependencies:[E.bT,u.It,k.An,c.Wk,g.ge,g.ed,g.QI,_.B,y,L.j],encapsulation:2})}return o})(),canActivate:[n.LL],data:{page:n.Wt.role,action:n.eZ.list,title:"Role"}},{path:"add",canActivate:[n.LL],data:{page:n.Wt.role,action:n.eZ.create,title:"Role"},component:p},{path:"edit/:id",canActivate:[n.LL],data:{page:n.Wt.role,action:n.eZ.edit,title:"Role"},component:p}]}];let Y=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[c.iI.forChild(N),c.iI]})}return o})(),M=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({providers:[h.W],imports:[j.Gg,Y]})}return o})()}}]);