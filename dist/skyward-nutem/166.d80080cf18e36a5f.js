"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[166],{32166:(U,S,a)=>{a.r(S),a.d(S,{StudentModule:()=>M});var D=a(71774),c=a(18498),t=a(54438);let v=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(s,i){1&s&&t.nrm(0,"router-outlet")},dependencies:[c.n3],encapsulation:2})}return e})();var o=a(89417),r=a(4434);let m=(()=>{class e extends r.QP{constructor(n){super(n,"student"),this._baseService=n}static#t=this.\u0275fac=function(s){return new(s||e)(t.KVO(r.dD))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})();var b=a(45794),E=a(60177),h=a(88834),p=a(32102),j=a(99631),y=a(30220),F=a(58777);function x(e,d){if(1&e){const n=t.RV6();t.j41(0,"a",19),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.cancel())}),t.EFF(1," View List "),t.k0s()}}function T(e,d){1&e&&(t.qex(0),t.EFF(1,"Student Name is required"),t.bVm())}function k(e,d){if(1&e&&(t.j41(0,"mat-error"),t.DNE(1,T,2,0,"ng-container",15),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.frmStudent.controls.studentName.errors.required)}}function I(e,d){1&e&&(t.qex(0),t.EFF(1,"Student Number is required"),t.bVm())}function G(e,d){if(1&e&&(t.j41(0,"mat-error"),t.DNE(1,I,2,0,"ng-container",15),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.frmStudent.controls.studentNumber.errors.required)}}let f=(()=>{class e{constructor(n,s,i,l,u){this.activatedRoute=n,this.router=s,this.formBuilder=i,this.studentService=l,this.notificationService=u,this.page=r.Wt.student,this.permissions=r.eZ,this.createForm()}ngOnInit(){this.getStudentRoute()}getStudentRoute(){this.routerSub=this.activatedRoute.params.subscribe(n=>{this.isEditMode=!r.ov.isEmpty(n.id),this.createForm(),this.isEditMode&&(this.studentId=+n.id,this.getStudentDetails())})}getStudentDetails(){this.studentService.getById(this.studentId).subscribe(n=>{this.studentData=n,this.setStudentData()},n=>{console.log(n)})}setStudentData(){this.frmStudent.patchValue(this.studentData)}createForm(){this.frmStudent=this.formBuilder.group({studentName:["",[o.k0.required,o.k0.maxLength(100)]],studentNumber:["",[o.k0.required,o.k0.maxLength(50)]]})}createStudent(){this.studentService.add(this.frmStudent.value).subscribe(s=>{this.cancel(),this.notificationService.success("Student saved successfully.")},s=>{this.error=s})}updateStudent(){this.studentData=Object.assign(this.studentData,this.studentData,this.frmStudent.value),this.studentService.update(this.studentData.id,this.studentData).subscribe(s=>{this.cancel(),this.notificationService.success("Student updated successfully.")},s=>{this.error=s})}save(){this.isFormSubmitted=!0,!this.frmStudent.invalid&&(this.isEditMode?this.updateStudent():this.createStudent())}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(c.nX),t.rXU(c.Ix),t.rXU(o.ze),t.rXU(m),t.rXU(b.tw))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:30,vars:4,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6"],["appearance","fill"],["matInput","","formControlName","studentName"],[4,"ngIf"],["matInput","","formControlName","studentNumber"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"]],template:function(s,i){if(1&s){const l=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.nrm(6,"i",7),t.EFF(7," Add/Edit Student"),t.k0s()(),t.j41(8,"div",8),t.DNE(9,x,2,0,"a",9),t.k0s()(),t.j41(10,"div")(11,"form",10,0),t.bIt("ngSubmit",function(){return t.eBV(l),t.Njj(i.save())}),t.j41(13,"div",11)(14,"div",12)(15,"mat-form-field",13)(16,"mat-label"),t.EFF(17,"Student Name"),t.k0s(),t.nrm(18,"input",14),t.DNE(19,k,2,1,"mat-error",15),t.k0s()(),t.j41(20,"div",12)(21,"mat-form-field",13)(22,"mat-label"),t.EFF(23,"Student Number"),t.k0s(),t.nrm(24,"input",16),t.DNE(25,G,2,1,"mat-error",15),t.k0s()()(),t.j41(26,"div",11)(27,"div",17)(28,"button",18),t.EFF(29,"Save"),t.k0s()()()()()()()()}2&s&&(t.R7$(9),t.Y8G("authPermission",i.page+"_"+i.permissions.list),t.R7$(2),t.Y8G("formGroup",i.frmStudent),t.R7$(8),t.Y8G("ngIf",i.frmStudent.controls.studentName.invalid&&(i.frmStudent.controls.studentName.dirty||i.frmStudent.controls.studentName.touched)),t.R7$(6),t.Y8G("ngIf",i.frmStudent.controls.studentNumber.invalid&&(i.frmStudent.controls.studentNumber.dirty||i.frmStudent.controls.studentNumber.touched)))},dependencies:[E.bT,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,h.It,h.$z,p.rl,p.nJ,p.TL,j.fg,y.B,F.T],encapsulation:2})}return e})();var L=a(99213),g=a(33380),R=a(49239);let C=(()=>{class e{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="studentName,studentNumber"}updateSearchTerms(n,s){this.searchData[n]=s,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["student-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:3,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(u){return i.updateSearchTerms(i.searchKey,u)}),t.k0s()()()),2&s&&(t.R7$(2),t.Y8G("placeHolder","Search Student Name, Student Number"))},dependencies:[R.D],encapsulation:2})}return e})();var _=a(96081);const A=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),w=()=>["../","add"],H=e=>["..","edit",e];function B(e,d){1&e&&(t.j41(0,"a",16)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",17),t.k0s()),2&e&&t.Y8G("routerLink",t.lJ4(1,w))}function V(e,d){if(1&e&&(t.j41(0,"a",19)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&e){const n=t.XpG().row;t.Y8G("routerLink",t.eq3(1,H,n.id))}}function X(e,d){if(1&e&&t.DNE(0,V,3,3,"a",18),2&e){const n=t.XpG();t.Y8G("authPermission",n.page+"_"+n.permissions.edit)}}const Y=[{path:"",component:v,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class e{constructor(n,s){this.studentService=n,this.notificationService=s,this.studentData=[],this.page=r.Wt.student,this.permissions=r.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getStudentData()}getStudentData(){this.loading=!0,this.studentService.get().subscribe(n=>{this.studentData=n,this.loading=!1},n=>{console.log(n),this.loading=!1})}updateSearch(n){this.searchData=Object.assign({},n)}isActiveRow(n){return{}}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(m),t.rXU(b.tw))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:18,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Student Name","prop","studentName"],["name","Student Number","prop","studentNumber"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Student List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,B,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"student-search-panel",10),t.bIt("searchChanged",function(u){return i.updateSearch(u)}),t.k0s(),t.j41(12,"ngx-datatable",11),t.nI1(13,"searchtable"),t.nrm(14,"ngx-datatable-column",12)(15,"ngx-datatable-column",13),t.j41(16,"ngx-datatable-column",14),t.DNE(17,X,1,1,"ng-template",15),t.k0s()()()()()()()),2&s&&(t.R7$(8),t.Y8G("authPermission",i.page+"_"+i.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(13,12,i.studentData,i.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",i.loading)("scrollbarH",!0)("rowClass",i.isActiveRow)("messages",t.lJ4(15,A)),t.R7$(4),t.Y8G("sortable",!1))},dependencies:[h.It,L.An,c.Wk,g.ge,g.ed,g.QI,y.B,C,_.j],encapsulation:2})}return e})(),canActivate:[r.LL],data:{page:r.Wt.student,action:r.eZ.list,title:"Student"}},{path:"add",canActivate:[r.LL],data:{page:r.Wt.student,action:r.eZ.create,title:"Student"},component:f},{path:"edit/:id",canActivate:[r.LL],data:{page:r.Wt.student,action:r.eZ.edit,title:"Student"},component:f}]}];let $=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[c.iI.forChild(Y),c.iI]})}return e})(),M=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({providers:[m],imports:[D.Gg,$]})}return e})()}}]);