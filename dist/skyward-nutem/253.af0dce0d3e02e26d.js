"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[253],{85253:(K,f,s)=>{s.r(f),s.d(f,{TermsAndConditionsModule:()=>J});var F=s(71774),l=s(18498),t=s(54438);let C=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"router-outlet")},dependencies:[l.n3],encapsulation:2})}return n})();var a=s(89417),r=s(4434),p=s(48686),v=s(45794),T=s(60177),u=s(88834),_=s(82765),A=s(32102),k=s(99631),j=s(82798),E=s(86600),b=s(30220),D=s(58777),G=s(67133);function I(n,m){if(1&n){const e=t.RV6();t.j41(0,"a",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancel())}),t.EFF(1," View List "),t.k0s()}}function R(n,m){if(1&n&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&n){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function L(n,m){if(1&n&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&n){const e=m.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}let h=(()=>{class n{constructor(e,o,i,d,c,z){this.activatedRoute=e,this.router=o,this.formBuilder=i,this.termsAndConditionsService=d,this.notificationService=c,this.listService=z,this.page=r.Wt.termsAndConditions,this.permissions=r.eZ,this.types=[],this.categories=[],this.createForm()}ngOnInit(){this.getTermsAndConditionsRoute(),this.loadTypes(),this.loadCategories()}getTermsAndConditionsRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{this.isEditMode=!r.ov.isEmpty(e.id),this.createForm(),this.isEditMode&&(this.termsAndConditionsId=+e.id,this.getTermsAndConditionsDetails())})}getTermsAndConditionsDetails(){this.termsAndConditionsService.getById(this.termsAndConditionsId).subscribe(e=>{this.termsAndConditionsData=e,this.setTermsAndConditionsData()},e=>{console.log(e)})}setTermsAndConditionsData(){this.frmTermsAndConditions.patchValue(this.termsAndConditionsData)}createForm(){this.frmTermsAndConditions=this.formBuilder.group({code:["",[a.k0.required,a.k0.maxLength(128)]],name:["",[a.k0.required,a.k0.maxLength(256)]],description:["",[a.k0.required,a.k0.maxLength(2048)]],priority:[null,[a.k0.required]],allowToChange:[!1],typeId:[null,[a.k0.required]],categoryId:[null],createdBy:[null],createdOn:[null],modifiedBy:[null],modifiedOn:[null]})}createTermsAndConditions(){this.termsAndConditionsService.add(this.frmTermsAndConditions.value).subscribe(o=>{this.cancel(),this.notificationService.success("Terms and Conditions saved successfully.")},o=>{this.error=o})}updateTermsAndConditions(){this.termsAndConditionsData=Object.assign(this.termsAndConditionsData,this.termsAndConditionsData,this.frmTermsAndConditions.value),this.termsAndConditionsService.update(this.termsAndConditionsData.id,this.termsAndConditionsData).subscribe(o=>{this.cancel(),this.notificationService.success("Terms and Conditions updated successfully.")},o=>{this.error=o})}save(){this.isFormSubmitted=!0,!this.frmTermsAndConditions.invalid&&(this.isEditMode?this.updateTermsAndConditions():this.createTermsAndConditions())}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}loadTypes(){this.listService.getList("types").subscribe(e=>{this.types=e})}loadCategories(){this.listService.getList("categories").subscribe(e=>{this.categories=e})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(l.nX),t.rXU(l.Ix),t.rXU(a.ze),t.rXU(p.S),t.rXU(v.tw),t.rXU(r.aG))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["ng-component"]],decls:62,vars:25,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p-3","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","left-side-header"],[1,"mb-2","float-left"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","right-side-header","mb-2"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","code"],[3,"control","message","formSubmitted"],["type","text","matInput","","formControlName","name"],["type","number","matInput","","formControlName","priority"],["formControlName","typeId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoryId"],["formControlName","allowToChange"],[1,"col-12"],["matInput","","formControlName","description"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[3,"value"]],template:function(o,i){if(1&o){const d=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.nrm(6,"i",7),t.EFF(7," Add/Edit Terms and Conditions "),t.k0s()(),t.j41(8,"div",8),t.DNE(9,I,2,0,"a",9),t.k0s()(),t.j41(10,"div")(11,"form",10,0),t.bIt("submit",function(){return t.eBV(d),t.Njj(i.save())}),t.j41(13,"div",11)(14,"div",12)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Code"),t.k0s(),t.nrm(18,"input",13)(19,"mat-validation-message",14),t.k0s()(),t.j41(20,"div",12)(21,"mat-form-field")(22,"mat-label"),t.EFF(23,"Name"),t.k0s(),t.nrm(24,"input",15)(25,"mat-validation-message",14),t.k0s()(),t.j41(26,"div",12)(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"Priority"),t.k0s(),t.nrm(30,"input",16)(31,"mat-validation-message",14),t.k0s()()(),t.j41(32,"div",11)(33,"div",12)(34,"mat-form-field")(35,"mat-label"),t.EFF(36,"Type"),t.k0s(),t.j41(37,"mat-select",17),t.DNE(38,R,2,2,"mat-option",18),t.k0s(),t.nrm(39,"mat-validation-message",14),t.k0s()(),t.j41(40,"div",12)(41,"mat-form-field")(42,"mat-label"),t.EFF(43,"Category"),t.k0s(),t.j41(44,"mat-select",19),t.DNE(45,L,2,2,"mat-option",18),t.k0s(),t.nrm(46,"mat-validation-message",14),t.k0s()(),t.j41(47,"div",12)(48,"mat-checkbox",20),t.EFF(49,"Allow To Change"),t.k0s(),t.nrm(50,"mat-validation-message",14),t.k0s()(),t.j41(51,"div",11)(52,"div",21)(53,"mat-form-field")(54,"mat-label"),t.EFF(55,"Description"),t.k0s(),t.nrm(56,"textarea",22)(57,"mat-validation-message",14),t.k0s()()(),t.j41(58,"div",11)(59,"div",23)(60,"button",24),t.EFF(61," Save "),t.k0s()()()()()()()()}2&o&&(t.R7$(9),t.Y8G("authPermission",i.page+"_"+i.permissions.list),t.R7$(2),t.Y8G("formGroup",i.frmTermsAndConditions),t.R7$(8),t.Y8G("control",i.frmTermsAndConditions.controls.code)("message","Code")("formSubmitted",i.isFormSubmitted),t.R7$(6),t.Y8G("control",i.frmTermsAndConditions.controls.name)("message","Name")("formSubmitted",i.isFormSubmitted),t.R7$(6),t.Y8G("control",i.frmTermsAndConditions.controls.priority)("message","Priority")("formSubmitted",i.isFormSubmitted),t.R7$(7),t.Y8G("ngForOf",i.types),t.R7$(),t.Y8G("control",i.frmTermsAndConditions.controls.typeId)("message","Type")("formSubmitted",i.isFormSubmitted),t.R7$(6),t.Y8G("ngForOf",i.categories),t.R7$(),t.Y8G("control",i.frmTermsAndConditions.controls.categoryId)("message","Category")("formSubmitted",i.isFormSubmitted),t.R7$(4),t.Y8G("control",i.frmTermsAndConditions.controls.allowToChange)("message","Allow To Change")("formSubmitted",i.isFormSubmitted),t.R7$(7),t.Y8G("control",i.frmTermsAndConditions.controls.description)("message","Description")("formSubmitted",i.isFormSubmitted))},dependencies:[T.Sq,a.qT,a.me,a.Q0,a.BC,a.cb,a.j4,a.JD,u.It,u.$z,_.So,A.rl,A.nJ,k.fg,j.VO,E.wT,b.B,D.T,G.r],encapsulation:2})}return n})();var N=s(99213),g=s(33380),$=s(49239),w=s(74193);let y=(()=>{class n{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="code,name,typeName,categoryName"}updateSearchTerms(e,o){this.searchData[e]=o,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["terms-and-conditions-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(c){return i.updateSearchTerms("searchKey",c)}),t.k0s()(),t.j41(3,"div",3)(4,"search-inactive",4),t.bIt("chkChanged",function(c){return i.updateSearchTerms("isActive",c)}),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("placeHolder","Search Terms and Conditions"))},dependencies:[$.D,w.$],encapsulation:2})}return n})();var x=s(96081);const Y=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),B=()=>["../","add"],X=n=>["..","edit",n];function V(n,m){1&n&&(t.j41(0,"a",19)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",20),t.k0s()),2&n&&t.Y8G("routerLink",t.lJ4(1,B))}function P(n,m){if(1&n&&(t.j41(0,"a",23)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&n){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,X,e.id))}}function U(n,m){if(1&n){const e=t.RV6();t.j41(0,"a",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2).row,d=t.XpG();return t.Njj(d.activateToggleTermsAndConditions(i,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function H(n,m){if(1&n){const e=t.RV6();t.j41(0,"a",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2).row,d=t.XpG();return t.Njj(d.activateToggleTermsAndConditions(i,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function M(n,m){if(1&n&&(t.qex(0,24),t.DNE(1,U,3,0,"a",25)(2,H,3,0,"a",25),t.bVm()),2&n){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function O(n,m){if(1&n&&t.DNE(0,P,3,3,"a",21)(1,M,3,2,"ng-container",22),2&n){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}const W=[{path:"",component:C,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(e,o){this.termsAndConditionsService=e,this.notificationService=o,this.termsAndConditionsData=[],this.page=r.Wt.termsAndConditions,this.permissions=r.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getTermsAndConditionsData()}getTermsAndConditionsData(){this.loading=!0,this.termsAndConditionsService.get().subscribe(e=>{this.termsAndConditionsData=e,this.loading=!1},e=>{console.log(e),this.loading=!1})}activateToggleTermsAndConditions(e,o){confirm(`Are you sure you want to ${o?"activate":"deactivate"} this item?`)&&this.termsAndConditionsService.toggleActivate(e.id,o).subscribe(()=>{this.getTermsAndConditionsData()},d=>{this.notificationService.error("Something went wrong.")})}updateSearch(e){this.searchData=Object.assign({},e)}isActiveRow(e){return{"text-danger":!e.isActive}}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(p.S),t.rXU(v.tw))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["ng-component"]],decls:21,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Code","prop","code"],["name","Name","prop","name"],["name","Type","prop","typeName"],["name","Category","prop","categoryName"],["name","Priority","prop","priority"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Terms and Conditions List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,V,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"terms-and-conditions-search-panel",10),t.bIt("searchChanged",function(c){return i.updateSearch(c)}),t.k0s(),t.j41(12,"ngx-datatable",11),t.nI1(13,"searchtable"),t.nrm(14,"ngx-datatable-column",12)(15,"ngx-datatable-column",13)(16,"ngx-datatable-column",14)(17,"ngx-datatable-column",15)(18,"ngx-datatable-column",16),t.j41(19,"ngx-datatable-column",17),t.DNE(20,O,2,2,"ng-template",18),t.k0s()()()()()()()),2&o&&(t.R7$(8),t.Y8G("authPermission",i.page+"_"+i.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(13,12,i.termsAndConditionsData,i.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",i.loading)("scrollbarH",!0)("rowClass",i.isActiveRow)("messages",t.lJ4(15,Y)),t.R7$(7),t.Y8G("sortable",!1))},dependencies:[T.bT,u.It,N.An,l.Wk,g.ge,g.ed,g.QI,b.B,y,x.j],encapsulation:2})}return n})(),canActivate:[r.LL],data:{page:r.Wt.termsAndConditions,action:r.eZ.list,title:"Terms and Conditions"}},{path:"add",canActivate:[r.LL],data:{page:r.Wt.termsAndConditions,action:r.eZ.create,title:"Terms and Conditions"},component:h},{path:"edit/:id",canActivate:[r.LL],data:{page:r.Wt.termsAndConditions,action:r.eZ.edit,title:"Terms and Conditions"},component:h}]}];let Z=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[l.iI.forChild(W),l.iI]})}return n})(),J=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({providers:[p.S],imports:[F.Gg,Z]})}return n})()}}]);