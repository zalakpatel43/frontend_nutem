"use strict";(self.webpackChunkskyward_nutem=self.webpackChunkskyward_nutem||[]).push([[899],{899:(wt,D,s)=>{s.r(D),s.d(D,{ProductionOrderModule:()=>vt});var p=s(177),y=s(3380),_=s(8498),t=s(4438);let v=(()=>{class i{onSearchChanged(e){console.log("Search data:",e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-production-order"]],decls:1,vars:0,template:function(n,o){1&n&&t.nrm(0,"router-outlet")},dependencies:[_.n3],encapsulation:2})}return i})();var h=s(4434),r=s(9969),T=s(1626);let w=(()=>{class i{constructor(e,n){this.http=e,this._baseService=n}getProductionOrderList(){return this.http.get(`${h.T6.productionOrderList}`)}getPOByStatus(e){return this.http.get(`${h.T6.POByStatus}?status=`+e)}getByIdProductionOrder(e){return this.http.get(`${h.T6.productionOrderGetById}/${e}`)}toggleProductionOrderStatus(e){return this.http.patch(`${h.T6.productionOrderStatus}/${e}`,null)}static#t=this.\u0275fac=function(n){return new(n||i)(t.KVO(T.Qq),t.KVO(h.dD))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var F=s(5794),C=s(9417),b=s(8834),f=s(2102),x=s(9213),k=s(2798),u=s(6600),d=s(9159);const E=()=>["expandedDetail"],O=()=>["type","code","date","productName","shiftName","totalcaseproduced","actions"];function R(i,a){if(1&i&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function I(i,a){if(1&i&&(t.j41(0,"th",23),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e)," ")}}function M(i,a){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"a",26),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,c=t.XpG(2);return t.Njj(c.isRowExpanded(o))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()(),t.EFF(4),t.bVm()}if(2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit,o=t.XpG();t.R7$(3),t.JRh(o.isRowExpanded(e)?"remove_circle_outline":"control_point"),t.R7$(),t.SpI(" ",e[n]," ")}}function A(i,a){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R7$(),t.SpI(" ",e[n]," ")}}function N(i,a){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"a",26),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,c=t.XpG(2);return t.Njj(c.toggleStatus(o))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()(),t.bVm()}if(2&i){const e=t.XpG().$implicit;t.R7$(3),t.JRh("Open"===e.status?"lock_open":"lock")}}function $(i,a){if(1&i&&(t.j41(0,"td",24),t.DNE(1,M,5,2,"ng-container",25)(2,A,2,1,"ng-container",25)(3,N,4,1,"ng-container",25),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf","code"===e),t.R7$(),t.Y8G("ngIf","code"!==e&&"actions"!==e),t.R7$(),t.Y8G("ngIf","actions"===e)}}function H(i,a){1&i&&(t.qex(0,21),t.DNE(1,I,3,3,"th",22)(2,$,4,3,"td",16),t.bVm()),2&i&&t.Y8G("matColumnDef",a.$implicit)}function L(i,a){1&i&&(t.j41(0,"th",23),t.EFF(1," Type "),t.k0s())}function j(i,a){if(1&i&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.type," ")}}function V(i,a){1&i&&(t.j41(0,"th",23),t.EFF(1," Code "),t.k0s())}function Y(i,a){if(1&i&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.code," ")}}function G(i,a){1&i&&(t.j41(0,"th",23),t.EFF(1," Date "),t.k0s())}function B(i,a){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" To ",t.i5U(2,1,e.endDate,"dd-MMM-yyyy HH:mm a")," ")}}function X(i,a){if(1&i&&(t.j41(0,"td",24),t.EFF(1),t.nI1(2,"date"),t.DNE(3,B,3,4,"span",25),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,2,e.date,"dd-MMM-yyyy HH:mm a")," "),t.R7$(2),t.Y8G("ngIf","Weight Check"===e.type||"Liquid Preparation"===e.type)}}function U(i,a){1&i&&(t.j41(0,"th",23),t.EFF(1," Product Name "),t.k0s())}function z(i,a){if(1&i&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.productName," ")}}function Z(i,a){1&i&&(t.j41(0,"th",23),t.EFF(1," Shift Name "),t.k0s())}function K(i,a){if(1&i&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.shiftName," ")}}function J(i,a){1&i&&(t.j41(0,"th",23),t.EFF(1," Total Cases Produced "),t.k0s())}function W(i,a){if(1&i&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e.totalcaseproduced," ")}}function Q(i,a){1&i&&(t.j41(0,"th",23),t.EFF(1," Actions "),t.k0s())}function q(i,a){if(1&i){const e=t.RV6();t.j41(0,"td",24)(1,"a",26),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editRelatedData(o))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()()()}}function tt(i,a){1&i&&t.nrm(0,"tr",37)}function et(i,a){1&i&&t.nrm(0,"tr",38)}function it(i,a){if(1&i&&(t.j41(0,"td",24)(1,"div",27)(2,"table",28),t.qex(3,29),t.DNE(4,L,2,0,"th",22)(5,j,2,1,"td",16),t.bVm(),t.qex(6,30),t.DNE(7,V,2,0,"th",22)(8,Y,2,1,"td",16),t.bVm(),t.qex(9,31),t.DNE(10,G,2,0,"th",22)(11,X,4,5,"td",16),t.bVm(),t.qex(12,32),t.DNE(13,U,2,0,"th",22)(14,z,2,1,"td",16),t.bVm(),t.qex(15,33),t.DNE(16,Z,2,0,"th",22)(17,K,2,1,"td",16),t.bVm(),t.qex(18,34),t.DNE(19,J,2,0,"th",22)(20,W,2,1,"td",16),t.bVm(),t.qex(21,35),t.DNE(22,Q,2,0,"th",22)(23,q,4,0,"td",16),t.bVm(),t.DNE(24,tt,1,0,"tr",17)(25,et,1,0,"tr",36),t.k0s()()()),2&i){const e=a.$implicit,n=t.XpG();t.BMQ("colspan",n.columnsToDisplay.length),t.R7$(),t.Y8G("@detailExpand",n.isRowExpanded(e)?"expanded":"collapsed"),t.R7$(),t.Y8G("dataSource",n.relatedData),t.R7$(22),t.Y8G("matHeaderRowDef",t.lJ4(5,O)),t.R7$(),t.Y8G("matRowDefColumns",t.lJ4(6,O))}}function rt(i,a){1&i&&t.nrm(0,"tr",37)}function ot(i,a){if(1&i){const e=t.RV6();t.j41(0,"tr",39),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.toggleExpandRow(o))}),t.k0s()}if(2&i){const e=a.$implicit,n=t.XpG();t.AVh("matgrid-expanded-row",n.expandedElement===e)}}function nt(i,a){1&i&&t.nrm(0,"tr",40)}let P=(()=>{class i{constructor(e,n,o){this.productionOrderService=e,this.notificationService=n,this.router=o,this.productionOrderData=[],this.filteredProductionOrderData=[],this.columnsToDisplay=["code","poNumber","poDateTimeFormatted","plannedQty","itemName","actions"],this.expandedElement=null,this.relatedData=[],this.searchData={},this.statusOptions=["Open","Closed"],this.selectedStatus="Open"}ngOnInit(){this.getProductionOrderData()}getProductionOrderData(){this.productionOrderService.getPOByStatus(this.selectedStatus).subscribe(e=>{this.productionOrderData=e,this.filteredProductionOrderData=e},e=>{this.notificationService.error("Failed to load production orders.")})}GetPOBystatus(){this.getProductionOrderData()}toggleExpandRow(e){this.expandedElement===e?this.expandedElement=null:(this.expandedElement=e,this.productionOrderService.getByIdProductionOrder(e.id).subscribe(n=>{this.relatedData=this.getRelatedData(n)},n=>{this.notificationService.error("Failed to load related data.")}))}toggleStatus(e){this.productionOrderService.toggleProductionOrderStatus(e.id).subscribe(()=>{e.status="Open"===e.status?"Closed":"Open",this.notificationService.success(`Status updated successfully for Production Order: ${e.code}`),this.getProductionOrderData()},n=>{this.notificationService.error(`Failed to update status for Production Order: ${e.code}`)})}isRowExpanded(e){return this.expandedElement===e}getRelatedData(e){const n=[];return e.weightChecks&&e.weightChecks.forEach(o=>n.push({type:"Weight Check",id:o.id,code:o.code,date:o.startDateTime,endDate:o.endDateTime,productName:o.productName,shiftName:o.shiftName,totalcaseproduced:""})),e.attributeChecks&&e.attributeChecks.forEach(o=>n.push({type:"Attribute Check",id:o.id,code:o.code,date:o.acDate,endDate:"",productName:o.productName,shiftName:"",totalcaseproduced:""})),e.preCheckListEntities&&e.preCheckListEntities.forEach(o=>n.push({type:"Pre Check List",id:o.id,code:o.code,endDate:"",date:o.startDateTime,productName:o.productName,shiftName:o.shiftName,totalcaseproduced:""})),e.postCheckListEntities&&e.postCheckListEntities.forEach(o=>n.push({type:"Post Check List",id:o.id,code:o.code,date:o.endDateTime,endDate:"",productName:o.productName,shiftName:o.shiftName,totalcaseproduced:""})),e.palletPackingList&&e.palletPackingList.forEach(o=>n.push({type:"Pallet Packing List",id:o.id,code:o.code,date:o.packingDateTime,endDate:"",productName:o.productName,shiftName:" ",totalcaseproduced:o.TotalCasesProduced})),e.liquidPreparationList&&e.liquidPreparationList.forEach(o=>n.push({type:"Liquid Preparation",id:o.id,code:o.code,date:o.startDateTime,endDate:o.endDateTime,productName:o.productName,shiftName:o.shiftName,totalcaseproduced:""})),n}editRelatedData(e){"Weight Check"===e.type?this.router.navigate(["/secure/masters/weight-check/edit",e.id]):"Attribute Check"===e.type?this.router.navigate(["/secure/masters/attribute-check/edit",e.id]):"Pre Check List"===e.type?this.router.navigate(["/secure/masters/pre-check/edit",e.id]):"Post Check List"===e.type?this.router.navigate(["/secure/masters/post-check/edit",e.id]):"Pallet Packing List"===e.type?this.router.navigate(["/secure/masters/pallet-packing/edit",e.id]):console.error("Unknown type:",e.type)}updateSearch(e){this.searchData=Object.assign({},e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(w),t.rXU(F.tw),t.rXU(_.Ix))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-production-order-list"]],decls:23,vars:8,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],[1,"form-group"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","matgrid-element-row",3,"matgrid-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","matgrid-detail-row",4,"matRowDef","matRowDefColumns"],[3,"value"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-icon-button","",3,"click"],[1,"matgrid-element-detail",2,"margin-left","3%"],["mat-table","",1,"mat-elevation-z8","nested-table",3,"dataSource"],["matColumnDef","type"],["matColumnDef","code"],["matColumnDef","date"],["matColumnDef","productName"],["matColumnDef","shiftName"],["matColumnDef","totalcaseproduced"],["matColumnDef","actions"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"matgrid-element-row",3,"click"],["mat-row","",1,"matgrid-detail-row"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Production Order List"),t.k0s()(),t.j41(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),t.EFF(11,"Status"),t.k0s(),t.j41(12,"mat-select",9),t.mxI("ngModelChange",function(m){return t.DH7(o.selectedStatus,m)||(o.selectedStatus=m),m}),t.bIt("selectionChange",function(){return o.GetPOBystatus()}),t.DNE(13,R,2,2,"mat-option",10),t.k0s()()()()(),t.j41(14,"div",11)(15,"div",12)(16,"table",13),t.DNE(17,H,3,1,"ng-container",14),t.qex(18,15),t.DNE(19,it,26,7,"td",16),t.bVm(),t.DNE(20,rt,1,0,"tr",17)(21,ot,1,2,"tr",18)(22,nt,1,0,"tr",19),t.k0s()()()()()()),2&n&&(t.R7$(12),t.R50("ngModel",o.selectedStatus),t.R7$(),t.Y8G("ngForOf",o.statusOptions),t.R7$(3),t.Y8G("dataSource",o.filteredProductionOrderData),t.R7$(),t.Y8G("ngForOf",o.columnsToDisplay),t.R7$(3),t.Y8G("matHeaderRowDef",o.columnsToDisplay),t.R7$(),t.Y8G("matRowDefColumns",o.columnsToDisplay),t.R7$(),t.Y8G("matRowDefColumns",t.lJ4(7,E)))},dependencies:[p.Sq,p.bT,C.BC,C.vS,b.pQ,f.rl,f.nJ,x.An,k.VO,u.wT,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,p.PV,p.vh],styles:["table[_ngcontent-%COMP%]{width:100%}tr.matgrid-detail-row[_ngcontent-%COMP%]{height:0}tr.matgrid-element-row[_ngcontent-%COMP%]:not(.matgrid-expanded-row):hover{background:#f5f5f5}tr.matgrid-element-row[_ngcontent-%COMP%]:not(.matgrid-expanded-row):active{background:#efefef}.matgrid-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.matgrid-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.matgrid-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:114px}.matgrid-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.matgrid-element-description[_ngcontent-%COMP%]{padding:16px}.matgrid-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}  .mat-mdc-header-cell{font-size:14px!important;font-weight:700!important}"],data:{animation:[(0,r.hZ)("detailExpand",[(0,r.wk)("collapsed",(0,r.iF)({height:"0px",minHeight:"0"})),(0,r.wk)("expanded",(0,r.iF)({height:"*"})),(0,r.kY)("expanded <=> collapsed",(0,r.i0)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}return i})();s(9239);const ct=[{path:"",component:v,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:P,canActivate:[h.LL],data:{page:h.Wt.productionOrder,title:"Production Order"}}]}];let dt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[_.iI.forChild(ct),_.iI]})}return i})();var lt=s(1774),ht=s(9830),mt=s(2356),g=s(8910),pt=s(5263),ut=s(40),_t=s(9631),ft=s(1413);let S=(()=>{class i{constructor(){this.changes=new ft.B}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const St={provide:S,deps:[[new t.Xx1,new t.kdw,S]],useFactory:function gt(i){return i||new S}};let Dt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[St],imports:[u.yE]})}return i})(),vt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[w,(0,ht._c)()],imports:[p.MD,dt,lt.Gg,y.Kj,mt.c9,g.Hw,g.Xg,g.T_,u.WX,pt.ZG,ut.Yr,f.RG,_t.fS,d.tP,b.Hl,x.m_,Dt]})}return i})()}}]);