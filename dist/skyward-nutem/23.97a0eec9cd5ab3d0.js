"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[23],{81023:(U,g,n)=>{n.r(g),n.d(g,{ModuleModule:()=>Y});var S=n(71774),d=n(18498),t=n(54438);let v=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,a){1&i&&t.nrm(0,"router-outlet")},dependencies:[d.n3],encapsulation:2})}return o})();var r=n(89417),s=n(4434);let u=(()=>{class o extends s.QP{constructor(e){super(e,"module"),this._baseService=e}static#t=this.\u0275fac=function(i){return new(i||o)(t.KVO(s.dD))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}return o})();var M=n(45794),h=n(88834),b=n(32102),j=n(99631),_=n(30220),k=n(58777),F=n(67133);function D(o,m){if(1&o){const e=t.RV6();t.j41(0,"a",19),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(1," View List "),t.k0s()}}let p=(()=>{class o{constructor(e,i,a,l,c){this.activatedRoute=e,this.router=i,this.formBuilder=a,this.moduleService=l,this.notificationService=c,this.page=s.Wt.module,this.permissions=s.eZ,this.createForm()}ngOnInit(){this.getModuleRoute()}getModuleRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{this.isEditMode=!s.ov.isEmpty(e.id),this.createForm(),this.isEditMode&&(this.moduleId=+e.id,this.getModuleDetails())})}getModuleDetails(){this.moduleService.getById(this.moduleId).subscribe(e=>{this.moduleData=e,this.setModuleData()},e=>{console.log(e)})}setModuleData(){this.frmModule.patchValue(this.moduleData)}createForm(){this.frmModule=this.formBuilder.group({name:["",[r.k0.required,r.k0.maxLength(100)]],code:["",[r.k0.required,r.k0.maxLength(50)]],priority:["",[r.k0.required,r.k0.min(1)]]})}createModule(){this.moduleService.add(this.frmModule.value).subscribe(i=>{this.cancel(),this.notificationService.success("Module saved successfully.")},i=>{this.error=i})}updateModule(){this.moduleData=Object.assign(this.moduleData,this.moduleData,this.frmModule.value),this.moduleService.update(this.moduleData.id,this.moduleData).subscribe(i=>{this.cancel(),this.notificationService.success("Module updated successfully.")},i=>{this.error=i})}save(){this.isFormSubmitted=!0,!this.frmModule.invalid&&(this.isEditMode?this.updateModule():this.createModule())}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(d.nX),t.rXU(d.Ix),t.rXU(r.ze),t.rXU(u),t.rXU(M.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:36,vars:11,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","name"],[3,"control","message","formSubmitted"],["type","text","matInput","","formControlName","code"],["type","number","matInput","","formControlName","priority"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"]],template:function(i,a){if(1&i){const l=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.nrm(6,"i",7),t.EFF(7," Add/Edit Module"),t.k0s()(),t.j41(8,"div",8),t.DNE(9,D,2,0,"a",9),t.k0s()(),t.j41(10,"div")(11,"form",10,0),t.bIt("submit",function(){return t.eBV(l),t.Njj(a.save())}),t.j41(13,"div",11)(14,"div",12)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Module Name"),t.k0s(),t.nrm(18,"input",13)(19,"mat-validation-message",14),t.k0s()(),t.j41(20,"div",12)(21,"mat-form-field")(22,"mat-label"),t.EFF(23,"Code"),t.k0s(),t.nrm(24,"input",15)(25,"mat-validation-message",14),t.k0s()(),t.j41(26,"div",12)(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"Priority"),t.k0s(),t.nrm(30,"input",16)(31,"mat-validation-message",14),t.k0s()()(),t.j41(32,"div",11)(33,"div",17)(34,"button",18),t.EFF(35,"Save"),t.k0s()()()()()()()()}2&i&&(t.R7$(9),t.Y8G("authPermission",a.page+"_"+a.permissions.list),t.R7$(2),t.Y8G("formGroup",a.frmModule),t.R7$(8),t.Y8G("control",a.frmModule.controls.name)("message","Module Name")("formSubmitted",a.isFormSubmitted),t.R7$(6),t.Y8G("control",a.frmModule.controls.code)("message","Code")("formSubmitted",a.isFormSubmitted),t.R7$(6),t.Y8G("control",a.frmModule.controls.priority)("message","Priority")("formSubmitted",a.isFormSubmitted))},dependencies:[r.qT,r.me,r.Q0,r.BC,r.cb,r.j4,r.JD,h.It,h.$z,b.rl,b.nJ,j.fg,_.B,k.T,F.r],encapsulation:2})}return o})();var T=n(60177),E=n(99213),f=n(33380),G=n(49239),x=n(74193);let y=(()=>{class o{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="name,code"}updateSearchTerms(e,i){this.searchData[e]=i,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["module-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(c){return a.updateSearchTerms(a.searchKey,c)}),t.k0s()(),t.j41(3,"div",3)(4,"search-inactive",4),t.bIt("chkChanged",function(c){return a.updateSearchTerms("isActive",c)}),t.k0s()()()),2&i&&(t.R7$(2),t.Y8G("placeHolder","Search Module Name, Code"))},dependencies:[G.D,x.$],encapsulation:2})}return o})();var I=n(96081);const L=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),R=()=>["../","add"],w=o=>["..","edit",o];function A(o,m){1&o&&(t.j41(0,"a",17)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",18),t.k0s()),2&o&&t.Y8G("routerLink",t.lJ4(1,R))}function N(o,m){if(1&o&&(t.j41(0,"a",21)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&o){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,w,e.id))}}function $(o,m){if(1&o){const e=t.RV6();t.j41(0,"a",24),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,l=t.XpG();return t.Njj(l.activateToggleModule(a,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function P(o,m){if(1&o){const e=t.RV6();t.j41(0,"a",24),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2).row,l=t.XpG();return t.Njj(l.activateToggleModule(a,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function V(o,m){if(1&o&&(t.qex(0,22),t.DNE(1,$,3,0,"a",23)(2,P,3,0,"a",23),t.bVm()),2&o){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function X(o,m){if(1&o&&t.DNE(0,N,3,3,"a",19)(1,V,3,2,"ng-container",20),2&o){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}const B=[{path:"",component:v,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,i){this.moduleService=e,this.notificationService=i,this.moduleData=[],this.page=s.Wt.module,this.permissions=s.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getModuleData()}getModuleData(){this.loading=!0,this.moduleService.get().subscribe(e=>{this.moduleData=e,this.loading=!1},e=>{console.log(e),this.loading=!1})}activateToggleModule(e,i){confirm(`Are you sure you want to ${i?"Activate":"Deactivate"} this module?`)&&this.moduleService.toggleActivate(e.id,i).subscribe(()=>{this.getModuleData()},()=>{this.notificationService.error("Something went wrong.")})}updateSearch(e){this.searchData=Object.assign({},e)}isActiveRow(e){return{"text-danger":!e.isActive}}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(u),t.rXU(M.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:19,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Module Name","prop","name"],["name","Code","prop","code"],["name","Priority","prop","priority"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Module List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,A,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"module-search-panel",10),t.bIt("searchChanged",function(c){return a.updateSearch(c)}),t.k0s(),t.j41(12,"ngx-datatable",11),t.nI1(13,"searchtable"),t.nrm(14,"ngx-datatable-column",12)(15,"ngx-datatable-column",13)(16,"ngx-datatable-column",14),t.j41(17,"ngx-datatable-column",15),t.DNE(18,X,2,2,"ng-template",16),t.k0s()()()()()()()),2&i&&(t.R7$(8),t.Y8G("authPermission",a.page+"_"+a.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(13,12,a.moduleData,a.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",a.loading)("scrollbarH",!0)("rowClass",a.isActiveRow)("messages",t.lJ4(15,L)),t.R7$(5),t.Y8G("sortable",!1))},dependencies:[T.bT,h.It,E.An,d.Wk,f.ge,f.ed,f.QI,_.B,y,I.j],encapsulation:2})}return o})(),canActivate:[s.LL],data:{page:s.Wt.module,action:s.eZ.list,title:"Module"}},{path:"add",canActivate:[s.LL],data:{page:s.Wt.module,action:s.eZ.create,title:"Module"},component:p},{path:"edit/:id",canActivate:[s.LL],data:{page:s.Wt.module,action:s.eZ.edit,title:"Module"},component:p}]}];let H=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[d.iI.forChild(B),d.iI]})}return o})(),Y=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({providers:[u],imports:[S.Gg,H]})}return o})()}}]);