"use strict";(self.webpackChunkskyward_admin=self.webpackChunkskyward_admin||[]).push([[347],{84347:(J,f,a)=>{a.r(f),a.d(f,{ModuleGroupModule:()=>W});var S=a(71774),c=a(18498),t=a(54438);let G=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,r){1&i&&t.nrm(0,"router-outlet")},dependencies:[c.n3],encapsulation:2})}return o})();var n=a(89417),s=a(4434),m=a(56102),v=a(45794),M=a(60177),p=a(88834),b=a(32102),F=a(99631),j=a(82798),k=a(86600),y=a(30220),T=a(58777),D=a(67133);function E(o,u){if(1&o){const e=t.RV6();t.j41(0,"a",21),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.cancel())}),t.EFF(1," View List "),t.k0s()}}function I(o,u){if(1&o&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&o){const e=u.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}let h=(()=>{class o{constructor(e,i,r,l,d,Z){this.activatedRoute=e,this.router=i,this.formBuilder=r,this.moduleGroupService=l,this.notificationService=d,this.listService=Z,this.page=s.Wt.moduleGroup,this.permissions=s.eZ,this.modules=[],this.createForm()}ngOnInit(){this.getModuleGroupRoute(),this.loadModules()}getModuleGroupRoute(){this.routerSub=this.activatedRoute.params.subscribe(e=>{this.isEditMode=!s.ov.isEmpty(e.id),this.createForm(),this.isEditMode&&(this.moduleGroupId=+e.id,this.getModuleGroupDetails())})}getModuleGroupDetails(){this.moduleGroupService.getById(this.moduleGroupId).subscribe(e=>{this.moduleGroupData=e,this.setModuleGroupData()},e=>{console.log(e)})}setModuleGroupData(){this.frmModuleGroup.patchValue(this.moduleGroupData)}createForm(){this.frmModuleGroup=this.formBuilder.group({name:["",[n.k0.required,n.k0.maxLength(100)]],code:["",[n.k0.required,n.k0.maxLength(50)]],priority:[null,[n.k0.required]],moduleId:[null,[n.k0.required]],createdBy:[null],createdOn:[null],modifiedBy:[null],modifiedOn:[null]})}createModuleGroup(){this.moduleGroupService.add(this.frmModuleGroup.value).subscribe(i=>{this.cancel(),this.notificationService.success("Module Group saved successfully.")},i=>{this.error=i})}updateModuleGroup(){this.moduleGroupData=Object.assign(this.moduleGroupData,this.moduleGroupData,this.frmModuleGroup.value),this.moduleGroupService.update(this.moduleGroupData.id,this.moduleGroupData).subscribe(i=>{this.cancel(),this.notificationService.success("Module Group updated successfully.")},i=>{this.error=i})}save(){this.isFormSubmitted=!0,!this.frmModuleGroup.invalid&&(this.isEditMode?this.updateModuleGroup():this.createModuleGroup())}cancel(){this.router.navigate(this.isEditMode?["../..","list"]:["..","list"],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.routerSub.unsubscribe()}loadModules(){this.listService.getModulePermissionList().subscribe(e=>{this.modules=e})}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(c.nX),t.rXU(c.Ix),t.rXU(n.ze),t.rXU(m.T),t.rXU(v.tw),t.rXU(s.aG))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:44,vars:15,consts:[["form","ngForm"],[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p-3","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","left-side-header"],[1,"mb-2","float-left"],[1,"icon-edit"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","right-side-header","mb-2"],["mat-flat-button","","color","primary","class","app-button",3,"click",4,"authPermission"],["novalidate","",1,"app-form",3,"submit","formGroup"],[1,"row"],[1,"col-md-4"],["type","text","matInput","","formControlName","name"],[3,"control","message","formSubmitted"],["type","text","matInput","","formControlName","code"],["type","number","matInput","","formControlName","priority"],["formControlName","moduleId"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-12","text-center"],["type","submit","mat-flat-button","","color","primary",1,"app-button","mr-1"],["mat-flat-button","","color","primary",1,"app-button",3,"click"],[3,"value"]],template:function(i,r){if(1&i){const l=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),t.nrm(6,"i",7),t.EFF(7," Add/Edit Module Group "),t.k0s()(),t.j41(8,"div",8),t.DNE(9,E,2,0,"a",9),t.k0s()(),t.j41(10,"div")(11,"form",10,0),t.bIt("submit",function(){return t.eBV(l),t.Njj(r.save())}),t.j41(13,"div",11)(14,"div",12)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Module Group Name"),t.k0s(),t.nrm(18,"input",13)(19,"mat-validation-message",14),t.k0s()(),t.j41(20,"div",12)(21,"mat-form-field")(22,"mat-label"),t.EFF(23,"Code"),t.k0s(),t.nrm(24,"input",15)(25,"mat-validation-message",14),t.k0s()(),t.j41(26,"div",12)(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"Priority"),t.k0s(),t.nrm(30,"input",16)(31,"mat-validation-message",14),t.k0s()()(),t.j41(32,"div",11)(33,"div",12)(34,"mat-form-field")(35,"mat-label"),t.EFF(36,"Module Name"),t.k0s(),t.j41(37,"mat-select",17),t.DNE(38,I,2,2,"mat-option",18),t.k0s(),t.nrm(39,"mat-validation-message",14),t.k0s()()(),t.j41(40,"div",11)(41,"div",19)(42,"button",20),t.EFF(43," Save "),t.k0s()()()()()()()()}2&i&&(t.R7$(9),t.Y8G("authPermission",r.page+"_"+r.permissions.list),t.R7$(2),t.Y8G("formGroup",r.frmModuleGroup),t.R7$(8),t.Y8G("control",r.frmModuleGroup.controls.name)("message","Module Group Name")("formSubmitted",r.isFormSubmitted),t.R7$(6),t.Y8G("control",r.frmModuleGroup.controls.code)("message","Code")("formSubmitted",r.isFormSubmitted),t.R7$(6),t.Y8G("control",r.frmModuleGroup.controls.priority)("message","Priority")("formSubmitted",r.isFormSubmitted),t.R7$(7),t.Y8G("ngForOf",r.modules),t.R7$(),t.Y8G("control",r.frmModuleGroup.controls.moduleId)("message","Module Name")("formSubmitted",r.isFormSubmitted))},dependencies:[M.Sq,n.qT,n.me,n.Q0,n.BC,n.cb,n.j4,n.JD,p.It,p.$z,b.rl,b.nJ,F.fg,j.VO,k.wT,y.B,T.T,D.r],encapsulation:2})}return o})();var L=a(99213),g=a(33380),R=a(49239),x=a(74193);let _=(()=>{class o{constructor(){this.searchChanged=new t.bkB,this.searchData={},this.searchKey="name,code,moduleName,priority"}updateSearchTerms(e,i){this.searchData[e]=i,this.searchChanged.emit(this.searchData)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["module-group-search-panel"]],outputs:{searchChanged:"searchChanged"},decls:5,vars:1,consts:[[1,"row"],[1,"col-lg-6"],[3,"textSearchEntered","placeHolder"],[1,"col-lg-4"],[3,"chkChanged"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"search-text",2),t.bIt("textSearchEntered",function(d){return r.updateSearchTerms("searchKey",d)}),t.k0s()(),t.j41(3,"div",3)(4,"search-inactive",4),t.bIt("chkChanged",function(d){return r.updateSearchTerms("isActive",d)}),t.k0s()()()),2&i&&(t.R7$(2),t.Y8G("placeHolder","Search Module Group"))},dependencies:[R.D,x.$],encapsulation:2})}return o})();var N=a(96081);const A=()=>({emptyMessage:"No Data to Display",totalMessage:"Total"}),w=()=>["../","add"],$=o=>["..","edit",o];function Y(o,u){1&o&&(t.j41(0,"a",18)(1,"span"),t.EFF(2,"Add New"),t.k0s(),t.nrm(3,"i",19),t.k0s()),2&o&&t.Y8G("routerLink",t.lJ4(1,w))}function B(o,u){if(1&o&&(t.j41(0,"a",22)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()),2&o){const e=t.XpG().row;t.Y8G("routerLink",t.eq3(1,$,e.id))}}function X(o,u){if(1&o){const e=t.RV6();t.j41(0,"a",25),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).row,l=t.XpG();return t.Njj(l.activateToggleModuleGroup(r,!1))}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s()()}}function P(o,u){if(1&o){const e=t.RV6();t.j41(0,"a",25),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).row,l=t.XpG();return t.Njj(l.activateToggleModuleGroup(r,!0))}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s()()}}function V(o,u){if(1&o&&(t.qex(0,23),t.DNE(1,X,3,0,"a",24)(2,P,3,0,"a",24),t.bVm()),2&o){const e=t.XpG().row;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function U(o,u){if(1&o&&t.DNE(0,B,3,3,"a",20)(1,V,3,2,"ng-container",21),2&o){const e=t.XpG();t.Y8G("authPermission",e.page+"_"+e.permissions.edit),t.R7$(),t.Y8G("authPermission",e.page+"_"+e.permissions.active)}}const H=[{path:"",component:G,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,i){this.moduleGroupService=e,this.notificationService=i,this.moduleGroupData=[],this.page=s.Wt.moduleGroup,this.permissions=s.eZ,this.searchData={isActive:!1}}ngOnInit(){this.getModuleGroupData()}getModuleGroupData(){this.loading=!0,this.moduleGroupService.get().subscribe(e=>{this.moduleGroupData=e,this.loading=!1},e=>{console.log(e),this.loading=!1})}activateToggleModuleGroup(e,i){confirm(`Are you sure you want to ${i?"Activate":"Deactivate"} this module group?`)&&this.moduleGroupService.toggleActivate(e.id,i).subscribe(()=>{this.getModuleGroupData()},l=>{this.notificationService.error("Something went wrong.")})}updateSearch(e){this.searchData=Object.assign({},e)}isActiveRow(e){return{"text-danger":!e.isActive}}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(m.T),t.rXU(v.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:20,vars:16,consts:[[1,"row","justify-content-center"],[1,"col-xl-11","col-lg-12"],[1,"border","p30","rounded"],[1,"row","align-items-center"],[1,"col-lg-7","col-sm-9","col-xs-10","d-flex","align-items-end","leftSideHeader"],[1,"mb20","float-left"],[1,"col-lg-5","col-sm-3","col-xs-2","d-flex","justify-content-end","rightSideHeader","mb10"],["mat-flat-button","","color","primary","class","app-button",3,"routerLink",4,"authPermission"],[1,"row"],[1,"col-12"],[3,"searchChanged"],[1,"material",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit","loadingIndicator","scrollbarH","rowClass","messages"],["name","Module Group","prop","name"],["name","Code","prop","code"],["name","Module Name","prop","moduleName"],["name","Priority","prop","priority"],["name","Actions",3,"sortable"],["ngx-datatable-cell-template",""],["mat-flat-button","","color","primary",1,"app-button",3,"routerLink"],[1,"icon-plus"],["class","button-padding","color","primary",3,"routerLink",4,"authPermission"],["class","ml-10",4,"authPermission"],["color","primary",1,"button-padding",3,"routerLink"],[1,"ml-10"],["class","button-padding","color","primary",3,"click",4,"ngIf"],["color","primary",1,"button-padding",3,"click"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6,"Module Group List"),t.k0s()(),t.j41(7,"div",6),t.DNE(8,Y,4,2,"a",7),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"module-group-search-panel",10),t.bIt("searchChanged",function(d){return r.updateSearch(d)}),t.k0s(),t.j41(12,"ngx-datatable",11),t.nI1(13,"searchtable"),t.nrm(14,"ngx-datatable-column",12)(15,"ngx-datatable-column",13)(16,"ngx-datatable-column",14)(17,"ngx-datatable-column",15),t.j41(18,"ngx-datatable-column",16),t.DNE(19,U,2,2,"ng-template",17),t.k0s()()()()()()()),2&i&&(t.R7$(8),t.Y8G("authPermission",r.page+"_"+r.permissions.create),t.R7$(4),t.Y8G("rows",t.i5U(13,12,r.moduleGroupData,r.searchData))("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("loadingIndicator",r.loading)("scrollbarH",!0)("rowClass",r.isActiveRow)("messages",t.lJ4(15,A)),t.R7$(6),t.Y8G("sortable",!1))},dependencies:[M.bT,p.It,L.An,c.Wk,g.ge,g.ed,g.QI,y.B,_,N.j],encapsulation:2})}return o})(),canActivate:[s.LL],data:{page:s.Wt.moduleGroup,action:s.eZ.list,title:"Module Group"}},{path:"add",canActivate:[s.LL],data:{page:s.Wt.moduleGroup,action:s.eZ.create,title:"Module Group"},component:h},{path:"edit/:id",canActivate:[s.LL],data:{page:s.Wt.moduleGroup,action:s.eZ.edit,title:"Module Group"},component:h}]}];let O=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[c.iI.forChild(H),c.iI]})}return o})(),W=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({providers:[m.T],imports:[S.Gg,O]})}return o})()}}]);